var qa=Object.defineProperty;var Zi=e=>{throw TypeError(e)};var Ha=(e,n,t)=>n in e?qa(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var Ce=(e,n,t)=>Ha(e,typeof n!="symbol"?n+"":n,t),Jr=(e,n,t)=>n.has(e)||Zi("Cannot "+t);var U=(e,n,t)=>(Jr(e,n,"read from private field"),t?t.call(e):n.get(e)),xe=(e,n,t)=>n.has(e)?Zi("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,t),Be=(e,n,t,h)=>(Jr(e,n,"write to private field"),h?h.call(e,t):n.set(e,t),t),ke=(e,n,t)=>(Jr(e,n,"access private method"),t);var wr=(e,n,t,h)=>({set _(f){Be(e,n,f,t)},get _(){return U(e,n,h)}});function Va(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var nt={},qr={};qr.byteLength=Ya;qr.toByteArray=Qa;qr.fromByteArray=Za;var dt=[],at=[],za=typeof Uint8Array<"u"?Uint8Array:Array,Xr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var er=0,Ka=Xr.length;er<Ka;++er)dt[er]=Xr[er],at[Xr.charCodeAt(er)]=er;at[45]=62;at[95]=63;function Vo(e){var n=e.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");t===-1&&(t=n);var h=t===n?0:4-t%4;return[t,h]}function Ya(e){var n=Vo(e),t=n[0],h=n[1];return(t+h)*3/4-h}function Ga(e,n,t){return(n+t)*3/4-t}function Qa(e){var n,t=Vo(e),h=t[0],f=t[1],a=new za(Ga(e,h,f)),i=0,o=f>0?h-4:h,l;for(l=0;l<o;l+=4)n=at[e.charCodeAt(l)]<<18|at[e.charCodeAt(l+1)]<<12|at[e.charCodeAt(l+2)]<<6|at[e.charCodeAt(l+3)],a[i++]=n>>16&255,a[i++]=n>>8&255,a[i++]=n&255;return f===2&&(n=at[e.charCodeAt(l)]<<2|at[e.charCodeAt(l+1)]>>4,a[i++]=n&255),f===1&&(n=at[e.charCodeAt(l)]<<10|at[e.charCodeAt(l+1)]<<4|at[e.charCodeAt(l+2)]>>2,a[i++]=n>>8&255,a[i++]=n&255),a}function Ja(e){return dt[e>>18&63]+dt[e>>12&63]+dt[e>>6&63]+dt[e&63]}function Xa(e,n,t){for(var h,f=[],a=n;a<t;a+=3)h=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),f.push(Ja(h));return f.join("")}function Za(e){for(var n,t=e.length,h=t%3,f=[],a=16383,i=0,o=t-h;i<o;i+=a)f.push(Xa(e,i,i+a>o?o:i+a));return h===1?(n=e[t-1],f.push(dt[n>>2]+dt[n<<4&63]+"==")):h===2&&(n=(e[t-2]<<8)+e[t-1],f.push(dt[n>>10]+dt[n>>4&63]+dt[n<<2&63]+"=")),f.join("")}var Ni={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ni.read=function(e,n,t,h,f){var a,i,o=f*8-h-1,l=(1<<o)-1,u=l>>1,d=-7,g=t?f-1:0,m=t?-1:1,b=e[n+g];for(g+=m,a=b&(1<<-d)-1,b>>=-d,d+=o;d>0;a=a*256+e[n+g],g+=m,d-=8);for(i=a&(1<<-d)-1,a>>=-d,d+=h;d>0;i=i*256+e[n+g],g+=m,d-=8);if(a===0)a=1-u;else{if(a===l)return i?NaN:(b?-1:1)*(1/0);i=i+Math.pow(2,h),a=a-u}return(b?-1:1)*i*Math.pow(2,a-h)};Ni.write=function(e,n,t,h,f,a){var i,o,l,u=a*8-f-1,d=(1<<u)-1,g=d>>1,m=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=h?0:a-1,w=h?1:-1,_=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(o=isNaN(n)?1:0,i=d):(i=Math.floor(Math.log(n)/Math.LN2),n*(l=Math.pow(2,-i))<1&&(i--,l*=2),i+g>=1?n+=m/l:n+=m*Math.pow(2,1-g),n*l>=2&&(i++,l/=2),i+g>=d?(o=0,i=d):i+g>=1?(o=(n*l-1)*Math.pow(2,f),i=i+g):(o=n*Math.pow(2,g-1)*Math.pow(2,f),i=0));f>=8;e[t+b]=o&255,b+=w,o/=256,f-=8);for(i=i<<f|o,u+=f;u>0;e[t+b]=i&255,b+=w,i/=256,u-=8);e[t+b-w]|=_*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const n=qr,t=Ni,h=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=B,e.INSPECT_MAX_BYTES=50;const f=2147483647;e.kMaxLength=f,o.TYPED_ARRAY_SUPPORT=a(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const s=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(s,r),s.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function i(s){if(s>f)throw new RangeError('The value "'+s+'" is invalid for option "size"');const r=new Uint8Array(s);return Object.setPrototypeOf(r,o.prototype),r}function o(s,r,c){if(typeof s=="number"){if(typeof r=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(s)}return l(s,r,c)}o.poolSize=8192;function l(s,r,c){if(typeof s=="string")return m(s,r);if(ArrayBuffer.isView(s))return w(s);if(s==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s);if(x(s,ArrayBuffer)||s&&x(s.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(x(s,SharedArrayBuffer)||s&&x(s.buffer,SharedArrayBuffer)))return _(s,r,c);if(typeof s=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const y=s.valueOf&&s.valueOf();if(y!=null&&y!==s)return o.from(y,r,c);const v=T(s);if(v)return v;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof s[Symbol.toPrimitive]=="function")return o.from(s[Symbol.toPrimitive]("string"),r,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s)}o.from=function(s,r,c){return l(s,r,c)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function u(s){if(typeof s!="number")throw new TypeError('"size" argument must be of type number');if(s<0)throw new RangeError('The value "'+s+'" is invalid for option "size"')}function d(s,r,c){return u(s),s<=0?i(s):r!==void 0?typeof c=="string"?i(s).fill(r,c):i(s).fill(r):i(s)}o.alloc=function(s,r,c){return d(s,r,c)};function g(s){return u(s),i(s<0?0:M(s)|0)}o.allocUnsafe=function(s){return g(s)},o.allocUnsafeSlow=function(s){return g(s)};function m(s,r){if((typeof r!="string"||r==="")&&(r="utf8"),!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r);const c=S(s,r)|0;let y=i(c);const v=y.write(s,r);return v!==c&&(y=y.slice(0,v)),y}function b(s){const r=s.length<0?0:M(s.length)|0,c=i(r);for(let y=0;y<r;y+=1)c[y]=s[y]&255;return c}function w(s){if(x(s,Uint8Array)){const r=new Uint8Array(s);return _(r.buffer,r.byteOffset,r.byteLength)}return b(s)}function _(s,r,c){if(r<0||s.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(s.byteLength<r+(c||0))throw new RangeError('"length" is outside of buffer bounds');let y;return r===void 0&&c===void 0?y=new Uint8Array(s):c===void 0?y=new Uint8Array(s,r):y=new Uint8Array(s,r,c),Object.setPrototypeOf(y,o.prototype),y}function T(s){if(o.isBuffer(s)){const r=M(s.length)|0,c=i(r);return c.length===0||s.copy(c,0,0,r),c}if(s.length!==void 0)return typeof s.length!="number"||D(s.length)?i(0):b(s);if(s.type==="Buffer"&&Array.isArray(s.data))return b(s.data)}function M(s){if(s>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return s|0}function B(s){return+s!=s&&(s=0),o.alloc(+s)}o.isBuffer=function(r){return r!=null&&r._isBuffer===!0&&r!==o.prototype},o.compare=function(r,c){if(x(r,Uint8Array)&&(r=o.from(r,r.offset,r.byteLength)),x(c,Uint8Array)&&(c=o.from(c,c.offset,c.byteLength)),!o.isBuffer(r)||!o.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===c)return 0;let y=r.length,v=c.length;for(let k=0,Y=Math.min(y,v);k<Y;++k)if(r[k]!==c[k]){y=r[k],v=c[k];break}return y<v?-1:v<y?1:0},o.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(r,c){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return o.alloc(0);let y;if(c===void 0)for(c=0,y=0;y<r.length;++y)c+=r[y].length;const v=o.allocUnsafe(c);let k=0;for(y=0;y<r.length;++y){let Y=r[y];if(x(Y,Uint8Array))k+Y.length>v.length?(o.isBuffer(Y)||(Y=o.from(Y)),Y.copy(v,k)):Uint8Array.prototype.set.call(v,Y,k);else if(o.isBuffer(Y))Y.copy(v,k);else throw new TypeError('"list" argument must be an Array of Buffers');k+=Y.length}return v};function S(s,r){if(o.isBuffer(s))return s.length;if(ArrayBuffer.isView(s)||x(s,ArrayBuffer))return s.byteLength;if(typeof s!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof s);const c=s.length,y=arguments.length>2&&arguments[2]===!0;if(!y&&c===0)return 0;let v=!1;for(;;)switch(r){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return $(s).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return N(s).length;default:if(v)return y?-1:$(s).length;r=(""+r).toLowerCase(),v=!0}}o.byteLength=S;function j(s,r,c){let y=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,r>>>=0,c<=r))return"";for(s||(s="utf8");;)switch(s){case"hex":return we(this,r,c);case"utf8":case"utf-8":return te(this,r,c);case"ascii":return ae(this,r,c);case"latin1":case"binary":return V(this,r,c);case"base64":return z(this,r,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,r,c);default:if(y)throw new TypeError("Unknown encoding: "+s);s=(s+"").toLowerCase(),y=!0}}o.prototype._isBuffer=!0;function F(s,r,c){const y=s[r];s[r]=s[c],s[c]=y}o.prototype.swap16=function(){const r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let c=0;c<r;c+=2)F(this,c,c+1);return this},o.prototype.swap32=function(){const r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let c=0;c<r;c+=4)F(this,c,c+3),F(this,c+1,c+2);return this},o.prototype.swap64=function(){const r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let c=0;c<r;c+=8)F(this,c,c+7),F(this,c+1,c+6),F(this,c+2,c+5),F(this,c+3,c+4);return this},o.prototype.toString=function(){const r=this.length;return r===0?"":arguments.length===0?te(this,0,r):j.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(r){if(!o.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r?!0:o.compare(this,r)===0},o.prototype.inspect=function(){let r="";const c=e.INSPECT_MAX_BYTES;return r=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(r+=" ... "),"<Buffer "+r+">"},h&&(o.prototype[h]=o.prototype.inspect),o.prototype.compare=function(r,c,y,v,k){if(x(r,Uint8Array)&&(r=o.from(r,r.offset,r.byteLength)),!o.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(c===void 0&&(c=0),y===void 0&&(y=r?r.length:0),v===void 0&&(v=0),k===void 0&&(k=this.length),c<0||y>r.length||v<0||k>this.length)throw new RangeError("out of range index");if(v>=k&&c>=y)return 0;if(v>=k)return-1;if(c>=y)return 1;if(c>>>=0,y>>>=0,v>>>=0,k>>>=0,this===r)return 0;let Y=k-v,_e=y-c;const Te=Math.min(Y,_e),Se=this.slice(v,k),Ie=r.slice(c,y);for(let Ae=0;Ae<Te;++Ae)if(Se[Ae]!==Ie[Ae]){Y=Se[Ae],_e=Ie[Ae];break}return Y<_e?-1:_e<Y?1:0};function R(s,r,c,y,v){if(s.length===0)return-1;if(typeof c=="string"?(y=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,D(c)&&(c=v?0:s.length-1),c<0&&(c=s.length+c),c>=s.length){if(v)return-1;c=s.length-1}else if(c<0)if(v)c=0;else return-1;if(typeof r=="string"&&(r=o.from(r,y)),o.isBuffer(r))return r.length===0?-1:C(s,r,c,y,v);if(typeof r=="number")return r=r&255,typeof Uint8Array.prototype.indexOf=="function"?v?Uint8Array.prototype.indexOf.call(s,r,c):Uint8Array.prototype.lastIndexOf.call(s,r,c):C(s,[r],c,y,v);throw new TypeError("val must be string, number or Buffer")}function C(s,r,c,y,v){let k=1,Y=s.length,_e=r.length;if(y!==void 0&&(y=String(y).toLowerCase(),y==="ucs2"||y==="ucs-2"||y==="utf16le"||y==="utf-16le")){if(s.length<2||r.length<2)return-1;k=2,Y/=2,_e/=2,c/=2}function Te(Ie,Ae){return k===1?Ie[Ae]:Ie.readUInt16BE(Ae*k)}let Se;if(v){let Ie=-1;for(Se=c;Se<Y;Se++)if(Te(s,Se)===Te(r,Ie===-1?0:Se-Ie)){if(Ie===-1&&(Ie=Se),Se-Ie+1===_e)return Ie*k}else Ie!==-1&&(Se-=Se-Ie),Ie=-1}else for(c+_e>Y&&(c=Y-_e),Se=c;Se>=0;Se--){let Ie=!0;for(let Ae=0;Ae<_e;Ae++)if(Te(s,Se+Ae)!==Te(r,Ae)){Ie=!1;break}if(Ie)return Se}return-1}o.prototype.includes=function(r,c,y){return this.indexOf(r,c,y)!==-1},o.prototype.indexOf=function(r,c,y){return R(this,r,c,y,!0)},o.prototype.lastIndexOf=function(r,c,y){return R(this,r,c,y,!1)};function L(s,r,c,y){c=Number(c)||0;const v=s.length-c;y?(y=Number(y),y>v&&(y=v)):y=v;const k=r.length;y>k/2&&(y=k/2);let Y;for(Y=0;Y<y;++Y){const _e=parseInt(r.substr(Y*2,2),16);if(D(_e))return Y;s[c+Y]=_e}return Y}function q(s,r,c,y){return K($(r,s.length-c),s,c,y)}function X(s,r,c,y){return K(oe(r),s,c,y)}function ne(s,r,c,y){return K(N(r),s,c,y)}function I(s,r,c,y){return K(Z(r,s.length-c),s,c,y)}o.prototype.write=function(r,c,y,v){if(c===void 0)v="utf8",y=this.length,c=0;else if(y===void 0&&typeof c=="string")v=c,y=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(y)?(y=y>>>0,v===void 0&&(v="utf8")):(v=y,y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const k=this.length-c;if((y===void 0||y>k)&&(y=k),r.length>0&&(y<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");v||(v="utf8");let Y=!1;for(;;)switch(v){case"hex":return L(this,r,c,y);case"utf8":case"utf-8":return q(this,r,c,y);case"ascii":case"latin1":case"binary":return X(this,r,c,y);case"base64":return ne(this,r,c,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,r,c,y);default:if(Y)throw new TypeError("Unknown encoding: "+v);v=(""+v).toLowerCase(),Y=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(s,r,c){return r===0&&c===s.length?n.fromByteArray(s):n.fromByteArray(s.slice(r,c))}function te(s,r,c){c=Math.min(s.length,c);const y=[];let v=r;for(;v<c;){const k=s[v];let Y=null,_e=k>239?4:k>223?3:k>191?2:1;if(v+_e<=c){let Te,Se,Ie,Ae;switch(_e){case 1:k<128&&(Y=k);break;case 2:Te=s[v+1],(Te&192)===128&&(Ae=(k&31)<<6|Te&63,Ae>127&&(Y=Ae));break;case 3:Te=s[v+1],Se=s[v+2],(Te&192)===128&&(Se&192)===128&&(Ae=(k&15)<<12|(Te&63)<<6|Se&63,Ae>2047&&(Ae<55296||Ae>57343)&&(Y=Ae));break;case 4:Te=s[v+1],Se=s[v+2],Ie=s[v+3],(Te&192)===128&&(Se&192)===128&&(Ie&192)===128&&(Ae=(k&15)<<18|(Te&63)<<12|(Se&63)<<6|Ie&63,Ae>65535&&Ae<1114112&&(Y=Ae))}}Y===null?(Y=65533,_e=1):Y>65535&&(Y-=65536,y.push(Y>>>10&1023|55296),Y=56320|Y&1023),y.push(Y),v+=_e}return ye(y)}const Q=4096;function ye(s){const r=s.length;if(r<=Q)return String.fromCharCode.apply(String,s);let c="",y=0;for(;y<r;)c+=String.fromCharCode.apply(String,s.slice(y,y+=Q));return c}function ae(s,r,c){let y="";c=Math.min(s.length,c);for(let v=r;v<c;++v)y+=String.fromCharCode(s[v]&127);return y}function V(s,r,c){let y="";c=Math.min(s.length,c);for(let v=r;v<c;++v)y+=String.fromCharCode(s[v]);return y}function we(s,r,c){const y=s.length;(!r||r<0)&&(r=0),(!c||c<0||c>y)&&(c=y);let v="";for(let k=r;k<c;++k)v+=H[s[k]];return v}function se(s,r,c){const y=s.slice(r,c);let v="";for(let k=0;k<y.length-1;k+=2)v+=String.fromCharCode(y[k]+y[k+1]*256);return v}o.prototype.slice=function(r,c){const y=this.length;r=~~r,c=c===void 0?y:~~c,r<0?(r+=y,r<0&&(r=0)):r>y&&(r=y),c<0?(c+=y,c<0&&(c=0)):c>y&&(c=y),c<r&&(c=r);const v=this.subarray(r,c);return Object.setPrototypeOf(v,o.prototype),v};function be(s,r,c){if(s%1!==0||s<0)throw new RangeError("offset is not uint");if(s+r>c)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(r,c,y){r=r>>>0,c=c>>>0,y||be(r,c,this.length);let v=this[r],k=1,Y=0;for(;++Y<c&&(k*=256);)v+=this[r+Y]*k;return v},o.prototype.readUintBE=o.prototype.readUIntBE=function(r,c,y){r=r>>>0,c=c>>>0,y||be(r,c,this.length);let v=this[r+--c],k=1;for(;c>0&&(k*=256);)v+=this[r+--c]*k;return v},o.prototype.readUint8=o.prototype.readUInt8=function(r,c){return r=r>>>0,c||be(r,1,this.length),this[r]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(r,c){return r=r>>>0,c||be(r,2,this.length),this[r]|this[r+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(r,c){return r=r>>>0,c||be(r,2,this.length),this[r]<<8|this[r+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(r,c){return r=r>>>0,c||be(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(r,c){return r=r>>>0,c||be(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])},o.prototype.readBigUInt64LE=ie(function(r){r=r>>>0,me(r,"offset");const c=this[r],y=this[r+7];(c===void 0||y===void 0)&&he(r,this.length-8);const v=c+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24,k=this[++r]+this[++r]*2**8+this[++r]*2**16+y*2**24;return BigInt(v)+(BigInt(k)<<BigInt(32))}),o.prototype.readBigUInt64BE=ie(function(r){r=r>>>0,me(r,"offset");const c=this[r],y=this[r+7];(c===void 0||y===void 0)&&he(r,this.length-8);const v=c*2**24+this[++r]*2**16+this[++r]*2**8+this[++r],k=this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+y;return(BigInt(v)<<BigInt(32))+BigInt(k)}),o.prototype.readIntLE=function(r,c,y){r=r>>>0,c=c>>>0,y||be(r,c,this.length);let v=this[r],k=1,Y=0;for(;++Y<c&&(k*=256);)v+=this[r+Y]*k;return k*=128,v>=k&&(v-=Math.pow(2,8*c)),v},o.prototype.readIntBE=function(r,c,y){r=r>>>0,c=c>>>0,y||be(r,c,this.length);let v=c,k=1,Y=this[r+--v];for(;v>0&&(k*=256);)Y+=this[r+--v]*k;return k*=128,Y>=k&&(Y-=Math.pow(2,8*c)),Y},o.prototype.readInt8=function(r,c){return r=r>>>0,c||be(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r]},o.prototype.readInt16LE=function(r,c){r=r>>>0,c||be(r,2,this.length);const y=this[r]|this[r+1]<<8;return y&32768?y|4294901760:y},o.prototype.readInt16BE=function(r,c){r=r>>>0,c||be(r,2,this.length);const y=this[r+1]|this[r]<<8;return y&32768?y|4294901760:y},o.prototype.readInt32LE=function(r,c){return r=r>>>0,c||be(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},o.prototype.readInt32BE=function(r,c){return r=r>>>0,c||be(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},o.prototype.readBigInt64LE=ie(function(r){r=r>>>0,me(r,"offset");const c=this[r],y=this[r+7];(c===void 0||y===void 0)&&he(r,this.length-8);const v=this[r+4]+this[r+5]*2**8+this[r+6]*2**16+(y<<24);return(BigInt(v)<<BigInt(32))+BigInt(c+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24)}),o.prototype.readBigInt64BE=ie(function(r){r=r>>>0,me(r,"offset");const c=this[r],y=this[r+7];(c===void 0||y===void 0)&&he(r,this.length-8);const v=(c<<24)+this[++r]*2**16+this[++r]*2**8+this[++r];return(BigInt(v)<<BigInt(32))+BigInt(this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+y)}),o.prototype.readFloatLE=function(r,c){return r=r>>>0,c||be(r,4,this.length),t.read(this,r,!0,23,4)},o.prototype.readFloatBE=function(r,c){return r=r>>>0,c||be(r,4,this.length),t.read(this,r,!1,23,4)},o.prototype.readDoubleLE=function(r,c){return r=r>>>0,c||be(r,8,this.length),t.read(this,r,!0,52,8)},o.prototype.readDoubleBE=function(r,c){return r=r>>>0,c||be(r,8,this.length),t.read(this,r,!1,52,8)};function E(s,r,c,y,v,k){if(!o.isBuffer(s))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>v||r<k)throw new RangeError('"value" argument is out of bounds');if(c+y>s.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(r,c,y,v){if(r=+r,c=c>>>0,y=y>>>0,!v){const _e=Math.pow(2,8*y)-1;E(this,r,c,y,_e,0)}let k=1,Y=0;for(this[c]=r&255;++Y<y&&(k*=256);)this[c+Y]=r/k&255;return c+y},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(r,c,y,v){if(r=+r,c=c>>>0,y=y>>>0,!v){const _e=Math.pow(2,8*y)-1;E(this,r,c,y,_e,0)}let k=y-1,Y=1;for(this[c+k]=r&255;--k>=0&&(Y*=256);)this[c+k]=r/Y&255;return c+y},o.prototype.writeUint8=o.prototype.writeUInt8=function(r,c,y){return r=+r,c=c>>>0,y||E(this,r,c,1,255,0),this[c]=r&255,c+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(r,c,y){return r=+r,c=c>>>0,y||E(this,r,c,2,65535,0),this[c]=r&255,this[c+1]=r>>>8,c+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(r,c,y){return r=+r,c=c>>>0,y||E(this,r,c,2,65535,0),this[c]=r>>>8,this[c+1]=r&255,c+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(r,c,y){return r=+r,c=c>>>0,y||E(this,r,c,4,4294967295,0),this[c+3]=r>>>24,this[c+2]=r>>>16,this[c+1]=r>>>8,this[c]=r&255,c+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(r,c,y){return r=+r,c=c>>>0,y||E(this,r,c,4,4294967295,0),this[c]=r>>>24,this[c+1]=r>>>16,this[c+2]=r>>>8,this[c+3]=r&255,c+4};function J(s,r,c,y,v){ee(r,y,v,s,c,7);let k=Number(r&BigInt(4294967295));s[c++]=k,k=k>>8,s[c++]=k,k=k>>8,s[c++]=k,k=k>>8,s[c++]=k;let Y=Number(r>>BigInt(32)&BigInt(4294967295));return s[c++]=Y,Y=Y>>8,s[c++]=Y,Y=Y>>8,s[c++]=Y,Y=Y>>8,s[c++]=Y,c}function de(s,r,c,y,v){ee(r,y,v,s,c,7);let k=Number(r&BigInt(4294967295));s[c+7]=k,k=k>>8,s[c+6]=k,k=k>>8,s[c+5]=k,k=k>>8,s[c+4]=k;let Y=Number(r>>BigInt(32)&BigInt(4294967295));return s[c+3]=Y,Y=Y>>8,s[c+2]=Y,Y=Y>>8,s[c+1]=Y,Y=Y>>8,s[c]=Y,c+8}o.prototype.writeBigUInt64LE=ie(function(r,c=0){return J(this,r,c,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=ie(function(r,c=0){return de(this,r,c,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(r,c,y,v){if(r=+r,c=c>>>0,!v){const Te=Math.pow(2,8*y-1);E(this,r,c,y,Te-1,-Te)}let k=0,Y=1,_e=0;for(this[c]=r&255;++k<y&&(Y*=256);)r<0&&_e===0&&this[c+k-1]!==0&&(_e=1),this[c+k]=(r/Y>>0)-_e&255;return c+y},o.prototype.writeIntBE=function(r,c,y,v){if(r=+r,c=c>>>0,!v){const Te=Math.pow(2,8*y-1);E(this,r,c,y,Te-1,-Te)}let k=y-1,Y=1,_e=0;for(this[c+k]=r&255;--k>=0&&(Y*=256);)r<0&&_e===0&&this[c+k+1]!==0&&(_e=1),this[c+k]=(r/Y>>0)-_e&255;return c+y},o.prototype.writeInt8=function(r,c,y){return r=+r,c=c>>>0,y||E(this,r,c,1,127,-128),r<0&&(r=255+r+1),this[c]=r&255,c+1},o.prototype.writeInt16LE=function(r,c,y){return r=+r,c=c>>>0,y||E(this,r,c,2,32767,-32768),this[c]=r&255,this[c+1]=r>>>8,c+2},o.prototype.writeInt16BE=function(r,c,y){return r=+r,c=c>>>0,y||E(this,r,c,2,32767,-32768),this[c]=r>>>8,this[c+1]=r&255,c+2},o.prototype.writeInt32LE=function(r,c,y){return r=+r,c=c>>>0,y||E(this,r,c,4,2147483647,-2147483648),this[c]=r&255,this[c+1]=r>>>8,this[c+2]=r>>>16,this[c+3]=r>>>24,c+4},o.prototype.writeInt32BE=function(r,c,y){return r=+r,c=c>>>0,y||E(this,r,c,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[c]=r>>>24,this[c+1]=r>>>16,this[c+2]=r>>>8,this[c+3]=r&255,c+4},o.prototype.writeBigInt64LE=ie(function(r,c=0){return J(this,r,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=ie(function(r,c=0){return de(this,r,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ee(s,r,c,y,v,k){if(c+y>s.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function le(s,r,c,y,v){return r=+r,c=c>>>0,v||Ee(s,r,c,4),t.write(s,r,c,y,23,4),c+4}o.prototype.writeFloatLE=function(r,c,y){return le(this,r,c,!0,y)},o.prototype.writeFloatBE=function(r,c,y){return le(this,r,c,!1,y)};function P(s,r,c,y,v){return r=+r,c=c>>>0,v||Ee(s,r,c,8),t.write(s,r,c,y,52,8),c+8}o.prototype.writeDoubleLE=function(r,c,y){return P(this,r,c,!0,y)},o.prototype.writeDoubleBE=function(r,c,y){return P(this,r,c,!1,y)},o.prototype.copy=function(r,c,y,v){if(!o.isBuffer(r))throw new TypeError("argument should be a Buffer");if(y||(y=0),!v&&v!==0&&(v=this.length),c>=r.length&&(c=r.length),c||(c=0),v>0&&v<y&&(v=y),v===y||r.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("sourceEnd out of bounds");v>this.length&&(v=this.length),r.length-c<v-y&&(v=r.length-c+y);const k=v-y;return this===r&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(c,y,v):Uint8Array.prototype.set.call(r,this.subarray(y,v),c),k},o.prototype.fill=function(r,c,y,v){if(typeof r=="string"){if(typeof c=="string"?(v=c,c=0,y=this.length):typeof y=="string"&&(v=y,y=this.length),v!==void 0&&typeof v!="string")throw new TypeError("encoding must be a string");if(typeof v=="string"&&!o.isEncoding(v))throw new TypeError("Unknown encoding: "+v);if(r.length===1){const Y=r.charCodeAt(0);(v==="utf8"&&Y<128||v==="latin1")&&(r=Y)}}else typeof r=="number"?r=r&255:typeof r=="boolean"&&(r=Number(r));if(c<0||this.length<c||this.length<y)throw new RangeError("Out of range index");if(y<=c)return this;c=c>>>0,y=y===void 0?this.length:y>>>0,r||(r=0);let k;if(typeof r=="number")for(k=c;k<y;++k)this[k]=r;else{const Y=o.isBuffer(r)?r:o.from(r,v),_e=Y.length;if(_e===0)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(k=0;k<y-c;++k)this[k+c]=Y[k%_e]}return this};const A={};function G(s,r,c){A[s]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:r.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${s}]`,this.stack,delete this.name}get code(){return s}set code(v){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:v,writable:!0})}toString(){return`${this.name} [${s}]: ${this.message}`}}}G("ERR_BUFFER_OUT_OF_BOUNDS",function(s){return s?`${s} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),G("ERR_INVALID_ARG_TYPE",function(s,r){return`The "${s}" argument must be of type number. Received type ${typeof r}`},TypeError),G("ERR_OUT_OF_RANGE",function(s,r,c){let y=`The value of "${s}" is out of range.`,v=c;return Number.isInteger(c)&&Math.abs(c)>2**32?v=ue(String(c)):typeof c=="bigint"&&(v=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(v=ue(v)),v+="n"),y+=` It must be ${r}. Received ${v}`,y},RangeError);function ue(s){let r="",c=s.length;const y=s[0]==="-"?1:0;for(;c>=y+4;c-=3)r=`_${s.slice(c-3,c)}${r}`;return`${s.slice(0,c)}${r}`}function re(s,r,c){me(r,"offset"),(s[r]===void 0||s[r+c]===void 0)&&he(r,s.length-(c+1))}function ee(s,r,c,y,v,k){if(s>c||s<r){const Y=typeof r=="bigint"?"n":"";let _e;throw r===0||r===BigInt(0)?_e=`>= 0${Y} and < 2${Y} ** ${(k+1)*8}${Y}`:_e=`>= -(2${Y} ** ${(k+1)*8-1}${Y}) and < 2 ** ${(k+1)*8-1}${Y}`,new A.ERR_OUT_OF_RANGE("value",_e,s)}re(y,v,k)}function me(s,r){if(typeof s!="number")throw new A.ERR_INVALID_ARG_TYPE(r,"number",s)}function he(s,r,c){throw Math.floor(s)!==s?(me(s,c),new A.ERR_OUT_OF_RANGE("offset","an integer",s)):r<0?new A.ERR_BUFFER_OUT_OF_BOUNDS:new A.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${r}`,s)}const O=/[^+/0-9A-Za-z-_]/g;function W(s){if(s=s.split("=")[0],s=s.trim().replace(O,""),s.length<2)return"";for(;s.length%4!==0;)s=s+"=";return s}function $(s,r){r=r||1/0;let c;const y=s.length;let v=null;const k=[];for(let Y=0;Y<y;++Y){if(c=s.charCodeAt(Y),c>55295&&c<57344){if(!v){if(c>56319){(r-=3)>-1&&k.push(239,191,189);continue}else if(Y+1===y){(r-=3)>-1&&k.push(239,191,189);continue}v=c;continue}if(c<56320){(r-=3)>-1&&k.push(239,191,189),v=c;continue}c=(v-55296<<10|c-56320)+65536}else v&&(r-=3)>-1&&k.push(239,191,189);if(v=null,c<128){if((r-=1)<0)break;k.push(c)}else if(c<2048){if((r-=2)<0)break;k.push(c>>6|192,c&63|128)}else if(c<65536){if((r-=3)<0)break;k.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((r-=4)<0)break;k.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return k}function oe(s){const r=[];for(let c=0;c<s.length;++c)r.push(s.charCodeAt(c)&255);return r}function Z(s,r){let c,y,v;const k=[];for(let Y=0;Y<s.length&&!((r-=2)<0);++Y)c=s.charCodeAt(Y),y=c>>8,v=c%256,k.push(v),k.push(y);return k}function N(s){return n.toByteArray(W(s))}function K(s,r,c,y){let v;for(v=0;v<y&&!(v+c>=r.length||v>=s.length);++v)r[v+c]=s[v];return v}function x(s,r){return s instanceof r||s!=null&&s.constructor!=null&&s.constructor.name!=null&&s.constructor.name===r.name}function D(s){return s!==s}const H=function(){const s="0123456789abcdef",r=new Array(256);for(let c=0;c<16;++c){const y=c*16;for(let v=0;v<16;++v)r[y+v]=s[c]+s[v]}return r}();function ie(s){return typeof BigInt>"u"?p:s}function p(){throw new Error("BigInt not supported")}})(nt);var ji={exports:{}},ir=typeof Reflect=="object"?Reflect:null,eo=ir&&typeof ir.apply=="function"?ir.apply:function(n,t,h){return Function.prototype.apply.call(n,t,h)},kr;ir&&typeof ir.ownKeys=="function"?kr=ir.ownKeys:Object.getOwnPropertySymbols?kr=function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:kr=function(n){return Object.getOwnPropertyNames(n)};function el(e){console&&console.warn&&console.warn(e)}var zo=Number.isNaN||function(n){return n!==n};function Ue(){Ue.init.call(this)}ji.exports=Ue;ji.exports.once=il;Ue.EventEmitter=Ue;Ue.prototype._events=void 0;Ue.prototype._eventsCount=0;Ue.prototype._maxListeners=void 0;var to=10;function Hr(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Ue,"defaultMaxListeners",{enumerable:!0,get:function(){return to},set:function(e){if(typeof e!="number"||e<0||zo(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");to=e}});Ue.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ue.prototype.setMaxListeners=function(n){if(typeof n!="number"||n<0||zo(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this};function Ko(e){return e._maxListeners===void 0?Ue.defaultMaxListeners:e._maxListeners}Ue.prototype.getMaxListeners=function(){return Ko(this)};Ue.prototype.emit=function(n){for(var t=[],h=1;h<arguments.length;h++)t.push(arguments[h]);var f=n==="error",a=this._events;if(a!==void 0)f=f&&a.error===void 0;else if(!f)return!1;if(f){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var o=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw o.context=i,o}var l=a[n];if(l===void 0)return!1;if(typeof l=="function")eo(l,this,t);else for(var u=l.length,d=Xo(l,u),h=0;h<u;++h)eo(d[h],this,t);return!0};function Yo(e,n,t,h){var f,a,i;if(Hr(t),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",n,t.listener?t.listener:t),a=e._events),i=a[n]),i===void 0)i=a[n]=t,++e._eventsCount;else if(typeof i=="function"?i=a[n]=h?[t,i]:[i,t]:h?i.unshift(t):i.push(t),f=Ko(e),f>0&&i.length>f&&!i.warned){i.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=n,o.count=i.length,el(o)}return e}Ue.prototype.addListener=function(n,t){return Yo(this,n,t,!1)};Ue.prototype.on=Ue.prototype.addListener;Ue.prototype.prependListener=function(n,t){return Yo(this,n,t,!0)};function tl(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Go(e,n,t){var h={fired:!1,wrapFn:void 0,target:e,type:n,listener:t},f=tl.bind(h);return f.listener=t,h.wrapFn=f,f}Ue.prototype.once=function(n,t){return Hr(t),this.on(n,Go(this,n,t)),this};Ue.prototype.prependOnceListener=function(n,t){return Hr(t),this.prependListener(n,Go(this,n,t)),this};Ue.prototype.removeListener=function(n,t){var h,f,a,i,o;if(Hr(t),f=this._events,f===void 0)return this;if(h=f[n],h===void 0)return this;if(h===t||h.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete f[n],f.removeListener&&this.emit("removeListener",n,h.listener||t));else if(typeof h!="function"){for(a=-1,i=h.length-1;i>=0;i--)if(h[i]===t||h[i].listener===t){o=h[i].listener,a=i;break}if(a<0)return this;a===0?h.shift():rl(h,a),h.length===1&&(f[n]=h[0]),f.removeListener!==void 0&&this.emit("removeListener",n,o||t)}return this};Ue.prototype.off=Ue.prototype.removeListener;Ue.prototype.removeAllListeners=function(n){var t,h,f;if(h=this._events,h===void 0)return this;if(h.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):h[n]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete h[n]),this;if(arguments.length===0){var a=Object.keys(h),i;for(f=0;f<a.length;++f)i=a[f],i!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=h[n],typeof t=="function")this.removeListener(n,t);else if(t!==void 0)for(f=t.length-1;f>=0;f--)this.removeListener(n,t[f]);return this};function Qo(e,n,t){var h=e._events;if(h===void 0)return[];var f=h[n];return f===void 0?[]:typeof f=="function"?t?[f.listener||f]:[f]:t?nl(f):Xo(f,f.length)}Ue.prototype.listeners=function(n){return Qo(this,n,!0)};Ue.prototype.rawListeners=function(n){return Qo(this,n,!1)};Ue.listenerCount=function(e,n){return typeof e.listenerCount=="function"?e.listenerCount(n):Jo.call(e,n)};Ue.prototype.listenerCount=Jo;function Jo(e){var n=this._events;if(n!==void 0){var t=n[e];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Ue.prototype.eventNames=function(){return this._eventsCount>0?kr(this._events):[]};function Xo(e,n){for(var t=new Array(n),h=0;h<n;++h)t[h]=e[h];return t}function rl(e,n){for(;n+1<e.length;n++)e[n]=e[n+1];e.pop()}function nl(e){for(var n=new Array(e.length),t=0;t<n.length;++t)n[t]=e[t].listener||e[t];return n}function il(e,n){return new Promise(function(t,h){function f(i){e.removeListener(n,a),h(i)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",f),t([].slice.call(arguments))}Zo(e,n,a,{once:!0}),n!=="error"&&ol(e,f,{once:!0})})}function ol(e,n,t){typeof e.on=="function"&&Zo(e,"error",n,t)}function Zo(e,n,t,h){if(typeof e.on=="function")h.once?e.once(n,t):e.on(n,t);else if(typeof e.addEventListener=="function")e.addEventListener(n,function f(a){h.once&&e.removeEventListener(n,f),t(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var sl=ji.exports,al=Va(sl),Fi=Object.defineProperty,ll=Object.getOwnPropertyDescriptor,ul=Object.getOwnPropertyNames,hl=Object.prototype.hasOwnProperty,Ge=(e,n)=>()=>(e&&(n=e(e=0)),n),ve=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),Qt=(e,n)=>{for(var t in n)Fi(e,t,{get:n[t],enumerable:!0})},cl=(e,n,t,h)=>{if(n&&typeof n=="object"||typeof n=="function")for(let f of ul(n))!hl.call(e,f)&&f!==t&&Fi(e,f,{get:()=>n[f],enumerable:!(h=ll(n,f))||h.enumerable});return e},Le=e=>cl(Fi({},"__esModule",{value:!0}),e),ce=Ge(()=>{}),Re={};Qt(Re,{_debugEnd:()=>Kn,_debugProcess:()=>zn,_events:()=>li,_eventsCount:()=>ui,_exiting:()=>On,_fatalExceptions:()=>qn,_getActiveHandles:()=>ss,_getActiveRequests:()=>os,_kill:()=>Ln,_linkedBinding:()=>ns,_maxListeners:()=>ai,_preload_modules:()=>oi,_rawDebug:()=>Cn,_startProfilerIdleNotifier:()=>Yn,_stopProfilerIdleNotifier:()=>Gn,_tickCallback:()=>Vn,abort:()=>Zn,addListener:()=>hi,allowedNodeEnvironmentFlags:()=>Wn,arch:()=>mn,argv:()=>wn,argv0:()=>ii,assert:()=>as,binding:()=>An,chdir:()=>kn,config:()=>Pn,cpuUsage:()=>cr,cwd:()=>Tn,debugPort:()=>ni,default:()=>Wi,dlopen:()=>is,domain:()=>Rn,emit:()=>gi,emitWarning:()=>Sn,env:()=>bn,execArgv:()=>vn,execPath:()=>ri,exit:()=>Fn,features:()=>$n,hasUncaughtExceptionCaptureCallback:()=>ls,hrtime:()=>Br,kill:()=>jn,listeners:()=>hs,memoryUsage:()=>Nn,moduleLoadList:()=>xn,nextTick:()=>ts,off:()=>fi,on:()=>bt,once:()=>ci,openStdin:()=>Dn,pid:()=>ei,platform:()=>yn,ppid:()=>ti,prependListener:()=>mi,prependOnceListener:()=>yi,reallyExit:()=>Un,release:()=>Bn,removeAllListeners:()=>di,removeListener:()=>pi,resourceUsage:()=>Mn,setSourceMapsEnabled:()=>si,setUncaughtExceptionCaptureCallback:()=>Hn,stderr:()=>Jn,stdin:()=>Xn,stdout:()=>Qn,title:()=>gn,umask:()=>In,uptime:()=>us,version:()=>_n,versions:()=>En});function Di(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}function fl(){!Kt||!Vt||(Kt=!1,Vt.length?gt=Vt.concat(gt):dr=-1,gt.length&&es())}function es(){if(!Kt){var e=setTimeout(fl,0);Kt=!0;for(var n=gt.length;n;){for(Vt=gt,gt=[];++dr<n;)Vt&&Vt[dr].run();dr=-1,n=gt.length}Vt=null,Kt=!1,clearTimeout(e)}}function ts(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];gt.push(new rs(e,n)),gt.length===1&&!Kt&&setTimeout(es,0)}function rs(e,n){this.fun=e,this.array=n}function Xe(){}function ns(e){Di("_linkedBinding")}function is(e){Di("dlopen")}function os(){return[]}function ss(){return[]}function as(e,n){if(!e)throw new Error(n||"assertion error")}function ls(){return!1}function us(){return Et.now()/1e3}function Br(e){var n=Math.floor((Date.now()-Et.now())*.001),t=Et.now()*.001,h=Math.floor(t)+n,f=Math.floor(t%1*1e9);return e&&(h=h-e[0],f=f-e[1],f<0&&(h--,f+=Cr)),[h,f]}function bt(){return Wi}function hs(e){return[]}var gt,Kt,Vt,dr,gn,mn,yn,bn,wn,vn,_n,En,Sn,An,In,Tn,kn,Bn,Cn,xn,Rn,On,Pn,Un,Ln,cr,Mn,Nn,jn,Fn,Dn,Wn,$n,qn,Hn,Vn,zn,Kn,Yn,Gn,Qn,Jn,Xn,Zn,ei,ti,ri,ni,ii,oi,si,Et,Zr,Cr,ai,li,ui,hi,ci,fi,pi,di,gi,mi,yi,Wi,pl=Ge(()=>{ce(),pe(),fe(),gt=[],Kt=!1,dr=-1,rs.prototype.run=function(){this.fun.apply(null,this.array)},gn="browser",mn="x64",yn="browser",bn={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},wn=["/usr/bin/node"],vn=[],_n="v16.8.0",En={},Sn=function(e,n){console.warn((n?n+": ":"")+e)},An=function(e){Di("binding")},In=function(e){return 0},Tn=function(){return"/"},kn=function(e){},Bn={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Cn=Xe,xn=[],Rn={},On=!1,Pn={},Un=Xe,Ln=Xe,cr=function(){return{}},Mn=cr,Nn=cr,jn=Xe,Fn=Xe,Dn=Xe,Wn={},$n={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},qn=Xe,Hn=Xe,Vn=Xe,zn=Xe,Kn=Xe,Yn=Xe,Gn=Xe,Qn=void 0,Jn=void 0,Xn=void 0,Zn=Xe,ei=2,ti=1,ri="/bin/usr/node",ni=9229,ii="node",oi=[],si=Xe,Et={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Et.now===void 0&&(Zr=Date.now(),Et.timing&&Et.timing.navigationStart&&(Zr=Et.timing.navigationStart),Et.now=()=>Date.now()-Zr),Cr=1e9,Br.bigint=function(e){var n=Br(e);return typeof BigInt>"u"?n[0]*Cr+n[1]:BigInt(n[0]*Cr)+BigInt(n[1])},ai=10,li={},ui=0,hi=bt,ci=bt,fi=bt,pi=bt,di=bt,gi=Xe,mi=bt,yi=bt,Wi={version:_n,versions:En,arch:mn,platform:yn,release:Bn,_rawDebug:Cn,moduleLoadList:xn,binding:An,_linkedBinding:ns,_events:li,_eventsCount:ui,_maxListeners:ai,on:bt,addListener:hi,once:ci,off:fi,removeListener:pi,removeAllListeners:di,emit:gi,prependListener:mi,prependOnceListener:yi,listeners:hs,domain:Rn,_exiting:On,config:Pn,dlopen:is,uptime:us,_getActiveRequests:os,_getActiveHandles:ss,reallyExit:Un,_kill:Ln,cpuUsage:cr,resourceUsage:Mn,memoryUsage:Nn,kill:jn,exit:Fn,openStdin:Dn,allowedNodeEnvironmentFlags:Wn,assert:as,features:$n,_fatalExceptions:qn,setUncaughtExceptionCaptureCallback:Hn,hasUncaughtExceptionCaptureCallback:ls,emitWarning:Sn,nextTick:ts,_tickCallback:Vn,_debugProcess:zn,_debugEnd:Kn,_startProfilerIdleNotifier:Yn,_stopProfilerIdleNotifier:Gn,stdout:Qn,stdin:Xn,stderr:Jn,abort:Zn,umask:In,chdir:kn,cwd:Tn,env:bn,title:gn,argv:wn,execArgv:vn,pid:ei,ppid:ti,execPath:ri,debugPort:ni,hrtime:Br,argv0:ii,_preload_modules:oi,setSourceMapsEnabled:si}}),fe=Ge(()=>{pl()}),Qe={};Qt(Qe,{Buffer:()=>Mr,INSPECT_MAX_BYTES:()=>cs,default:()=>wt,kMaxLength:()=>fs});function dl(){if(bi)return rr;bi=!0,rr.byteLength=o,rr.toByteArray=u,rr.fromByteArray=m;for(var e=[],n=[],t=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,a=h.length;f<a;++f)e[f]=h[f],n[h.charCodeAt(f)]=f;n[45]=62,n[95]=63;function i(b){var w=b.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=b.indexOf("=");_===-1&&(_=w);var T=_===w?0:4-_%4;return[_,T]}function o(b){var w=i(b),_=w[0],T=w[1];return(_+T)*3/4-T}function l(b,w,_){return(w+_)*3/4-_}function u(b){var w,_=i(b),T=_[0],M=_[1],B=new t(l(b,T,M)),S=0,j=M>0?T-4:T,F;for(F=0;F<j;F+=4)w=n[b.charCodeAt(F)]<<18|n[b.charCodeAt(F+1)]<<12|n[b.charCodeAt(F+2)]<<6|n[b.charCodeAt(F+3)],B[S++]=w>>16&255,B[S++]=w>>8&255,B[S++]=w&255;return M===2&&(w=n[b.charCodeAt(F)]<<2|n[b.charCodeAt(F+1)]>>4,B[S++]=w&255),M===1&&(w=n[b.charCodeAt(F)]<<10|n[b.charCodeAt(F+1)]<<4|n[b.charCodeAt(F+2)]>>2,B[S++]=w>>8&255,B[S++]=w&255),B}function d(b){return e[b>>18&63]+e[b>>12&63]+e[b>>6&63]+e[b&63]}function g(b,w,_){for(var T,M=[],B=w;B<_;B+=3)T=(b[B]<<16&16711680)+(b[B+1]<<8&65280)+(b[B+2]&255),M.push(d(T));return M.join("")}function m(b){for(var w,_=b.length,T=_%3,M=[],B=16383,S=0,j=_-T;S<j;S+=B)M.push(g(b,S,S+B>j?j:S+B));return T===1?(w=b[_-1],M.push(e[w>>2]+e[w<<4&63]+"==")):T===2&&(w=(b[_-2]<<8)+b[_-1],M.push(e[w>>10]+e[w>>4&63]+e[w<<2&63]+"=")),M.join("")}return rr}function gl(){return wi?fr:(wi=!0,fr.read=function(e,n,t,h,f){var a,i,o=f*8-h-1,l=(1<<o)-1,u=l>>1,d=-7,g=t?f-1:0,m=t?-1:1,b=e[n+g];for(g+=m,a=b&(1<<-d)-1,b>>=-d,d+=o;d>0;a=a*256+e[n+g],g+=m,d-=8);for(i=a&(1<<-d)-1,a>>=-d,d+=h;d>0;i=i*256+e[n+g],g+=m,d-=8);if(a===0)a=1-u;else{if(a===l)return i?NaN:(b?-1:1)*(1/0);i=i+Math.pow(2,h),a=a-u}return(b?-1:1)*i*Math.pow(2,a-h)},fr.write=function(e,n,t,h,f,a){var i,o,l,u=a*8-f-1,d=(1<<u)-1,g=d>>1,m=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=h?0:a-1,w=h?1:-1,_=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(o=isNaN(n)?1:0,i=d):(i=Math.floor(Math.log(n)/Math.LN2),n*(l=Math.pow(2,-i))<1&&(i--,l*=2),i+g>=1?n+=m/l:n+=m*Math.pow(2,1-g),n*l>=2&&(i++,l/=2),i+g>=d?(o=0,i=d):i+g>=1?(o=(n*l-1)*Math.pow(2,f),i=i+g):(o=n*Math.pow(2,g-1)*Math.pow(2,f),i=0));f>=8;e[t+b]=o&255,b+=w,o/=256,f-=8);for(i=i<<f|o,u+=f;u>0;e[t+b]=i&255,b+=w,i/=256,u-=8);e[t+b-w]|=_*128},fr)}function ml(){if(vi)return Ot;vi=!0;let e=dl(),n=gl(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ot.Buffer=i,Ot.SlowBuffer=M,Ot.INSPECT_MAX_BYTES=50;let h=2147483647;Ot.kMaxLength=h,i.TYPED_ARRAY_SUPPORT=f(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{let p=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(p,s),p.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function a(p){if(p>h)throw new RangeError('The value "'+p+'" is invalid for option "size"');let s=new Uint8Array(p);return Object.setPrototypeOf(s,i.prototype),s}function i(p,s,r){if(typeof p=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(p)}return o(p,s,r)}i.poolSize=8192;function o(p,s,r){if(typeof p=="string")return g(p,s);if(ArrayBuffer.isView(p))return b(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(K(p,ArrayBuffer)||p&&K(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(K(p,SharedArrayBuffer)||p&&K(p.buffer,SharedArrayBuffer)))return w(p,s,r);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let c=p.valueOf&&p.valueOf();if(c!=null&&c!==p)return i.from(c,s,r);let y=_(p);if(y)return y;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return i.from(p[Symbol.toPrimitive]("string"),s,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}i.from=function(p,s,r){return o(p,s,r)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function l(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function u(p,s,r){return l(p),p<=0?a(p):s!==void 0?typeof r=="string"?a(p).fill(s,r):a(p).fill(s):a(p)}i.alloc=function(p,s,r){return u(p,s,r)};function d(p){return l(p),a(p<0?0:T(p)|0)}i.allocUnsafe=function(p){return d(p)},i.allocUnsafeSlow=function(p){return d(p)};function g(p,s){if((typeof s!="string"||s==="")&&(s="utf8"),!i.isEncoding(s))throw new TypeError("Unknown encoding: "+s);let r=B(p,s)|0,c=a(r),y=c.write(p,s);return y!==r&&(c=c.slice(0,y)),c}function m(p){let s=p.length<0?0:T(p.length)|0,r=a(s);for(let c=0;c<s;c+=1)r[c]=p[c]&255;return r}function b(p){if(K(p,Uint8Array)){let s=new Uint8Array(p);return w(s.buffer,s.byteOffset,s.byteLength)}return m(p)}function w(p,s,r){if(s<0||p.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<s+(r||0))throw new RangeError('"length" is outside of buffer bounds');let c;return s===void 0&&r===void 0?c=new Uint8Array(p):r===void 0?c=new Uint8Array(p,s):c=new Uint8Array(p,s,r),Object.setPrototypeOf(c,i.prototype),c}function _(p){if(i.isBuffer(p)){let s=T(p.length)|0,r=a(s);return r.length===0||p.copy(r,0,0,s),r}if(p.length!==void 0)return typeof p.length!="number"||x(p.length)?a(0):m(p);if(p.type==="Buffer"&&Array.isArray(p.data))return m(p.data)}function T(p){if(p>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return p|0}function M(p){return+p!=p&&(p=0),i.alloc(+p)}i.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==i.prototype},i.compare=function(p,s){if(K(p,Uint8Array)&&(p=i.from(p,p.offset,p.byteLength)),K(s,Uint8Array)&&(s=i.from(s,s.offset,s.byteLength)),!i.isBuffer(p)||!i.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===s)return 0;let r=p.length,c=s.length;for(let y=0,v=Math.min(r,c);y<v;++y)if(p[y]!==s[y]){r=p[y],c=s[y];break}return r<c?-1:c<r?1:0},i.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(p,s){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return i.alloc(0);let r;if(s===void 0)for(s=0,r=0;r<p.length;++r)s+=p[r].length;let c=i.allocUnsafe(s),y=0;for(r=0;r<p.length;++r){let v=p[r];if(K(v,Uint8Array))y+v.length>c.length?(i.isBuffer(v)||(v=i.from(v)),v.copy(c,y)):Uint8Array.prototype.set.call(c,v,y);else if(i.isBuffer(v))v.copy(c,y);else throw new TypeError('"list" argument must be an Array of Buffers');y+=v.length}return c};function B(p,s){if(i.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||K(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);let r=p.length,c=arguments.length>2&&arguments[2]===!0;if(!c&&r===0)return 0;let y=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return W(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Z(p).length;default:if(y)return c?-1:W(p).length;s=(""+s).toLowerCase(),y=!0}}i.byteLength=B;function S(p,s,r){let c=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,s>>>=0,r<=s))return"";for(p||(p="utf8");;)switch(p){case"hex":return V(this,s,r);case"utf8":case"utf-8":return z(this,s,r);case"ascii":return ye(this,s,r);case"latin1":case"binary":return ae(this,s,r);case"base64":return I(this,s,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,s,r);default:if(c)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),c=!0}}i.prototype._isBuffer=!0;function j(p,s,r){let c=p[s];p[s]=p[r],p[r]=c}i.prototype.swap16=function(){let p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let s=0;s<p;s+=2)j(this,s,s+1);return this},i.prototype.swap32=function(){let p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let s=0;s<p;s+=4)j(this,s,s+3),j(this,s+1,s+2);return this},i.prototype.swap64=function(){let p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let s=0;s<p;s+=8)j(this,s,s+7),j(this,s+1,s+6),j(this,s+2,s+5),j(this,s+3,s+4);return this},i.prototype.toString=function(){let p=this.length;return p===0?"":arguments.length===0?z(this,0,p):S.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(p){if(!i.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:i.compare(this,p)===0},i.prototype.inspect=function(){let p="",s=Ot.INSPECT_MAX_BYTES;return p=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(p+=" ... "),"<Buffer "+p+">"},t&&(i.prototype[t]=i.prototype.inspect),i.prototype.compare=function(p,s,r,c,y){if(K(p,Uint8Array)&&(p=i.from(p,p.offset,p.byteLength)),!i.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(s===void 0&&(s=0),r===void 0&&(r=p?p.length:0),c===void 0&&(c=0),y===void 0&&(y=this.length),s<0||r>p.length||c<0||y>this.length)throw new RangeError("out of range index");if(c>=y&&s>=r)return 0;if(c>=y)return-1;if(s>=r)return 1;if(s>>>=0,r>>>=0,c>>>=0,y>>>=0,this===p)return 0;let v=y-c,k=r-s,Y=Math.min(v,k),_e=this.slice(c,y),Te=p.slice(s,r);for(let Se=0;Se<Y;++Se)if(_e[Se]!==Te[Se]){v=_e[Se],k=Te[Se];break}return v<k?-1:k<v?1:0};function F(p,s,r,c,y){if(p.length===0)return-1;if(typeof r=="string"?(c=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,x(r)&&(r=y?0:p.length-1),r<0&&(r=p.length+r),r>=p.length){if(y)return-1;r=p.length-1}else if(r<0)if(y)r=0;else return-1;if(typeof s=="string"&&(s=i.from(s,c)),i.isBuffer(s))return s.length===0?-1:R(p,s,r,c,y);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?y?Uint8Array.prototype.indexOf.call(p,s,r):Uint8Array.prototype.lastIndexOf.call(p,s,r):R(p,[s],r,c,y);throw new TypeError("val must be string, number or Buffer")}function R(p,s,r,c,y){let v=1,k=p.length,Y=s.length;if(c!==void 0&&(c=String(c).toLowerCase(),c==="ucs2"||c==="ucs-2"||c==="utf16le"||c==="utf-16le")){if(p.length<2||s.length<2)return-1;v=2,k/=2,Y/=2,r/=2}function _e(Se,Ie){return v===1?Se[Ie]:Se.readUInt16BE(Ie*v)}let Te;if(y){let Se=-1;for(Te=r;Te<k;Te++)if(_e(p,Te)===_e(s,Se===-1?0:Te-Se)){if(Se===-1&&(Se=Te),Te-Se+1===Y)return Se*v}else Se!==-1&&(Te-=Te-Se),Se=-1}else for(r+Y>k&&(r=k-Y),Te=r;Te>=0;Te--){let Se=!0;for(let Ie=0;Ie<Y;Ie++)if(_e(p,Te+Ie)!==_e(s,Ie)){Se=!1;break}if(Se)return Te}return-1}i.prototype.includes=function(p,s,r){return this.indexOf(p,s,r)!==-1},i.prototype.indexOf=function(p,s,r){return F(this,p,s,r,!0)},i.prototype.lastIndexOf=function(p,s,r){return F(this,p,s,r,!1)};function C(p,s,r,c){r=Number(r)||0;let y=p.length-r;c?(c=Number(c),c>y&&(c=y)):c=y;let v=s.length;c>v/2&&(c=v/2);let k;for(k=0;k<c;++k){let Y=parseInt(s.substr(k*2,2),16);if(x(Y))return k;p[r+k]=Y}return k}function L(p,s,r,c){return N(W(s,p.length-r),p,r,c)}function q(p,s,r,c){return N($(s),p,r,c)}function X(p,s,r,c){return N(Z(s),p,r,c)}function ne(p,s,r,c){return N(oe(s,p.length-r),p,r,c)}i.prototype.write=function(p,s,r,c){if(s===void 0)c="utf8",r=this.length,s=0;else if(r===void 0&&typeof s=="string")c=s,r=this.length,s=0;else if(isFinite(s))s=s>>>0,isFinite(r)?(r=r>>>0,c===void 0&&(c="utf8")):(c=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let y=this.length-s;if((r===void 0||r>y)&&(r=y),p.length>0&&(r<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");c||(c="utf8");let v=!1;for(;;)switch(c){case"hex":return C(this,p,s,r);case"utf8":case"utf-8":return L(this,p,s,r);case"ascii":case"latin1":case"binary":return q(this,p,s,r);case"base64":return X(this,p,s,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,p,s,r);default:if(v)throw new TypeError("Unknown encoding: "+c);c=(""+c).toLowerCase(),v=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function I(p,s,r){return s===0&&r===p.length?e.fromByteArray(p):e.fromByteArray(p.slice(s,r))}function z(p,s,r){r=Math.min(p.length,r);let c=[],y=s;for(;y<r;){let v=p[y],k=null,Y=v>239?4:v>223?3:v>191?2:1;if(y+Y<=r){let _e,Te,Se,Ie;switch(Y){case 1:v<128&&(k=v);break;case 2:_e=p[y+1],(_e&192)===128&&(Ie=(v&31)<<6|_e&63,Ie>127&&(k=Ie));break;case 3:_e=p[y+1],Te=p[y+2],(_e&192)===128&&(Te&192)===128&&(Ie=(v&15)<<12|(_e&63)<<6|Te&63,Ie>2047&&(Ie<55296||Ie>57343)&&(k=Ie));break;case 4:_e=p[y+1],Te=p[y+2],Se=p[y+3],(_e&192)===128&&(Te&192)===128&&(Se&192)===128&&(Ie=(v&15)<<18|(_e&63)<<12|(Te&63)<<6|Se&63,Ie>65535&&Ie<1114112&&(k=Ie))}}k===null?(k=65533,Y=1):k>65535&&(k-=65536,c.push(k>>>10&1023|55296),k=56320|k&1023),c.push(k),y+=Y}return Q(c)}let te=4096;function Q(p){let s=p.length;if(s<=te)return String.fromCharCode.apply(String,p);let r="",c=0;for(;c<s;)r+=String.fromCharCode.apply(String,p.slice(c,c+=te));return r}function ye(p,s,r){let c="";r=Math.min(p.length,r);for(let y=s;y<r;++y)c+=String.fromCharCode(p[y]&127);return c}function ae(p,s,r){let c="";r=Math.min(p.length,r);for(let y=s;y<r;++y)c+=String.fromCharCode(p[y]);return c}function V(p,s,r){let c=p.length;(!s||s<0)&&(s=0),(!r||r<0||r>c)&&(r=c);let y="";for(let v=s;v<r;++v)y+=D[p[v]];return y}function we(p,s,r){let c=p.slice(s,r),y="";for(let v=0;v<c.length-1;v+=2)y+=String.fromCharCode(c[v]+c[v+1]*256);return y}i.prototype.slice=function(p,s){let r=this.length;p=~~p,s=s===void 0?r:~~s,p<0?(p+=r,p<0&&(p=0)):p>r&&(p=r),s<0?(s+=r,s<0&&(s=0)):s>r&&(s=r),s<p&&(s=p);let c=this.subarray(p,s);return Object.setPrototypeOf(c,i.prototype),c};function se(p,s,r){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+s>r)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(p,s,r){p=p>>>0,s=s>>>0,r||se(p,s,this.length);let c=this[p],y=1,v=0;for(;++v<s&&(y*=256);)c+=this[p+v]*y;return c},i.prototype.readUintBE=i.prototype.readUIntBE=function(p,s,r){p=p>>>0,s=s>>>0,r||se(p,s,this.length);let c=this[p+--s],y=1;for(;s>0&&(y*=256);)c+=this[p+--s]*y;return c},i.prototype.readUint8=i.prototype.readUInt8=function(p,s){return p=p>>>0,s||se(p,1,this.length),this[p]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(p,s){return p=p>>>0,s||se(p,2,this.length),this[p]|this[p+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(p,s){return p=p>>>0,s||se(p,2,this.length),this[p]<<8|this[p+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(p,s){return p=p>>>0,s||se(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(p,s){return p=p>>>0,s||se(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},i.prototype.readBigUInt64LE=H(function(p){p=p>>>0,ee(p,"offset");let s=this[p],r=this[p+7];(s===void 0||r===void 0)&&me(p,this.length-8);let c=s+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,y=this[++p]+this[++p]*2**8+this[++p]*2**16+r*2**24;return BigInt(c)+(BigInt(y)<<BigInt(32))}),i.prototype.readBigUInt64BE=H(function(p){p=p>>>0,ee(p,"offset");let s=this[p],r=this[p+7];(s===void 0||r===void 0)&&me(p,this.length-8);let c=s*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],y=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+r;return(BigInt(c)<<BigInt(32))+BigInt(y)}),i.prototype.readIntLE=function(p,s,r){p=p>>>0,s=s>>>0,r||se(p,s,this.length);let c=this[p],y=1,v=0;for(;++v<s&&(y*=256);)c+=this[p+v]*y;return y*=128,c>=y&&(c-=Math.pow(2,8*s)),c},i.prototype.readIntBE=function(p,s,r){p=p>>>0,s=s>>>0,r||se(p,s,this.length);let c=s,y=1,v=this[p+--c];for(;c>0&&(y*=256);)v+=this[p+--c]*y;return y*=128,v>=y&&(v-=Math.pow(2,8*s)),v},i.prototype.readInt8=function(p,s){return p=p>>>0,s||se(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},i.prototype.readInt16LE=function(p,s){p=p>>>0,s||se(p,2,this.length);let r=this[p]|this[p+1]<<8;return r&32768?r|4294901760:r},i.prototype.readInt16BE=function(p,s){p=p>>>0,s||se(p,2,this.length);let r=this[p+1]|this[p]<<8;return r&32768?r|4294901760:r},i.prototype.readInt32LE=function(p,s){return p=p>>>0,s||se(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},i.prototype.readInt32BE=function(p,s){return p=p>>>0,s||se(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},i.prototype.readBigInt64LE=H(function(p){p=p>>>0,ee(p,"offset");let s=this[p],r=this[p+7];(s===void 0||r===void 0)&&me(p,this.length-8);let c=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(r<<24);return(BigInt(c)<<BigInt(32))+BigInt(s+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),i.prototype.readBigInt64BE=H(function(p){p=p>>>0,ee(p,"offset");let s=this[p],r=this[p+7];(s===void 0||r===void 0)&&me(p,this.length-8);let c=(s<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(c)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+r)}),i.prototype.readFloatLE=function(p,s){return p=p>>>0,s||se(p,4,this.length),n.read(this,p,!0,23,4)},i.prototype.readFloatBE=function(p,s){return p=p>>>0,s||se(p,4,this.length),n.read(this,p,!1,23,4)},i.prototype.readDoubleLE=function(p,s){return p=p>>>0,s||se(p,8,this.length),n.read(this,p,!0,52,8)},i.prototype.readDoubleBE=function(p,s){return p=p>>>0,s||se(p,8,this.length),n.read(this,p,!1,52,8)};function be(p,s,r,c,y,v){if(!i.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>y||s<v)throw new RangeError('"value" argument is out of bounds');if(r+c>p.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(p,s,r,c){if(p=+p,s=s>>>0,r=r>>>0,!c){let k=Math.pow(2,8*r)-1;be(this,p,s,r,k,0)}let y=1,v=0;for(this[s]=p&255;++v<r&&(y*=256);)this[s+v]=p/y&255;return s+r},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(p,s,r,c){if(p=+p,s=s>>>0,r=r>>>0,!c){let k=Math.pow(2,8*r)-1;be(this,p,s,r,k,0)}let y=r-1,v=1;for(this[s+y]=p&255;--y>=0&&(v*=256);)this[s+y]=p/v&255;return s+r},i.prototype.writeUint8=i.prototype.writeUInt8=function(p,s,r){return p=+p,s=s>>>0,r||be(this,p,s,1,255,0),this[s]=p&255,s+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(p,s,r){return p=+p,s=s>>>0,r||be(this,p,s,2,65535,0),this[s]=p&255,this[s+1]=p>>>8,s+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(p,s,r){return p=+p,s=s>>>0,r||be(this,p,s,2,65535,0),this[s]=p>>>8,this[s+1]=p&255,s+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(p,s,r){return p=+p,s=s>>>0,r||be(this,p,s,4,4294967295,0),this[s+3]=p>>>24,this[s+2]=p>>>16,this[s+1]=p>>>8,this[s]=p&255,s+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(p,s,r){return p=+p,s=s>>>0,r||be(this,p,s,4,4294967295,0),this[s]=p>>>24,this[s+1]=p>>>16,this[s+2]=p>>>8,this[s+3]=p&255,s+4};function E(p,s,r,c,y){re(s,c,y,p,r,7);let v=Number(s&BigInt(4294967295));p[r++]=v,v=v>>8,p[r++]=v,v=v>>8,p[r++]=v,v=v>>8,p[r++]=v;let k=Number(s>>BigInt(32)&BigInt(4294967295));return p[r++]=k,k=k>>8,p[r++]=k,k=k>>8,p[r++]=k,k=k>>8,p[r++]=k,r}function J(p,s,r,c,y){re(s,c,y,p,r,7);let v=Number(s&BigInt(4294967295));p[r+7]=v,v=v>>8,p[r+6]=v,v=v>>8,p[r+5]=v,v=v>>8,p[r+4]=v;let k=Number(s>>BigInt(32)&BigInt(4294967295));return p[r+3]=k,k=k>>8,p[r+2]=k,k=k>>8,p[r+1]=k,k=k>>8,p[r]=k,r+8}i.prototype.writeBigUInt64LE=H(function(p,s=0){return E(this,p,s,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=H(function(p,s=0){return J(this,p,s,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(p,s,r,c){if(p=+p,s=s>>>0,!c){let Y=Math.pow(2,8*r-1);be(this,p,s,r,Y-1,-Y)}let y=0,v=1,k=0;for(this[s]=p&255;++y<r&&(v*=256);)p<0&&k===0&&this[s+y-1]!==0&&(k=1),this[s+y]=(p/v>>0)-k&255;return s+r},i.prototype.writeIntBE=function(p,s,r,c){if(p=+p,s=s>>>0,!c){let Y=Math.pow(2,8*r-1);be(this,p,s,r,Y-1,-Y)}let y=r-1,v=1,k=0;for(this[s+y]=p&255;--y>=0&&(v*=256);)p<0&&k===0&&this[s+y+1]!==0&&(k=1),this[s+y]=(p/v>>0)-k&255;return s+r},i.prototype.writeInt8=function(p,s,r){return p=+p,s=s>>>0,r||be(this,p,s,1,127,-128),p<0&&(p=255+p+1),this[s]=p&255,s+1},i.prototype.writeInt16LE=function(p,s,r){return p=+p,s=s>>>0,r||be(this,p,s,2,32767,-32768),this[s]=p&255,this[s+1]=p>>>8,s+2},i.prototype.writeInt16BE=function(p,s,r){return p=+p,s=s>>>0,r||be(this,p,s,2,32767,-32768),this[s]=p>>>8,this[s+1]=p&255,s+2},i.prototype.writeInt32LE=function(p,s,r){return p=+p,s=s>>>0,r||be(this,p,s,4,2147483647,-2147483648),this[s]=p&255,this[s+1]=p>>>8,this[s+2]=p>>>16,this[s+3]=p>>>24,s+4},i.prototype.writeInt32BE=function(p,s,r){return p=+p,s=s>>>0,r||be(this,p,s,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[s]=p>>>24,this[s+1]=p>>>16,this[s+2]=p>>>8,this[s+3]=p&255,s+4},i.prototype.writeBigInt64LE=H(function(p,s=0){return E(this,p,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=H(function(p,s=0){return J(this,p,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function de(p,s,r,c,y,v){if(r+c>p.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Ee(p,s,r,c,y){return s=+s,r=r>>>0,y||de(p,s,r,4),n.write(p,s,r,c,23,4),r+4}i.prototype.writeFloatLE=function(p,s,r){return Ee(this,p,s,!0,r)},i.prototype.writeFloatBE=function(p,s,r){return Ee(this,p,s,!1,r)};function le(p,s,r,c,y){return s=+s,r=r>>>0,y||de(p,s,r,8),n.write(p,s,r,c,52,8),r+8}i.prototype.writeDoubleLE=function(p,s,r){return le(this,p,s,!0,r)},i.prototype.writeDoubleBE=function(p,s,r){return le(this,p,s,!1,r)},i.prototype.copy=function(p,s,r,c){if(!i.isBuffer(p))throw new TypeError("argument should be a Buffer");if(r||(r=0),!c&&c!==0&&(c=this.length),s>=p.length&&(s=p.length),s||(s=0),c>0&&c<r&&(c=r),c===r||p.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("sourceEnd out of bounds");c>this.length&&(c=this.length),p.length-s<c-r&&(c=p.length-s+r);let y=c-r;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(s,r,c):Uint8Array.prototype.set.call(p,this.subarray(r,c),s),y},i.prototype.fill=function(p,s,r,c){if(typeof p=="string"){if(typeof s=="string"?(c=s,s=0,r=this.length):typeof r=="string"&&(c=r,r=this.length),c!==void 0&&typeof c!="string")throw new TypeError("encoding must be a string");if(typeof c=="string"&&!i.isEncoding(c))throw new TypeError("Unknown encoding: "+c);if(p.length===1){let v=p.charCodeAt(0);(c==="utf8"&&v<128||c==="latin1")&&(p=v)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(s<0||this.length<s||this.length<r)throw new RangeError("Out of range index");if(r<=s)return this;s=s>>>0,r=r===void 0?this.length:r>>>0,p||(p=0);let y;if(typeof p=="number")for(y=s;y<r;++y)this[y]=p;else{let v=i.isBuffer(p)?p:i.from(p,c),k=v.length;if(k===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(y=0;y<r-s;++y)this[y+s]=v[y%k]}return this};let P={};function A(p,s,r){P[p]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(c){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:c,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}A("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),A("ERR_INVALID_ARG_TYPE",function(p,s){return`The "${p}" argument must be of type number. Received type ${typeof s}`},TypeError),A("ERR_OUT_OF_RANGE",function(p,s,r){let c=`The value of "${p}" is out of range.`,y=r;return Number.isInteger(r)&&Math.abs(r)>2**32?y=G(String(r)):typeof r=="bigint"&&(y=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(y=G(y)),y+="n"),c+=` It must be ${s}. Received ${y}`,c},RangeError);function G(p){let s="",r=p.length,c=p[0]==="-"?1:0;for(;r>=c+4;r-=3)s=`_${p.slice(r-3,r)}${s}`;return`${p.slice(0,r)}${s}`}function ue(p,s,r){ee(s,"offset"),(p[s]===void 0||p[s+r]===void 0)&&me(s,p.length-(r+1))}function re(p,s,r,c,y,v){if(p>r||p<s){let k=typeof s=="bigint"?"n":"",Y;throw s===0||s===BigInt(0)?Y=`>= 0${k} and < 2${k} ** ${(v+1)*8}${k}`:Y=`>= -(2${k} ** ${(v+1)*8-1}${k}) and < 2 ** ${(v+1)*8-1}${k}`,new P.ERR_OUT_OF_RANGE("value",Y,p)}ue(c,y,v)}function ee(p,s){if(typeof p!="number")throw new P.ERR_INVALID_ARG_TYPE(s,"number",p)}function me(p,s,r){throw Math.floor(p)!==p?(ee(p,r),new P.ERR_OUT_OF_RANGE("offset","an integer",p)):s<0?new P.ERR_BUFFER_OUT_OF_BOUNDS:new P.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${s}`,p)}let he=/[^+/0-9A-Za-z-_]/g;function O(p){if(p=p.split("=")[0],p=p.trim().replace(he,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function W(p,s){s=s||1/0;let r,c=p.length,y=null,v=[];for(let k=0;k<c;++k){if(r=p.charCodeAt(k),r>55295&&r<57344){if(!y){if(r>56319){(s-=3)>-1&&v.push(239,191,189);continue}else if(k+1===c){(s-=3)>-1&&v.push(239,191,189);continue}y=r;continue}if(r<56320){(s-=3)>-1&&v.push(239,191,189),y=r;continue}r=(y-55296<<10|r-56320)+65536}else y&&(s-=3)>-1&&v.push(239,191,189);if(y=null,r<128){if((s-=1)<0)break;v.push(r)}else if(r<2048){if((s-=2)<0)break;v.push(r>>6|192,r&63|128)}else if(r<65536){if((s-=3)<0)break;v.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((s-=4)<0)break;v.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return v}function $(p){let s=[];for(let r=0;r<p.length;++r)s.push(p.charCodeAt(r)&255);return s}function oe(p,s){let r,c,y,v=[];for(let k=0;k<p.length&&!((s-=2)<0);++k)r=p.charCodeAt(k),c=r>>8,y=r%256,v.push(y),v.push(c);return v}function Z(p){return e.toByteArray(O(p))}function N(p,s,r,c){let y;for(y=0;y<c&&!(y+r>=s.length||y>=p.length);++y)s[y+r]=p[y];return y}function K(p,s){return p instanceof s||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===s.name}function x(p){return p!==p}let D=function(){let p="0123456789abcdef",s=new Array(256);for(let r=0;r<16;++r){let c=r*16;for(let y=0;y<16;++y)s[c+y]=p[r]+p[y]}return s}();function H(p){return typeof BigInt>"u"?ie:p}function ie(){throw new Error("BigInt not supported")}return Ot}var rr,bi,fr,wi,Ot,vi,wt,Mr,cs,fs,Je=Ge(()=>{ce(),pe(),fe(),rr={},bi=!1,fr={},wi=!1,Ot={},vi=!1,wt=ml(),wt.Buffer,wt.SlowBuffer,wt.INSPECT_MAX_BYTES,wt.kMaxLength,Mr=wt.Buffer,cs=wt.INSPECT_MAX_BYTES,fs=wt.kMaxLength}),pe=Ge(()=>{Je()}),yl=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var n=class{constructor(t){this.aliasToTopic={},this.max=t}put(t,h){return h===0||h>this.max?!1:(this.aliasToTopic[h]=t,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(t){return this.aliasToTopic[t]}clear(){this.aliasToTopic={}}};e.default=n}),qe=ve((e,n)=>{ce(),pe(),fe(),n.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,h){return t.includes(h)},ArrayPrototypeIndexOf(t,h){return t.indexOf(h)},ArrayPrototypeJoin(t,h){return t.join(h)},ArrayPrototypeMap(t,h){return t.map(h)},ArrayPrototypePop(t,h){return t.pop(h)},ArrayPrototypePush(t,h){return t.push(h)},ArrayPrototypeSlice(t,h,f){return t.slice(h,f)},Error,FunctionPrototypeCall(t,h,...f){return t.call(h,...f)},FunctionPrototypeSymbolHasInstance(t,h){return Function.prototype[Symbol.hasInstance].call(t,h)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,h){return Object.defineProperties(t,h)},ObjectDefineProperty(t,h,f){return Object.defineProperty(t,h,f)},ObjectGetOwnPropertyDescriptor(t,h){return Object.getOwnPropertyDescriptor(t,h)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,h){return Object.setPrototypeOf(t,h)},Promise,PromisePrototypeCatch(t,h){return t.catch(h)},PromisePrototypeThen(t,h,f){return t.then(h,f)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,h){return t.test(h)},SafeSet:Set,String,StringPrototypeSlice(t,h,f){return t.slice(h,f)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,h,f){return t.set(h,f)},Uint8Array}}),It=ve((e,n)=>{ce(),pe(),fe();var t=(Je(),Le(Qe)),h=Object.getPrototypeOf(async function(){}).constructor,f=globalThis.Blob||t.Blob,a=typeof f<"u"?function(o){return o instanceof f}:function(o){return!1},i=class extends Error{constructor(o){if(!Array.isArray(o))throw new TypeError(`Expected input to be an Array, got ${typeof o}`);let l="";for(let u=0;u<o.length;u++)l+=`    ${o[u].stack}
`;super(l),this.name="AggregateError",this.errors=o}};n.exports={AggregateError:i,kEmptyObject:Object.freeze({}),once(o){let l=!1;return function(...u){l||(l=!0,o.apply(this,u))}},createDeferredPromise:function(){let o,l;return{promise:new Promise((u,d)=>{o=u,l=d}),resolve:o,reject:l}},promisify(o){return new Promise((l,u)=>{o((d,...g)=>d?u(d):l(...g))})},debuglog(){return function(){}},format(o,...l){return o.replace(/%([sdifj])/g,function(...[u,d]){let g=l.shift();return d==="f"?g.toFixed(6):d==="j"?JSON.stringify(g):d==="s"&&typeof g=="object"?`${g.constructor!==Object?g.constructor.name:""} {}`.trim():g.toString()})},inspect(o){switch(typeof o){case"string":if(o.includes("'"))if(o.includes('"')){if(!o.includes("`")&&!o.includes("${"))return`\`${o}\``}else return`"${o}"`;return`'${o}'`;case"number":return isNaN(o)?"NaN":Object.is(o,-0)?String(o):o;case"bigint":return`${String(o)}n`;case"boolean":case"undefined":return String(o);case"object":return"{}"}},types:{isAsyncFunction(o){return o instanceof h},isArrayBufferView(o){return ArrayBuffer.isView(o)}},isBlob:a},n.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),$i=ve((e,n)=>{ce(),pe(),fe();var{AbortController:t,AbortSignal:h}=typeof self<"u"?self:typeof window<"u"?window:void 0;n.exports=t,n.exports.AbortSignal=h,n.exports.default=t}),tt=ve((e,n)=>{ce(),pe(),fe();var{format:t,inspect:h,AggregateError:f}=It(),a=globalThis.AggregateError||f,i=Symbol("kIsNodeError"),o=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,u="__node_internal_",d={};function g(B,S){if(!B)throw new d.ERR_INTERNAL_ASSERTION(S)}function m(B){let S="",j=B.length,F=B[0]==="-"?1:0;for(;j>=F+4;j-=3)S=`_${B.slice(j-3,j)}${S}`;return`${B.slice(0,j)}${S}`}function b(B,S,j){if(typeof S=="function")return g(S.length<=j.length,`Code: ${B}; The provided arguments length (${j.length}) does not match the required ones (${S.length}).`),S(...j);let F=(S.match(/%[dfijoOs]/g)||[]).length;return g(F===j.length,`Code: ${B}; The provided arguments length (${j.length}) does not match the required ones (${F}).`),j.length===0?S:t(S,...j)}function w(B,S,j){j||(j=Error);class F extends j{constructor(...C){super(b(B,S,C))}toString(){return`${this.name} [${B}]: ${this.message}`}}Object.defineProperties(F.prototype,{name:{value:j.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${B}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),F.prototype.code=B,F.prototype[i]=!0,d[B]=F}function _(B){let S=u+B.name;return Object.defineProperty(B,"name",{value:S}),B}function T(B,S){if(B&&S&&B!==S){if(Array.isArray(S.errors))return S.errors.push(B),S;let j=new a([S,B],S.message);return j.code=S.code,j}return B||S}var M=class extends Error{constructor(B="The operation was aborted",S=void 0){if(S!==void 0&&typeof S!="object")throw new d.ERR_INVALID_ARG_TYPE("options","Object",S);super(B,S),this.code="ABORT_ERR",this.name="AbortError"}};w("ERR_ASSERTION","%s",Error),w("ERR_INVALID_ARG_TYPE",(B,S,j)=>{g(typeof B=="string","'name' must be a string"),Array.isArray(S)||(S=[S]);let F="The ";B.endsWith(" argument")?F+=`${B} `:F+=`"${B}" ${B.includes(".")?"property":"argument"} `,F+="must be ";let R=[],C=[],L=[];for(let X of S)g(typeof X=="string","All expected entries have to be of type string"),o.includes(X)?R.push(X.toLowerCase()):l.test(X)?C.push(X):(g(X!=="object",'The value "object" should be written as "Object"'),L.push(X));if(C.length>0){let X=R.indexOf("object");X!==-1&&(R.splice(R,X,1),C.push("Object"))}if(R.length>0){switch(R.length){case 1:F+=`of type ${R[0]}`;break;case 2:F+=`one of type ${R[0]} or ${R[1]}`;break;default:{let X=R.pop();F+=`one of type ${R.join(", ")}, or ${X}`}}(C.length>0||L.length>0)&&(F+=" or ")}if(C.length>0){switch(C.length){case 1:F+=`an instance of ${C[0]}`;break;case 2:F+=`an instance of ${C[0]} or ${C[1]}`;break;default:{let X=C.pop();F+=`an instance of ${C.join(", ")}, or ${X}`}}L.length>0&&(F+=" or ")}switch(L.length){case 0:break;case 1:L[0].toLowerCase()!==L[0]&&(F+="an "),F+=`${L[0]}`;break;case 2:F+=`one of ${L[0]} or ${L[1]}`;break;default:{let X=L.pop();F+=`one of ${L.join(", ")}, or ${X}`}}if(j==null)F+=`. Received ${j}`;else if(typeof j=="function"&&j.name)F+=`. Received function ${j.name}`;else if(typeof j=="object"){var q;if((q=j.constructor)!==null&&q!==void 0&&q.name)F+=`. Received an instance of ${j.constructor.name}`;else{let X=h(j,{depth:-1});F+=`. Received ${X}`}}else{let X=h(j,{colors:!1});X.length>25&&(X=`${X.slice(0,25)}...`),F+=`. Received type ${typeof j} (${X})`}return F},TypeError),w("ERR_INVALID_ARG_VALUE",(B,S,j="is invalid")=>{let F=h(S);return F.length>128&&(F=F.slice(0,128)+"..."),`The ${B.includes(".")?"property":"argument"} '${B}' ${j}. Received ${F}`},TypeError),w("ERR_INVALID_RETURN_VALUE",(B,S,j)=>{var F;let R=j!=null&&(F=j.constructor)!==null&&F!==void 0&&F.name?`instance of ${j.constructor.name}`:`type ${typeof j}`;return`Expected ${B} to be returned from the "${S}" function but got ${R}.`},TypeError),w("ERR_MISSING_ARGS",(...B)=>{g(B.length>0,"At least one arg needs to be specified");let S,j=B.length;switch(B=(Array.isArray(B)?B:[B]).map(F=>`"${F}"`).join(" or "),j){case 1:S+=`The ${B[0]} argument`;break;case 2:S+=`The ${B[0]} and ${B[1]} arguments`;break;default:{let F=B.pop();S+=`The ${B.join(", ")}, and ${F} arguments`}break}return`${S} must be specified`},TypeError),w("ERR_OUT_OF_RANGE",(B,S,j)=>{g(S,'Missing "range" argument');let F;return Number.isInteger(j)&&Math.abs(j)>2**32?F=m(String(j)):typeof j=="bigint"?(F=String(j),(j>2n**32n||j<-(2n**32n))&&(F=m(F)),F+="n"):F=h(j),`The value of "${B}" is out of range. It must be ${S}. Received ${F}`},RangeError),w("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),w("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),w("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),w("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),w("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),w("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),w("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),w("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),w("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),w("ERR_STREAM_WRITE_AFTER_END","write after end",Error),w("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),n.exports={AbortError:M,aggregateTwoErrors:_(T),hideStackFrames:_,codes:d}}),Vr=ve((e,n)=>{ce(),pe(),fe();var{ArrayIsArray:t,ArrayPrototypeIncludes:h,ArrayPrototypeJoin:f,ArrayPrototypeMap:a,NumberIsInteger:i,NumberIsNaN:o,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:u,NumberParseInt:d,ObjectPrototypeHasOwnProperty:g,RegExpPrototypeExec:m,String:b,StringPrototypeToUpperCase:w,StringPrototypeTrim:_}=qe(),{hideStackFrames:T,codes:{ERR_SOCKET_BAD_PORT:M,ERR_INVALID_ARG_TYPE:B,ERR_INVALID_ARG_VALUE:S,ERR_OUT_OF_RANGE:j,ERR_UNKNOWN_SIGNAL:F}}=tt(),{normalizeEncoding:R}=It(),{isAsyncFunction:C,isArrayBufferView:L}=It().types,q={};function X(N){return N===(N|0)}function ne(N){return N===N>>>0}var I=/^[0-7]+$/,z="must be a 32-bit unsigned integer or an octal string";function te(N,K,x){if(typeof N>"u"&&(N=x),typeof N=="string"){if(m(I,N)===null)throw new S(K,N,z);N=d(N,8)}return ae(N,K),N}var Q=T((N,K,x=u,D=l)=>{if(typeof N!="number")throw new B(K,"number",N);if(!i(N))throw new j(K,"an integer",N);if(N<x||N>D)throw new j(K,`>= ${x} && <= ${D}`,N)}),ye=T((N,K,x=-2147483648,D=2147483647)=>{if(typeof N!="number")throw new B(K,"number",N);if(!i(N))throw new j(K,"an integer",N);if(N<x||N>D)throw new j(K,`>= ${x} && <= ${D}`,N)}),ae=T((N,K,x=!1)=>{if(typeof N!="number")throw new B(K,"number",N);if(!i(N))throw new j(K,"an integer",N);let D=x?1:0,H=4294967295;if(N<D||N>H)throw new j(K,`>= ${D} && <= ${H}`,N)});function V(N,K){if(typeof N!="string")throw new B(K,"string",N)}function we(N,K,x=void 0,D){if(typeof N!="number")throw new B(K,"number",N);if(x!=null&&N<x||D!=null&&N>D||(x!=null||D!=null)&&o(N))throw new j(K,`${x!=null?`>= ${x}`:""}${x!=null&&D!=null?" && ":""}${D!=null?`<= ${D}`:""}`,N)}var se=T((N,K,x)=>{if(!h(x,N)){let D="must be one of: "+f(a(x,H=>typeof H=="string"?`'${H}'`:b(H)),", ");throw new S(K,N,D)}});function be(N,K){if(typeof N!="boolean")throw new B(K,"boolean",N)}function E(N,K,x){return N==null||!g(N,K)?x:N[K]}var J=T((N,K,x=null)=>{let D=E(x,"allowArray",!1),H=E(x,"allowFunction",!1);if(!E(x,"nullable",!1)&&N===null||!D&&t(N)||typeof N!="object"&&(!H||typeof N!="function"))throw new B(K,"Object",N)}),de=T((N,K)=>{if(N!=null&&typeof N!="object"&&typeof N!="function")throw new B(K,"a dictionary",N)}),Ee=T((N,K,x=0)=>{if(!t(N))throw new B(K,"Array",N);if(N.length<x){let D=`must be longer than ${x}`;throw new S(K,N,D)}});function le(N,K){Ee(N,K);for(let x=0;x<N.length;x++)V(N[x],`${K}[${x}]`)}function P(N,K){Ee(N,K);for(let x=0;x<N.length;x++)be(N[x],`${K}[${x}]`)}function A(N,K="signal"){if(V(N,K),q[N]===void 0)throw q[w(N)]!==void 0?new F(N+" (signals must use all capital letters)"):new F(N)}var G=T((N,K="buffer")=>{if(!L(N))throw new B(K,["Buffer","TypedArray","DataView"],N)});function ue(N,K){let x=R(K),D=N.length;if(x==="hex"&&D%2!==0)throw new S("encoding",K,`is invalid for data of length ${D}`)}function re(N,K="Port",x=!0){if(typeof N!="number"&&typeof N!="string"||typeof N=="string"&&_(N).length===0||+N!==+N>>>0||N>65535||N===0&&!x)throw new M(K,N,x);return N|0}var ee=T((N,K)=>{if(N!==void 0&&(N===null||typeof N!="object"||!("aborted"in N)))throw new B(K,"AbortSignal",N)}),me=T((N,K)=>{if(typeof N!="function")throw new B(K,"Function",N)}),he=T((N,K)=>{if(typeof N!="function"||C(N))throw new B(K,"Function",N)}),O=T((N,K)=>{if(N!==void 0)throw new B(K,"undefined",N)});function W(N,K,x){if(!h(x,N))throw new B(K,`('${f(x,"|")}')`,N)}var $=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function oe(N,K){if(typeof N>"u"||!m($,N))throw new S(K,N,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Z(N){if(typeof N=="string")return oe(N,"hints"),N;if(t(N)){let K=N.length,x="";if(K===0)return x;for(let D=0;D<K;D++){let H=N[D];oe(H,"hints"),x+=H,D!==K-1&&(x+=", ")}return x}throw new S("hints",N,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}n.exports={isInt32:X,isUint32:ne,parseFileMode:te,validateArray:Ee,validateStringArray:le,validateBooleanArray:P,validateBoolean:be,validateBuffer:G,validateDictionary:de,validateEncoding:ue,validateFunction:me,validateInt32:ye,validateInteger:Q,validateNumber:we,validateObject:J,validateOneOf:se,validatePlainFunction:he,validatePort:re,validateSignalName:A,validateString:V,validateUint32:ae,validateUndefined:O,validateUnion:W,validateAbortSignal:ee,validateLinkHeaderValue:Z}}),Jt=ve((e,n)=>{ce(),pe(),fe();var t=n.exports={},h,f;function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?h=setTimeout:h=a}catch{h=a}try{typeof clearTimeout=="function"?f=clearTimeout:f=i}catch{f=i}})();function o(M){if(h===setTimeout)return setTimeout(M,0);if((h===a||!h)&&setTimeout)return h=setTimeout,setTimeout(M,0);try{return h(M,0)}catch{try{return h.call(null,M,0)}catch{return h.call(this,M,0)}}}function l(M){if(f===clearTimeout)return clearTimeout(M);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(M);try{return f(M)}catch{try{return f.call(null,M)}catch{return f.call(this,M)}}}var u=[],d=!1,g,m=-1;function b(){!d||!g||(d=!1,g.length?u=g.concat(u):m=-1,u.length&&w())}function w(){if(!d){var M=o(b);d=!0;for(var B=u.length;B;){for(g=u,u=[];++m<B;)g&&g[m].run();m=-1,B=u.length}g=null,d=!1,l(M)}}t.nextTick=function(M){var B=new Array(arguments.length-1);if(arguments.length>1)for(var S=1;S<arguments.length;S++)B[S-1]=arguments[S];u.push(new _(M,B)),u.length===1&&!d&&o(w)};function _(M,B){this.fun=M,this.array=B}_.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function T(){}t.on=T,t.addListener=T,t.once=T,t.off=T,t.removeListener=T,t.removeAllListeners=T,t.emit=T,t.prependListener=T,t.prependOnceListener=T,t.listeners=function(M){return[]},t.binding=function(M){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(M){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}),Bt=ve((e,n)=>{ce(),pe(),fe();var{Symbol:t,SymbolAsyncIterator:h,SymbolIterator:f,SymbolFor:a}=qe(),i=t("kDestroyed"),o=t("kIsErrored"),l=t("kIsReadable"),u=t("kIsDisturbed"),d=a("nodejs.webstream.isClosedPromise"),g=a("nodejs.webstream.controllerErrorFunction");function m(E,J=!1){var de;return!!(E&&typeof E.pipe=="function"&&typeof E.on=="function"&&(!J||typeof E.pause=="function"&&typeof E.resume=="function")&&(!E._writableState||((de=E._readableState)===null||de===void 0?void 0:de.readable)!==!1)&&(!E._writableState||E._readableState))}function b(E){var J;return!!(E&&typeof E.write=="function"&&typeof E.on=="function"&&(!E._readableState||((J=E._writableState)===null||J===void 0?void 0:J.writable)!==!1))}function w(E){return!!(E&&typeof E.pipe=="function"&&E._readableState&&typeof E.on=="function"&&typeof E.write=="function")}function _(E){return E&&(E._readableState||E._writableState||typeof E.write=="function"&&typeof E.on=="function"||typeof E.pipe=="function"&&typeof E.on=="function")}function T(E){return!!(E&&!_(E)&&typeof E.pipeThrough=="function"&&typeof E.getReader=="function"&&typeof E.cancel=="function")}function M(E){return!!(E&&!_(E)&&typeof E.getWriter=="function"&&typeof E.abort=="function")}function B(E){return!!(E&&!_(E)&&typeof E.readable=="object"&&typeof E.writable=="object")}function S(E){return T(E)||M(E)||B(E)}function j(E,J){return E==null?!1:J===!0?typeof E[h]=="function":J===!1?typeof E[f]=="function":typeof E[h]=="function"||typeof E[f]=="function"}function F(E){if(!_(E))return null;let J=E._writableState,de=E._readableState,Ee=J||de;return!!(E.destroyed||E[i]||Ee!=null&&Ee.destroyed)}function R(E){if(!b(E))return null;if(E.writableEnded===!0)return!0;let J=E._writableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function C(E,J){if(!b(E))return null;if(E.writableFinished===!0)return!0;let de=E._writableState;return de!=null&&de.errored?!1:typeof(de==null?void 0:de.finished)!="boolean"?null:!!(de.finished||J===!1&&de.ended===!0&&de.length===0)}function L(E){if(!m(E))return null;if(E.readableEnded===!0)return!0;let J=E._readableState;return!J||J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function q(E,J){if(!m(E))return null;let de=E._readableState;return de!=null&&de.errored?!1:typeof(de==null?void 0:de.endEmitted)!="boolean"?null:!!(de.endEmitted||J===!1&&de.ended===!0&&de.length===0)}function X(E){return E&&E[l]!=null?E[l]:typeof(E==null?void 0:E.readable)!="boolean"?null:F(E)?!1:m(E)&&E.readable&&!q(E)}function ne(E){return typeof(E==null?void 0:E.writable)!="boolean"?null:F(E)?!1:b(E)&&E.writable&&!R(E)}function I(E,J){return _(E)?F(E)?!0:!((J==null?void 0:J.readable)!==!1&&X(E)||(J==null?void 0:J.writable)!==!1&&ne(E)):null}function z(E){var J,de;return _(E)?E.writableErrored?E.writableErrored:(J=(de=E._writableState)===null||de===void 0?void 0:de.errored)!==null&&J!==void 0?J:null:null}function te(E){var J,de;return _(E)?E.readableErrored?E.readableErrored:(J=(de=E._readableState)===null||de===void 0?void 0:de.errored)!==null&&J!==void 0?J:null:null}function Q(E){if(!_(E))return null;if(typeof E.closed=="boolean")return E.closed;let J=E._writableState,de=E._readableState;return typeof(J==null?void 0:J.closed)=="boolean"||typeof(de==null?void 0:de.closed)=="boolean"?(J==null?void 0:J.closed)||(de==null?void 0:de.closed):typeof E._closed=="boolean"&&ye(E)?E._closed:null}function ye(E){return typeof E._closed=="boolean"&&typeof E._defaultKeepAlive=="boolean"&&typeof E._removedConnection=="boolean"&&typeof E._removedContLen=="boolean"}function ae(E){return typeof E._sent100=="boolean"&&ye(E)}function V(E){var J;return typeof E._consuming=="boolean"&&typeof E._dumped=="boolean"&&((J=E.req)===null||J===void 0?void 0:J.upgradeOrConnect)===void 0}function we(E){if(!_(E))return null;let J=E._writableState,de=E._readableState,Ee=J||de;return!Ee&&ae(E)||!!(Ee&&Ee.autoDestroy&&Ee.emitClose&&Ee.closed===!1)}function se(E){var J;return!!(E&&((J=E[u])!==null&&J!==void 0?J:E.readableDidRead||E.readableAborted))}function be(E){var J,de,Ee,le,P,A,G,ue,re,ee;return!!(E&&((J=(de=(Ee=(le=(P=(A=E[o])!==null&&A!==void 0?A:E.readableErrored)!==null&&P!==void 0?P:E.writableErrored)!==null&&le!==void 0?le:(G=E._readableState)===null||G===void 0?void 0:G.errorEmitted)!==null&&Ee!==void 0?Ee:(ue=E._writableState)===null||ue===void 0?void 0:ue.errorEmitted)!==null&&de!==void 0?de:(re=E._readableState)===null||re===void 0?void 0:re.errored)!==null&&J!==void 0?J:!((ee=E._writableState)===null||ee===void 0)&&ee.errored))}n.exports={kDestroyed:i,isDisturbed:se,kIsDisturbed:u,isErrored:be,kIsErrored:o,isReadable:X,kIsReadable:l,kIsClosedPromise:d,kControllerErrorFunction:g,isClosed:Q,isDestroyed:F,isDuplexNodeStream:w,isFinished:I,isIterable:j,isReadableNodeStream:m,isReadableStream:T,isReadableEnded:L,isReadableFinished:q,isReadableErrored:te,isNodeStream:_,isWebStream:S,isWritable:ne,isWritableNodeStream:b,isWritableStream:M,isWritableEnded:R,isWritableFinished:C,isWritableErrored:z,isServerRequest:V,isServerResponse:ae,willEmitClose:we,isTransformStream:B}}),Mt=ve((e,n)=>{ce(),pe(),fe();var t=Jt(),{AbortError:h,codes:f}=tt(),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:i}=f,{kEmptyObject:o,once:l}=It(),{validateAbortSignal:u,validateFunction:d,validateObject:g,validateBoolean:m}=Vr(),{Promise:b,PromisePrototypeThen:w}=qe(),{isClosed:_,isReadable:T,isReadableNodeStream:M,isReadableStream:B,isReadableFinished:S,isReadableErrored:j,isWritable:F,isWritableNodeStream:R,isWritableStream:C,isWritableFinished:L,isWritableErrored:q,isNodeStream:X,willEmitClose:ne,kIsClosedPromise:I}=Bt();function z(V){return V.setHeader&&typeof V.abort=="function"}var te=()=>{};function Q(V,we,se){var be,E;if(arguments.length===2?(se=we,we=o):we==null?we=o:g(we,"options"),d(se,"callback"),u(we.signal,"options.signal"),se=l(se),B(V)||C(V))return ye(V,we,se);if(!X(V))throw new a("stream",["ReadableStream","WritableStream","Stream"],V);let J=(be=we.readable)!==null&&be!==void 0?be:M(V),de=(E=we.writable)!==null&&E!==void 0?E:R(V),Ee=V._writableState,le=V._readableState,P=()=>{V.writable||ue()},A=ne(V)&&M(V)===J&&R(V)===de,G=L(V,!1),ue=()=>{G=!0,V.destroyed&&(A=!1),!(A&&(!V.readable||J))&&(!J||re)&&se.call(V)},re=S(V,!1),ee=()=>{re=!0,V.destroyed&&(A=!1),!(A&&(!V.writable||de))&&(!de||G)&&se.call(V)},me=Z=>{se.call(V,Z)},he=_(V),O=()=>{he=!0;let Z=q(V)||j(V);if(Z&&typeof Z!="boolean")return se.call(V,Z);if(J&&!re&&M(V,!0)&&!S(V,!1))return se.call(V,new i);if(de&&!G&&!L(V,!1))return se.call(V,new i);se.call(V)},W=()=>{he=!0;let Z=q(V)||j(V);if(Z&&typeof Z!="boolean")return se.call(V,Z);se.call(V)},$=()=>{V.req.on("finish",ue)};z(V)?(V.on("complete",ue),A||V.on("abort",O),V.req?$():V.on("request",$)):de&&!Ee&&(V.on("end",P),V.on("close",P)),!A&&typeof V.aborted=="boolean"&&V.on("aborted",O),V.on("end",ee),V.on("finish",ue),we.error!==!1&&V.on("error",me),V.on("close",O),he?t.nextTick(O):Ee!=null&&Ee.errorEmitted||le!=null&&le.errorEmitted?A||t.nextTick(W):(!J&&(!A||T(V))&&(G||F(V)===!1)||!de&&(!A||F(V))&&(re||T(V)===!1)||le&&V.req&&V.aborted)&&t.nextTick(W);let oe=()=>{se=te,V.removeListener("aborted",O),V.removeListener("complete",ue),V.removeListener("abort",O),V.removeListener("request",$),V.req&&V.req.removeListener("finish",ue),V.removeListener("end",P),V.removeListener("close",P),V.removeListener("finish",ue),V.removeListener("end",ee),V.removeListener("error",me),V.removeListener("close",O)};if(we.signal&&!he){let Z=()=>{let N=se;oe(),N.call(V,new h(void 0,{cause:we.signal.reason}))};if(we.signal.aborted)t.nextTick(Z);else{let N=se;se=l((...K)=>{we.signal.removeEventListener("abort",Z),N.apply(V,K)}),we.signal.addEventListener("abort",Z)}}return oe}function ye(V,we,se){let be=!1,E=te;if(we.signal)if(E=()=>{be=!0,se.call(V,new h(void 0,{cause:we.signal.reason}))},we.signal.aborted)t.nextTick(E);else{let de=se;se=l((...Ee)=>{we.signal.removeEventListener("abort",E),de.apply(V,Ee)}),we.signal.addEventListener("abort",E)}let J=(...de)=>{be||t.nextTick(()=>se.apply(V,de))};return w(V[I].promise,J,J),te}function ae(V,we){var se;let be=!1;return we===null&&(we=o),(se=we)!==null&&se!==void 0&&se.cleanup&&(m(we.cleanup,"cleanup"),be=we.cleanup),new b((E,J)=>{let de=Q(V,we,Ee=>{be&&de(),Ee?J(Ee):E()})})}n.exports=Q,n.exports.finished=ae}),or=ve((e,n)=>{ce(),pe(),fe();var t=Jt(),{aggregateTwoErrors:h,codes:{ERR_MULTIPLE_CALLBACK:f},AbortError:a}=tt(),{Symbol:i}=qe(),{kDestroyed:o,isDestroyed:l,isFinished:u,isServerRequest:d}=Bt(),g=i("kDestroy"),m=i("kConstruct");function b(I,z,te){I&&(I.stack,z&&!z.errored&&(z.errored=I),te&&!te.errored&&(te.errored=I))}function w(I,z){let te=this._readableState,Q=this._writableState,ye=Q||te;return Q!=null&&Q.destroyed||te!=null&&te.destroyed?(typeof z=="function"&&z(),this):(b(I,Q,te),Q&&(Q.destroyed=!0),te&&(te.destroyed=!0),ye.constructed?_(this,I,z):this.once(g,function(ae){_(this,h(ae,I),z)}),this)}function _(I,z,te){let Q=!1;function ye(ae){if(Q)return;Q=!0;let V=I._readableState,we=I._writableState;b(ae,we,V),we&&(we.closed=!0),V&&(V.closed=!0),typeof te=="function"&&te(ae),ae?t.nextTick(T,I,ae):t.nextTick(M,I)}try{I._destroy(z||null,ye)}catch(ae){ye(ae)}}function T(I,z){B(I,z),M(I)}function M(I){let z=I._readableState,te=I._writableState;te&&(te.closeEmitted=!0),z&&(z.closeEmitted=!0),(te!=null&&te.emitClose||z!=null&&z.emitClose)&&I.emit("close")}function B(I,z){let te=I._readableState,Q=I._writableState;Q!=null&&Q.errorEmitted||te!=null&&te.errorEmitted||(Q&&(Q.errorEmitted=!0),te&&(te.errorEmitted=!0),I.emit("error",z))}function S(){let I=this._readableState,z=this._writableState;I&&(I.constructed=!0,I.closed=!1,I.closeEmitted=!1,I.destroyed=!1,I.errored=null,I.errorEmitted=!1,I.reading=!1,I.ended=I.readable===!1,I.endEmitted=I.readable===!1),z&&(z.constructed=!0,z.destroyed=!1,z.closed=!1,z.closeEmitted=!1,z.errored=null,z.errorEmitted=!1,z.finalCalled=!1,z.prefinished=!1,z.ended=z.writable===!1,z.ending=z.writable===!1,z.finished=z.writable===!1)}function j(I,z,te){let Q=I._readableState,ye=I._writableState;if(ye!=null&&ye.destroyed||Q!=null&&Q.destroyed)return this;Q!=null&&Q.autoDestroy||ye!=null&&ye.autoDestroy?I.destroy(z):z&&(z.stack,ye&&!ye.errored&&(ye.errored=z),Q&&!Q.errored&&(Q.errored=z),te?t.nextTick(B,I,z):B(I,z))}function F(I,z){if(typeof I._construct!="function")return;let te=I._readableState,Q=I._writableState;te&&(te.constructed=!1),Q&&(Q.constructed=!1),I.once(m,z),!(I.listenerCount(m)>1)&&t.nextTick(R,I)}function R(I){let z=!1;function te(Q){if(z){j(I,Q??new f);return}z=!0;let ye=I._readableState,ae=I._writableState,V=ae||ye;ye&&(ye.constructed=!0),ae&&(ae.constructed=!0),V.destroyed?I.emit(g,Q):Q?j(I,Q,!0):t.nextTick(C,I)}try{I._construct(Q=>{t.nextTick(te,Q)})}catch(Q){t.nextTick(te,Q)}}function C(I){I.emit(m)}function L(I){return(I==null?void 0:I.setHeader)&&typeof I.abort=="function"}function q(I){I.emit("close")}function X(I,z){I.emit("error",z),t.nextTick(q,I)}function ne(I,z){!I||l(I)||(!z&&!u(I)&&(z=new a),d(I)?(I.socket=null,I.destroy(z)):L(I)?I.abort():L(I.req)?I.req.abort():typeof I.destroy=="function"?I.destroy(z):typeof I.close=="function"?I.close():z?t.nextTick(X,I,z):t.nextTick(q,I),I.destroyed||(I[o]=!0))}n.exports={construct:F,destroyer:ne,destroy:w,undestroy:S,errorOrDestroy:j}});function Pe(){Pe.init.call(this)}function xr(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function ps(e){return e._maxListeners===void 0?Pe.defaultMaxListeners:e._maxListeners}function ro(e,n,t,h){var f,a,i,o;if(xr(t),(a=e._events)===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",n,t.listener?t.listener:t),a=e._events),i=a[n]),i===void 0)i=a[n]=t,++e._eventsCount;else if(typeof i=="function"?i=a[n]=h?[t,i]:[i,t]:h?i.unshift(t):i.push(t),(f=ps(e))>0&&i.length>f&&!i.warned){i.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=n,l.count=i.length,o=l,console&&console.warn&&console.warn(o)}return e}function bl(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function no(e,n,t){var h={fired:!1,wrapFn:void 0,target:e,type:n,listener:t},f=bl.bind(h);return f.listener=t,h.wrapFn=f,f}function io(e,n,t){var h=e._events;if(h===void 0)return[];var f=h[n];return f===void 0?[]:typeof f=="function"?t?[f.listener||f]:[f]:t?function(a){for(var i=new Array(a.length),o=0;o<i.length;++o)i[o]=a[o].listener||a[o];return i}(f):ds(f,f.length)}function oo(e){var n=this._events;if(n!==void 0){var t=n[e];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}function ds(e,n){for(var t=new Array(n),h=0;h<n;++h)t[h]=e[h];return t}var so,ao,Nt,en,tn,rn,it,lo=Ge(()=>{ce(),pe(),fe(),Nt=typeof Reflect=="object"?Reflect:null,en=Nt&&typeof Nt.apply=="function"?Nt.apply:function(e,n,t){return Function.prototype.apply.call(e,n,t)},ao=Nt&&typeof Nt.ownKeys=="function"?Nt.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},tn=Number.isNaN||function(e){return e!=e},so=Pe,Pe.EventEmitter=Pe,Pe.prototype._events=void 0,Pe.prototype._eventsCount=0,Pe.prototype._maxListeners=void 0,rn=10,Object.defineProperty(Pe,"defaultMaxListeners",{enumerable:!0,get:function(){return rn},set:function(e){if(typeof e!="number"||e<0||tn(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");rn=e}}),Pe.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Pe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||tn(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Pe.prototype.getMaxListeners=function(){return ps(this)},Pe.prototype.emit=function(e){for(var n=[],t=1;t<arguments.length;t++)n.push(arguments[t]);var h=e==="error",f=this._events;if(f!==void 0)h=h&&f.error===void 0;else if(!h)return!1;if(h){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var i=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw i.context=a,i}var o=f[e];if(o===void 0)return!1;if(typeof o=="function")en(o,this,n);else{var l=o.length,u=ds(o,l);for(t=0;t<l;++t)en(u[t],this,n)}return!0},Pe.prototype.addListener=function(e,n){return ro(this,e,n,!1)},Pe.prototype.on=Pe.prototype.addListener,Pe.prototype.prependListener=function(e,n){return ro(this,e,n,!0)},Pe.prototype.once=function(e,n){return xr(n),this.on(e,no(this,e,n)),this},Pe.prototype.prependOnceListener=function(e,n){return xr(n),this.prependListener(e,no(this,e,n)),this},Pe.prototype.removeListener=function(e,n){var t,h,f,a,i;if(xr(n),(h=this._events)===void 0)return this;if((t=h[e])===void 0)return this;if(t===n||t.listener===n)--this._eventsCount==0?this._events=Object.create(null):(delete h[e],h.removeListener&&this.emit("removeListener",e,t.listener||n));else if(typeof t!="function"){for(f=-1,a=t.length-1;a>=0;a--)if(t[a]===n||t[a].listener===n){i=t[a].listener,f=a;break}if(f<0)return this;f===0?t.shift():function(o,l){for(;l+1<o.length;l++)o[l]=o[l+1];o.pop()}(t,f),t.length===1&&(h[e]=t[0]),h.removeListener!==void 0&&this.emit("removeListener",e,i||n)}return this},Pe.prototype.off=Pe.prototype.removeListener,Pe.prototype.removeAllListeners=function(e){var n,t,h;if((t=this._events)===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete t[e]),this;if(arguments.length===0){var f,a=Object.keys(t);for(h=0;h<a.length;++h)(f=a[h])!=="removeListener"&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(n=t[e])=="function")this.removeListener(e,n);else if(n!==void 0)for(h=n.length-1;h>=0;h--)this.removeListener(e,n[h]);return this},Pe.prototype.listeners=function(e){return io(this,e,!0)},Pe.prototype.rawListeners=function(e){return io(this,e,!1)},Pe.listenerCount=function(e,n){return typeof e.listenerCount=="function"?e.listenerCount(n):oo.call(e,n)},Pe.prototype.listenerCount=oo,Pe.prototype.eventNames=function(){return this._eventsCount>0?ao(this._events):[]},it=so,it.EventEmitter,it.defaultMaxListeners,it.init,it.listenerCount,it.EventEmitter,it.defaultMaxListeners,it.init,it.listenerCount}),Xt={};Qt(Xt,{EventEmitter:()=>gs,default:()=>it,defaultMaxListeners:()=>ms,init:()=>ys,listenerCount:()=>bs,on:()=>ws,once:()=>vs});var gs,ms,ys,bs,ws,vs,sr=Ge(()=>{ce(),pe(),fe(),lo(),lo(),it.once=function(e,n){return new Promise((t,h)=>{function f(...i){a!==void 0&&e.removeListener("error",a),t(i)}let a;n!=="error"&&(a=i=>{e.removeListener(name,f),h(i)},e.once("error",a)),e.once(n,f)})},it.on=function(e,n){let t=[],h=[],f=null,a=!1,i={async next(){let u=t.shift();if(u)return createIterResult(u,!1);if(f){let d=Promise.reject(f);return f=null,d}return a?createIterResult(void 0,!0):new Promise((d,g)=>h.push({resolve:d,reject:g}))},async return(){e.removeListener(n,o),e.removeListener("error",l),a=!0;for(let u of h)u.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(u){f=u,e.removeListener(n,o),e.removeListener("error",l)},[Symbol.asyncIterator](){return this}};return e.on(n,o),e.on("error",l),i;function o(...u){let d=h.shift();d?d.resolve(createIterResult(u,!1)):t.push(u)}function l(u){a=!0;let d=h.shift();d?d.reject(u):f=u,i.return()}},{EventEmitter:gs,defaultMaxListeners:ms,init:ys,listenerCount:bs,on:ws,once:vs}=it}),qi=ve((e,n)=>{ce(),pe(),fe();var{ArrayIsArray:t,ObjectSetPrototypeOf:h}=qe(),{EventEmitter:f}=(sr(),Le(Xt));function a(o){f.call(this,o)}h(a.prototype,f.prototype),h(a,f),a.prototype.pipe=function(o,l){let u=this;function d(M){o.writable&&o.write(M)===!1&&u.pause&&u.pause()}u.on("data",d);function g(){u.readable&&u.resume&&u.resume()}o.on("drain",g),!o._isStdio&&(!l||l.end!==!1)&&(u.on("end",b),u.on("close",w));let m=!1;function b(){m||(m=!0,o.end())}function w(){m||(m=!0,typeof o.destroy=="function"&&o.destroy())}function _(M){T(),f.listenerCount(this,"error")===0&&this.emit("error",M)}i(u,"error",_),i(o,"error",_);function T(){u.removeListener("data",d),o.removeListener("drain",g),u.removeListener("end",b),u.removeListener("close",w),u.removeListener("error",_),o.removeListener("error",_),u.removeListener("end",T),u.removeListener("close",T),o.removeListener("close",T)}return u.on("end",T),u.on("close",T),o.on("close",T),o.emit("pipe",u),o};function i(o,l,u){if(typeof o.prependListener=="function")return o.prependListener(l,u);!o._events||!o._events[l]?o.on(l,u):t(o._events[l])?o._events[l].unshift(u):o._events[l]=[u,o._events[l]]}n.exports={Stream:a,prependListener:i}}),zr=ve((e,n)=>{ce(),pe(),fe();var{AbortError:t,codes:h}=tt(),{isNodeStream:f,isWebStream:a,kControllerErrorFunction:i}=Bt(),o=Mt(),{ERR_INVALID_ARG_TYPE:l}=h,u=(d,g)=>{if(typeof d!="object"||!("aborted"in d))throw new l(g,"AbortSignal",d)};n.exports.addAbortSignal=function(d,g){if(u(d,"signal"),!f(g)&&!a(g))throw new l("stream",["ReadableStream","WritableStream","Stream"],g);return n.exports.addAbortSignalNoValidate(d,g)},n.exports.addAbortSignalNoValidate=function(d,g){if(typeof d!="object"||!("aborted"in d))return g;let m=f(g)?()=>{g.destroy(new t(void 0,{cause:d.reason}))}:()=>{g[i](new t(void 0,{cause:d.reason}))};return d.aborted?m():(d.addEventListener("abort",m),o(g,()=>d.removeEventListener("abort",m))),g}}),wl=ve((e,n)=>{ce(),pe(),fe();var{StringPrototypeSlice:t,SymbolIterator:h,TypedArrayPrototypeSet:f,Uint8Array:a}=qe(),{Buffer:i}=(Je(),Le(Qe)),{inspect:o}=It();n.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(l){let u={data:l,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}unshift(l){let u={data:l,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}shift(){if(this.length===0)return;let l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}clear(){this.head=this.tail=null,this.length=0}join(l){if(this.length===0)return"";let u=this.head,d=""+u.data;for(;(u=u.next)!==null;)d+=l+u.data;return d}concat(l){if(this.length===0)return i.alloc(0);let u=i.allocUnsafe(l>>>0),d=this.head,g=0;for(;d;)f(u,d.data,g),g+=d.data.length,d=d.next;return u}consume(l,u){let d=this.head.data;if(l<d.length){let g=d.slice(0,l);return this.head.data=d.slice(l),g}return l===d.length?this.shift():u?this._getString(l):this._getBuffer(l)}first(){return this.head.data}*[h](){for(let l=this.head;l;l=l.next)yield l.data}_getString(l){let u="",d=this.head,g=0;do{let m=d.data;if(l>m.length)u+=m,l-=m.length;else{l===m.length?(u+=m,++g,d.next?this.head=d.next:this.head=this.tail=null):(u+=t(m,0,l),this.head=d,d.data=t(m,l));break}++g}while((d=d.next)!==null);return this.length-=g,u}_getBuffer(l){let u=i.allocUnsafe(l),d=l,g=this.head,m=0;do{let b=g.data;if(l>b.length)f(u,b,d-l),l-=b.length;else{l===b.length?(f(u,b,d-l),++m,g.next?this.head=g.next:this.head=this.tail=null):(f(u,new a(b.buffer,b.byteOffset,l),d-l),this.head=g,g.data=b.slice(l));break}++m}while((g=g.next)!==null);return this.length-=m,u}[Symbol.for("nodejs.util.inspect.custom")](l,u){return o(this,{...u,depth:0,customInspect:!1})}}}),Hi=ve((e,n)=>{ce(),pe(),fe();var{MathFloor:t,NumberIsInteger:h}=qe(),{ERR_INVALID_ARG_VALUE:f}=tt().codes;function a(l,u,d){return l.highWaterMark!=null?l.highWaterMark:u?l[d]:null}function i(l){return l?16:16*1024}function o(l,u,d,g){let m=a(u,g,d);if(m!=null){if(!h(m)||m<0){let b=g?`options.${d}`:"options.highWaterMark";throw new f(b,m)}return t(m)}return i(l.objectMode)}n.exports={getHighWaterMark:o,getDefaultHighWaterMark:i}});function uo(e){var n=e.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");return t===-1&&(t=n),[t,t===n?0:4-t%4]}function vl(e,n,t){for(var h,f,a=[],i=n;i<t;i+=3)h=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),a.push(ct[(f=h)>>18&63]+ct[f>>12&63]+ct[f>>6&63]+ct[63&f]);return a.join("")}function St(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=new Uint8Array(e);return Object.setPrototypeOf(n,ge.prototype),n}function ge(e,n,t){if(typeof e=="number"){if(typeof n=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _i(e)}return _s(e,n,t)}function _s(e,n,t){if(typeof e=="string")return function(a,i){if(typeof i=="string"&&i!==""||(i="utf8"),!ge.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var o=0|Ss(a,i),l=St(o),u=l.write(a,i);return u!==o&&(l=l.slice(0,u)),l}(e,n);if(ArrayBuffer.isView(e))return nn(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(At(e,ArrayBuffer)||e&&At(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(At(e,SharedArrayBuffer)||e&&At(e.buffer,SharedArrayBuffer)))return _l(e,n,t);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var h=e.valueOf&&e.valueOf();if(h!=null&&h!==e)return ge.from(h,n,t);var f=function(a){if(ge.isBuffer(a)){var i=0|Vi(a.length),o=St(i);return o.length===0||a.copy(o,0,0,i),o}if(a.length!==void 0)return typeof a.length!="number"||zi(a.length)?St(0):nn(a);if(a.type==="Buffer"&&Array.isArray(a.data))return nn(a.data)}(e);if(f)return f;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return ge.from(e[Symbol.toPrimitive]("string"),n,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function Es(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function _i(e){return Es(e),St(e<0?0:0|Vi(e))}function nn(e){for(var n=e.length<0?0:0|Vi(e.length),t=St(n),h=0;h<n;h+=1)t[h]=255&e[h];return t}function _l(e,n,t){if(n<0||e.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<n+(t||0))throw new RangeError('"length" is outside of buffer bounds');var h;return h=n===void 0&&t===void 0?new Uint8Array(e):t===void 0?new Uint8Array(e,n):new Uint8Array(e,n,t),Object.setPrototypeOf(h,ge.prototype),h}function Vi(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function Ss(e,n){if(ge.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||At(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var t=e.length,h=arguments.length>2&&arguments[2]===!0;if(!h&&t===0)return 0;for(var f=!1;;)switch(n){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Ei(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return ks(e).length;default:if(f)return h?-1:Ei(e).length;n=(""+n).toLowerCase(),f=!0}}function El(e,n,t){var h=!1;if((n===void 0||n<0)&&(n=0),n>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0)<=(n>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Rl(this,n,t);case"utf8":case"utf-8":return Is(this,n,t);case"ascii":return Cl(this,n,t);case"latin1":case"binary":return xl(this,n,t);case"base64":return Bl(this,n,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ol(this,n,t);default:if(h)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),h=!0}}function jt(e,n,t){var h=e[n];e[n]=e[t],e[t]=h}function ho(e,n,t,h,f){if(e.length===0)return-1;if(typeof t=="string"?(h=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),zi(t=+t)&&(t=f?0:e.length-1),t<0&&(t=e.length+t),t>=e.length){if(f)return-1;t=e.length-1}else if(t<0){if(!f)return-1;t=0}if(typeof n=="string"&&(n=ge.from(n,h)),ge.isBuffer(n))return n.length===0?-1:co(e,n,t,h,f);if(typeof n=="number")return n&=255,typeof Uint8Array.prototype.indexOf=="function"?f?Uint8Array.prototype.indexOf.call(e,n,t):Uint8Array.prototype.lastIndexOf.call(e,n,t):co(e,[n],t,h,f);throw new TypeError("val must be string, number or Buffer")}function co(e,n,t,h,f){var a,i=1,o=e.length,l=n.length;if(h!==void 0&&((h=String(h).toLowerCase())==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(e.length<2||n.length<2)return-1;i=2,o/=2,l/=2,t/=2}function u(b,w){return i===1?b[w]:b.readUInt16BE(w*i)}if(f){var d=-1;for(a=t;a<o;a++)if(u(e,a)===u(n,d===-1?0:a-d)){if(d===-1&&(d=a),a-d+1===l)return d*i}else d!==-1&&(a-=a-d),d=-1}else for(t+l>o&&(t=o-l),a=t;a>=0;a--){for(var g=!0,m=0;m<l;m++)if(u(e,a+m)!==u(n,m)){g=!1;break}if(g)return a}return-1}function Sl(e,n,t,h){t=Number(t)||0;var f=e.length-t;h?(h=Number(h))>f&&(h=f):h=f;var a=n.length;h>a/2&&(h=a/2);for(var i=0;i<h;++i){var o=parseInt(n.substr(2*i,2),16);if(zi(o))return i;e[t+i]=o}return i}function Al(e,n,t,h){return Kr(Ei(n,e.length-t),e,t,h)}function As(e,n,t,h){return Kr(function(f){for(var a=[],i=0;i<f.length;++i)a.push(255&f.charCodeAt(i));return a}(n),e,t,h)}function Il(e,n,t,h){return As(e,n,t,h)}function Tl(e,n,t,h){return Kr(ks(n),e,t,h)}function kl(e,n,t,h){return Kr(function(f,a){for(var i,o,l,u=[],d=0;d<f.length&&!((a-=2)<0);++d)i=f.charCodeAt(d),o=i>>8,l=i%256,u.push(l),u.push(o);return u}(n,e.length-t),e,t,h)}function Bl(e,n,t){return n===0&&t===e.length?Nr.fromByteArray(e):Nr.fromByteArray(e.slice(n,t))}function Is(e,n,t){t=Math.min(e.length,t);for(var h=[],f=n;f<t;){var a,i,o,l,u=e[f],d=null,g=u>239?4:u>223?3:u>191?2:1;if(f+g<=t)switch(g){case 1:u<128&&(d=u);break;case 2:(192&(a=e[f+1]))==128&&(l=(31&u)<<6|63&a)>127&&(d=l);break;case 3:a=e[f+1],i=e[f+2],(192&a)==128&&(192&i)==128&&(l=(15&u)<<12|(63&a)<<6|63&i)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:a=e[f+1],i=e[f+2],o=e[f+3],(192&a)==128&&(192&i)==128&&(192&o)==128&&(l=(15&u)<<18|(63&a)<<12|(63&i)<<6|63&o)>65535&&l<1114112&&(d=l)}d===null?(d=65533,g=1):d>65535&&(d-=65536,h.push(d>>>10&1023|55296),d=56320|1023&d),h.push(d),f+=g}return function(m){var b=m.length;if(b<=4096)return String.fromCharCode.apply(String,m);for(var w="",_=0;_<b;)w+=String.fromCharCode.apply(String,m.slice(_,_+=4096));return w}(h)}function Cl(e,n,t){var h="";t=Math.min(e.length,t);for(var f=n;f<t;++f)h+=String.fromCharCode(127&e[f]);return h}function xl(e,n,t){var h="";t=Math.min(e.length,t);for(var f=n;f<t;++f)h+=String.fromCharCode(e[f]);return h}function Rl(e,n,t){var h=e.length;(!n||n<0)&&(n=0),(!t||t<0||t>h)&&(t=h);for(var f="",a=n;a<t;++a)f+=Cs[e[a]];return f}function Ol(e,n,t){for(var h=e.slice(n,t),f="",a=0;a<h.length;a+=2)f+=String.fromCharCode(h[a]+256*h[a+1]);return f}function ze(e,n,t){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+n>t)throw new RangeError("Trying to access beyond buffer length")}function et(e,n,t,h,f,a){if(!ge.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>f||n<a)throw new RangeError('"value" argument is out of bounds');if(t+h>e.length)throw new RangeError("Index out of range")}function Ts(e,n,t,h,f,a){if(t+h>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function fo(e,n,t,h,f){return n=+n,t>>>=0,f||Ts(e,0,t,4),Ht.write(e,n,t,h,23,4),t+4}function po(e,n,t,h,f){return n=+n,t>>>=0,f||Ts(e,0,t,8),Ht.write(e,n,t,h,52,8),t+8}function Ei(e,n){var t;n=n||1/0;for(var h=e.length,f=null,a=[],i=0;i<h;++i){if((t=e.charCodeAt(i))>55295&&t<57344){if(!f){if(t>56319){(n-=3)>-1&&a.push(239,191,189);continue}if(i+1===h){(n-=3)>-1&&a.push(239,191,189);continue}f=t;continue}if(t<56320){(n-=3)>-1&&a.push(239,191,189),f=t;continue}t=65536+(f-55296<<10|t-56320)}else f&&(n-=3)>-1&&a.push(239,191,189);if(f=null,t<128){if((n-=1)<0)break;a.push(t)}else if(t<2048){if((n-=2)<0)break;a.push(t>>6|192,63&t|128)}else if(t<65536){if((n-=3)<0)break;a.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((n-=4)<0)break;a.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return a}function ks(e){return Nr.toByteArray(function(n){if((n=(n=n.split("=")[0]).trim().replace(Bs,"")).length<2)return"";for(;n.length%4!=0;)n+="=";return n}(e))}function Kr(e,n,t,h){for(var f=0;f<h&&!(f+t>=n.length||f>=e.length);++f)n[f+t]=e[f];return f}function At(e,n){return e instanceof n||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===n.name}function zi(e){return e!=e}function go(e,n){for(var t in e)n[t]=e[t]}function Ft(e,n,t){return ut(e,n,t)}function ar(e){var n;switch(this.encoding=function(t){var h=function(f){if(!f)return"utf8";for(var a;;)switch(f){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return f;default:if(a)return;f=(""+f).toLowerCase(),a=!0}}(t);if(typeof h!="string"&&(jr.isEncoding===Si||!Si(t)))throw new Error("Unknown encoding: "+t);return h||t}(e),this.encoding){case"utf16le":this.text=Ul,this.end=Ll,n=4;break;case"utf8":this.fillLast=Pl,n=4;break;case"base64":this.text=Ml,this.end=Nl,n=3;break;default:return this.write=jl,this.end=Fl,void 0}this.lastNeed=0,this.lastTotal=0,this.lastChar=jr.allocUnsafe(n)}function on(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function Pl(e){var n=this.lastTotal-this.lastNeed,t=function(h,f,a){if((192&f[0])!=128)return h.lastNeed=0,"�";if(h.lastNeed>1&&f.length>1){if((192&f[1])!=128)return h.lastNeed=1,"�";if(h.lastNeed>2&&f.length>2&&(192&f[2])!=128)return h.lastNeed=2,"�"}}(this,e);return t!==void 0?t:this.lastNeed<=e.length?(e.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,n,0,e.length),this.lastNeed-=e.length,void 0)}function Ul(e,n){if((e.length-n)%2==0){var t=e.toString("utf16le",n);if(t){var h=t.charCodeAt(t.length-1);if(h>=55296&&h<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",n,e.length-1)}function Ll(e){var n=e&&e.length?this.write(e):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return n+this.lastChar.toString("utf16le",0,t)}return n}function Ml(e,n){var t=(e.length-n)%3;return t===0?e.toString("base64",n):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",n,e.length-t))}function Nl(e){var n=e&&e.length?this.write(e):"";return this.lastNeed?n+this.lastChar.toString("base64",0,3-this.lastNeed):n}function jl(e){return e.toString(this.encoding)}function Fl(e){return e&&e.length?this.write(e):""}var mo,ct,rt,yo,vr,Dt,bo,wo,ft,Nr,Ht,sn,Bs,Cs,lr,ur,ut,vo,nr,jr,Si,_o=Ge(()=>{for(ce(),pe(),fe(),mo={byteLength:function(e){var n=uo(e),t=n[0],h=n[1];return 3*(t+h)/4-h},toByteArray:function(e){var n,t,h=uo(e),f=h[0],a=h[1],i=new yo(function(u,d,g){return 3*(d+g)/4-g}(0,f,a)),o=0,l=a>0?f-4:f;for(t=0;t<l;t+=4)n=rt[e.charCodeAt(t)]<<18|rt[e.charCodeAt(t+1)]<<12|rt[e.charCodeAt(t+2)]<<6|rt[e.charCodeAt(t+3)],i[o++]=n>>16&255,i[o++]=n>>8&255,i[o++]=255&n;return a===2&&(n=rt[e.charCodeAt(t)]<<2|rt[e.charCodeAt(t+1)]>>4,i[o++]=255&n),a===1&&(n=rt[e.charCodeAt(t)]<<10|rt[e.charCodeAt(t+1)]<<4|rt[e.charCodeAt(t+2)]>>2,i[o++]=n>>8&255,i[o++]=255&n),i},fromByteArray:function(e){for(var n,t=e.length,h=t%3,f=[],a=0,i=t-h;a<i;a+=16383)f.push(vl(e,a,a+16383>i?i:a+16383));return h===1?(n=e[t-1],f.push(ct[n>>2]+ct[n<<4&63]+"==")):h===2&&(n=(e[t-2]<<8)+e[t-1],f.push(ct[n>>10]+ct[n>>4&63]+ct[n<<2&63]+"=")),f.join("")}},ct=[],rt=[],yo=typeof Uint8Array<"u"?Uint8Array:Array,vr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Dt=0,bo=vr.length;Dt<bo;++Dt)ct[Dt]=vr[Dt],rt[vr.charCodeAt(Dt)]=Dt;rt[45]=62,rt[95]=63,wo={read:function(e,n,t,h,f){var a,i,o=8*f-h-1,l=(1<<o)-1,u=l>>1,d=-7,g=t?f-1:0,m=t?-1:1,b=e[n+g];for(g+=m,a=b&(1<<-d)-1,b>>=-d,d+=o;d>0;a=256*a+e[n+g],g+=m,d-=8);for(i=a&(1<<-d)-1,a>>=-d,d+=h;d>0;i=256*i+e[n+g],g+=m,d-=8);if(a===0)a=1-u;else{if(a===l)return i?NaN:1/0*(b?-1:1);i+=Math.pow(2,h),a-=u}return(b?-1:1)*i*Math.pow(2,a-h)},write:function(e,n,t,h,f,a){var i,o,l,u=8*a-f-1,d=(1<<u)-1,g=d>>1,m=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=h?0:a-1,w=h?1:-1,_=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(o=isNaN(n)?1:0,i=d):(i=Math.floor(Math.log(n)/Math.LN2),n*(l=Math.pow(2,-i))<1&&(i--,l*=2),(n+=i+g>=1?m/l:m*Math.pow(2,1-g))*l>=2&&(i++,l/=2),i+g>=d?(o=0,i=d):i+g>=1?(o=(n*l-1)*Math.pow(2,f),i+=g):(o=n*Math.pow(2,g-1)*Math.pow(2,f),i=0));f>=8;e[t+b]=255&o,b+=w,o/=256,f-=8);for(i=i<<f|o,u+=f;u>0;e[t+b]=255&i,b+=w,i/=256,u-=8);e[t+b-w]|=128*_}},ft={},Nr=mo,Ht=wo,sn=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,ft.Buffer=ge,ft.SlowBuffer=function(e){return+e!=e&&(e=0),ge.alloc(+e)},ft.INSPECT_MAX_BYTES=50,ft.kMaxLength=2147483647,ge.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(e,n),e.foo()===42}catch{return!1}}(),ge.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(ge.prototype,"parent",{enumerable:!0,get:function(){if(ge.isBuffer(this))return this.buffer}}),Object.defineProperty(ge.prototype,"offset",{enumerable:!0,get:function(){if(ge.isBuffer(this))return this.byteOffset}}),ge.poolSize=8192,ge.from=function(e,n,t){return _s(e,n,t)},Object.setPrototypeOf(ge.prototype,Uint8Array.prototype),Object.setPrototypeOf(ge,Uint8Array),ge.alloc=function(e,n,t){return function(h,f,a){return Es(h),h<=0?St(h):f!==void 0?typeof a=="string"?St(h).fill(f,a):St(h).fill(f):St(h)}(e,n,t)},ge.allocUnsafe=function(e){return _i(e)},ge.allocUnsafeSlow=function(e){return _i(e)},ge.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==ge.prototype},ge.compare=function(e,n){if(At(e,Uint8Array)&&(e=ge.from(e,e.offset,e.byteLength)),At(n,Uint8Array)&&(n=ge.from(n,n.offset,n.byteLength)),!ge.isBuffer(e)||!ge.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===n)return 0;for(var t=e.length,h=n.length,f=0,a=Math.min(t,h);f<a;++f)if(e[f]!==n[f]){t=e[f],h=n[f];break}return t<h?-1:h<t?1:0},ge.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ge.concat=function(e,n){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return ge.alloc(0);var t;if(n===void 0)for(n=0,t=0;t<e.length;++t)n+=e[t].length;var h=ge.allocUnsafe(n),f=0;for(t=0;t<e.length;++t){var a=e[t];if(At(a,Uint8Array)&&(a=ge.from(a)),!ge.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(h,f),f+=a.length}return h},ge.byteLength=Ss,ge.prototype._isBuffer=!0,ge.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<e;n+=2)jt(this,n,n+1);return this},ge.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<e;n+=4)jt(this,n,n+3),jt(this,n+1,n+2);return this},ge.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<e;n+=8)jt(this,n,n+7),jt(this,n+1,n+6),jt(this,n+2,n+5),jt(this,n+3,n+4);return this},ge.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?Is(this,0,e):El.apply(this,arguments)},ge.prototype.toLocaleString=ge.prototype.toString,ge.prototype.equals=function(e){if(!ge.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||ge.compare(this,e)===0},ge.prototype.inspect=function(){var e="",n=ft.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},sn&&(ge.prototype[sn]=ge.prototype.inspect),ge.prototype.compare=function(e,n,t,h,f){if(At(e,Uint8Array)&&(e=ge.from(e,e.offset,e.byteLength)),!ge.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(n===void 0&&(n=0),t===void 0&&(t=e?e.length:0),h===void 0&&(h=0),f===void 0&&(f=this.length),n<0||t>e.length||h<0||f>this.length)throw new RangeError("out of range index");if(h>=f&&n>=t)return 0;if(h>=f)return-1;if(n>=t)return 1;if(this===e)return 0;for(var a=(f>>>=0)-(h>>>=0),i=(t>>>=0)-(n>>>=0),o=Math.min(a,i),l=this.slice(h,f),u=e.slice(n,t),d=0;d<o;++d)if(l[d]!==u[d]){a=l[d],i=u[d];break}return a<i?-1:i<a?1:0},ge.prototype.includes=function(e,n,t){return this.indexOf(e,n,t)!==-1},ge.prototype.indexOf=function(e,n,t){return ho(this,e,n,t,!0)},ge.prototype.lastIndexOf=function(e,n,t){return ho(this,e,n,t,!1)},ge.prototype.write=function(e,n,t,h){if(n===void 0)h="utf8",t=this.length,n=0;else if(t===void 0&&typeof n=="string")h=n,t=this.length,n=0;else{if(!isFinite(n))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n>>>=0,isFinite(t)?(t>>>=0,h===void 0&&(h="utf8")):(h=t,t=void 0)}var f=this.length-n;if((t===void 0||t>f)&&(t=f),e.length>0&&(t<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");for(var a=!1;;)switch(h){case"hex":return Sl(this,e,n,t);case"utf8":case"utf-8":return Al(this,e,n,t);case"ascii":return As(this,e,n,t);case"latin1":case"binary":return Il(this,e,n,t);case"base64":return Tl(this,e,n,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return kl(this,e,n,t);default:if(a)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),a=!0}},ge.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},ge.prototype.slice=function(e,n){var t=this.length;(e=~~e)<0?(e+=t)<0&&(e=0):e>t&&(e=t),(n=n===void 0?t:~~n)<0?(n+=t)<0&&(n=0):n>t&&(n=t),n<e&&(n=e);var h=this.subarray(e,n);return Object.setPrototypeOf(h,ge.prototype),h},ge.prototype.readUIntLE=function(e,n,t){e>>>=0,n>>>=0,t||ze(e,n,this.length);for(var h=this[e],f=1,a=0;++a<n&&(f*=256);)h+=this[e+a]*f;return h},ge.prototype.readUIntBE=function(e,n,t){e>>>=0,n>>>=0,t||ze(e,n,this.length);for(var h=this[e+--n],f=1;n>0&&(f*=256);)h+=this[e+--n]*f;return h},ge.prototype.readUInt8=function(e,n){return e>>>=0,n||ze(e,1,this.length),this[e]},ge.prototype.readUInt16LE=function(e,n){return e>>>=0,n||ze(e,2,this.length),this[e]|this[e+1]<<8},ge.prototype.readUInt16BE=function(e,n){return e>>>=0,n||ze(e,2,this.length),this[e]<<8|this[e+1]},ge.prototype.readUInt32LE=function(e,n){return e>>>=0,n||ze(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},ge.prototype.readUInt32BE=function(e,n){return e>>>=0,n||ze(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},ge.prototype.readIntLE=function(e,n,t){e>>>=0,n>>>=0,t||ze(e,n,this.length);for(var h=this[e],f=1,a=0;++a<n&&(f*=256);)h+=this[e+a]*f;return h>=(f*=128)&&(h-=Math.pow(2,8*n)),h},ge.prototype.readIntBE=function(e,n,t){e>>>=0,n>>>=0,t||ze(e,n,this.length);for(var h=n,f=1,a=this[e+--h];h>0&&(f*=256);)a+=this[e+--h]*f;return a>=(f*=128)&&(a-=Math.pow(2,8*n)),a},ge.prototype.readInt8=function(e,n){return e>>>=0,n||ze(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},ge.prototype.readInt16LE=function(e,n){e>>>=0,n||ze(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},ge.prototype.readInt16BE=function(e,n){e>>>=0,n||ze(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},ge.prototype.readInt32LE=function(e,n){return e>>>=0,n||ze(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},ge.prototype.readInt32BE=function(e,n){return e>>>=0,n||ze(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},ge.prototype.readFloatLE=function(e,n){return e>>>=0,n||ze(e,4,this.length),Ht.read(this,e,!0,23,4)},ge.prototype.readFloatBE=function(e,n){return e>>>=0,n||ze(e,4,this.length),Ht.read(this,e,!1,23,4)},ge.prototype.readDoubleLE=function(e,n){return e>>>=0,n||ze(e,8,this.length),Ht.read(this,e,!0,52,8)},ge.prototype.readDoubleBE=function(e,n){return e>>>=0,n||ze(e,8,this.length),Ht.read(this,e,!1,52,8)},ge.prototype.writeUIntLE=function(e,n,t,h){e=+e,n>>>=0,t>>>=0,h||et(this,e,n,t,Math.pow(2,8*t)-1,0);var f=1,a=0;for(this[n]=255&e;++a<t&&(f*=256);)this[n+a]=e/f&255;return n+t},ge.prototype.writeUIntBE=function(e,n,t,h){e=+e,n>>>=0,t>>>=0,h||et(this,e,n,t,Math.pow(2,8*t)-1,0);var f=t-1,a=1;for(this[n+f]=255&e;--f>=0&&(a*=256);)this[n+f]=e/a&255;return n+t},ge.prototype.writeUInt8=function(e,n,t){return e=+e,n>>>=0,t||et(this,e,n,1,255,0),this[n]=255&e,n+1},ge.prototype.writeUInt16LE=function(e,n,t){return e=+e,n>>>=0,t||et(this,e,n,2,65535,0),this[n]=255&e,this[n+1]=e>>>8,n+2},ge.prototype.writeUInt16BE=function(e,n,t){return e=+e,n>>>=0,t||et(this,e,n,2,65535,0),this[n]=e>>>8,this[n+1]=255&e,n+2},ge.prototype.writeUInt32LE=function(e,n,t){return e=+e,n>>>=0,t||et(this,e,n,4,4294967295,0),this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e,n+4},ge.prototype.writeUInt32BE=function(e,n,t){return e=+e,n>>>=0,t||et(this,e,n,4,4294967295,0),this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e,n+4},ge.prototype.writeIntLE=function(e,n,t,h){if(e=+e,n>>>=0,!h){var f=Math.pow(2,8*t-1);et(this,e,n,t,f-1,-f)}var a=0,i=1,o=0;for(this[n]=255&e;++a<t&&(i*=256);)e<0&&o===0&&this[n+a-1]!==0&&(o=1),this[n+a]=(e/i>>0)-o&255;return n+t},ge.prototype.writeIntBE=function(e,n,t,h){if(e=+e,n>>>=0,!h){var f=Math.pow(2,8*t-1);et(this,e,n,t,f-1,-f)}var a=t-1,i=1,o=0;for(this[n+a]=255&e;--a>=0&&(i*=256);)e<0&&o===0&&this[n+a+1]!==0&&(o=1),this[n+a]=(e/i>>0)-o&255;return n+t},ge.prototype.writeInt8=function(e,n,t){return e=+e,n>>>=0,t||et(this,e,n,1,127,-128),e<0&&(e=255+e+1),this[n]=255&e,n+1},ge.prototype.writeInt16LE=function(e,n,t){return e=+e,n>>>=0,t||et(this,e,n,2,32767,-32768),this[n]=255&e,this[n+1]=e>>>8,n+2},ge.prototype.writeInt16BE=function(e,n,t){return e=+e,n>>>=0,t||et(this,e,n,2,32767,-32768),this[n]=e>>>8,this[n+1]=255&e,n+2},ge.prototype.writeInt32LE=function(e,n,t){return e=+e,n>>>=0,t||et(this,e,n,4,2147483647,-2147483648),this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24,n+4},ge.prototype.writeInt32BE=function(e,n,t){return e=+e,n>>>=0,t||et(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e,n+4},ge.prototype.writeFloatLE=function(e,n,t){return fo(this,e,n,!0,t)},ge.prototype.writeFloatBE=function(e,n,t){return fo(this,e,n,!1,t)},ge.prototype.writeDoubleLE=function(e,n,t){return po(this,e,n,!0,t)},ge.prototype.writeDoubleBE=function(e,n,t){return po(this,e,n,!1,t)},ge.prototype.copy=function(e,n,t,h){if(!ge.isBuffer(e))throw new TypeError("argument should be a Buffer");if(t||(t=0),h||h===0||(h=this.length),n>=e.length&&(n=e.length),n||(n=0),h>0&&h<t&&(h=t),h===t||e.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),e.length-n<h-t&&(h=e.length-n+t);var f=h-t;if(this===e&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(n,t,h);else if(this===e&&t<n&&n<h)for(var a=f-1;a>=0;--a)e[a+n]=this[a+t];else Uint8Array.prototype.set.call(e,this.subarray(t,h),n);return f},ge.prototype.fill=function(e,n,t,h){if(typeof e=="string"){if(typeof n=="string"?(h=n,n=0,t=this.length):typeof t=="string"&&(h=t,t=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!ge.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(e.length===1){var f=e.charCodeAt(0);(h==="utf8"&&f<128||h==="latin1")&&(e=f)}}else typeof e=="number"?e&=255:typeof e=="boolean"&&(e=Number(e));if(n<0||this.length<n||this.length<t)throw new RangeError("Out of range index");if(t<=n)return this;var a;if(n>>>=0,t=t===void 0?this.length:t>>>0,e||(e=0),typeof e=="number")for(a=n;a<t;++a)this[a]=e;else{var i=ge.isBuffer(e)?e:ge.from(e,h),o=i.length;if(o===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<t-n;++a)this[a+n]=i[a%o]}return this},Bs=/[^+/0-9A-Za-z-_]/g,Cs=function(){for(var e=new Array(256),n=0;n<16;++n)for(var t=16*n,h=0;h<16;++h)e[t+h]="0123456789abcdef"[n]+"0123456789abcdef"[h];return e}(),ft.Buffer,ft.INSPECT_MAX_BYTES,ft.kMaxLength,lr={},ur=ft,ut=ur.Buffer,ut.from&&ut.alloc&&ut.allocUnsafe&&ut.allocUnsafeSlow?lr=ur:(go(ur,lr),lr.Buffer=Ft),Ft.prototype=Object.create(ut.prototype),go(ut,Ft),Ft.from=function(e,n,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return ut(e,n,t)},Ft.alloc=function(e,n,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var h=ut(e);return n!==void 0?typeof t=="string"?h.fill(n,t):h.fill(n):h.fill(0),h},Ft.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return ut(e)},Ft.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return ur.SlowBuffer(e)},vo=lr,nr={},jr=vo.Buffer,Si=jr.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},nr.StringDecoder=ar,ar.prototype.write=function(e){if(e.length===0)return"";var n,t;if(this.lastNeed){if((n=this.fillLast(e))===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<e.length?n?n+this.text(e,t):this.text(e,t):n||""},ar.prototype.end=function(e){var n=e&&e.length?this.write(e):"";return this.lastNeed?n+"�":n},ar.prototype.text=function(e,n){var t=function(f,a,i){var o=a.length-1;if(o<i)return 0;var l=on(a[o]);return l>=0?(l>0&&(f.lastNeed=l-1),l):--o<i||l===-2?0:(l=on(a[o]))>=0?(l>0&&(f.lastNeed=l-2),l):--o<i||l===-2?0:(l=on(a[o]))>=0?(l>0&&(l===2?l=0:f.lastNeed=l-3),l):0}(this,e,n);if(!this.lastNeed)return e.toString("utf8",n);this.lastTotal=t;var h=e.length-(t-this.lastNeed);return e.copy(this.lastChar,0,h),e.toString("utf8",n,h)},ar.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},nr.StringDecoder,nr.StringDecoder}),xs={};Qt(xs,{StringDecoder:()=>Rs,default:()=>nr});var Rs,Dl=Ge(()=>{ce(),pe(),fe(),_o(),_o(),Rs=nr.StringDecoder}),Os=ve((e,n)=>{ce(),pe(),fe();var t=Jt(),{PromisePrototypeThen:h,SymbolAsyncIterator:f,SymbolIterator:a}=qe(),{Buffer:i}=(Je(),Le(Qe)),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_NULL_VALUES:l}=tt().codes;function u(d,g,m){let b;if(typeof g=="string"||g instanceof i)return new d({objectMode:!0,...m,read(){this.push(g),this.push(null)}});let w;if(g&&g[f])w=!0,b=g[f]();else if(g&&g[a])w=!1,b=g[a]();else throw new o("iterable",["Iterable"],g);let _=new d({objectMode:!0,highWaterMark:1,...m}),T=!1;_._read=function(){T||(T=!0,B())},_._destroy=function(S,j){h(M(S),()=>t.nextTick(j,S),F=>t.nextTick(j,F||S))};async function M(S){let j=S!=null,F=typeof b.throw=="function";if(j&&F){let{value:R,done:C}=await b.throw(S);if(await R,C)return}if(typeof b.return=="function"){let{value:R}=await b.return();await R}}async function B(){for(;;){try{let{value:S,done:j}=w?await b.next():b.next();if(j)_.push(null);else{let F=S&&typeof S.then=="function"?await S:S;if(F===null)throw T=!1,new l;if(_.push(F))continue;T=!1}}catch(S){_.destroy(S)}break}}return _}n.exports=u}),Yr=ve((e,n)=>{ce(),pe(),fe();var t=Jt(),{ArrayPrototypeIndexOf:h,NumberIsInteger:f,NumberIsNaN:a,NumberParseInt:i,ObjectDefineProperties:o,ObjectKeys:l,ObjectSetPrototypeOf:u,Promise:d,SafeSet:g,SymbolAsyncIterator:m,Symbol:b}=qe();n.exports=E,E.ReadableState=be;var{EventEmitter:w}=(sr(),Le(Xt)),{Stream:_,prependListener:T}=qi(),{Buffer:M}=(Je(),Le(Qe)),{addAbortSignal:B}=zr(),S=Mt(),j=It().debuglog("stream",s=>{j=s}),F=wl(),R=or(),{getHighWaterMark:C,getDefaultHighWaterMark:L}=Hi(),{aggregateTwoErrors:q,codes:{ERR_INVALID_ARG_TYPE:X,ERR_METHOD_NOT_IMPLEMENTED:ne,ERR_OUT_OF_RANGE:I,ERR_STREAM_PUSH_AFTER_EOF:z,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:te}}=tt(),{validateObject:Q}=Vr(),ye=b("kPaused"),{StringDecoder:ae}=(Dl(),Le(xs)),V=Os();u(E.prototype,_.prototype),u(E,_);var we=()=>{},{errorOrDestroy:se}=R;function be(s,r,c){typeof c!="boolean"&&(c=r instanceof Tt()),this.objectMode=!!(s&&s.objectMode),c&&(this.objectMode=this.objectMode||!!(s&&s.readableObjectMode)),this.highWaterMark=s?C(this,s,"readableHighWaterMark",c):L(!1),this.buffer=new F,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[ye]=null,this.errorEmitted=!1,this.emitClose=!s||s.emitClose!==!1,this.autoDestroy=!s||s.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=s&&s.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,s&&s.encoding&&(this.decoder=new ae(s.encoding),this.encoding=s.encoding)}function E(s){if(!(this instanceof E))return new E(s);let r=this instanceof Tt();this._readableState=new be(s,this,r),s&&(typeof s.read=="function"&&(this._read=s.read),typeof s.destroy=="function"&&(this._destroy=s.destroy),typeof s.construct=="function"&&(this._construct=s.construct),s.signal&&!r&&B(s.signal,this)),_.call(this,s),R.construct(this,()=>{this._readableState.needReadable&&re(this,this._readableState)})}E.prototype.destroy=R.destroy,E.prototype._undestroy=R.undestroy,E.prototype._destroy=function(s,r){r(s)},E.prototype[w.captureRejectionSymbol]=function(s){this.destroy(s)},E.prototype.push=function(s,r){return J(this,s,r,!1)},E.prototype.unshift=function(s,r){return J(this,s,r,!0)};function J(s,r,c,y){j("readableAddChunk",r);let v=s._readableState,k;if(v.objectMode||(typeof r=="string"?(c=c||v.defaultEncoding,v.encoding!==c&&(y&&v.encoding?r=M.from(r,c).toString(v.encoding):(r=M.from(r,c),c=""))):r instanceof M?c="":_._isUint8Array(r)?(r=_._uint8ArrayToBuffer(r),c=""):r!=null&&(k=new X("chunk",["string","Buffer","Uint8Array"],r))),k)se(s,k);else if(r===null)v.reading=!1,A(s,v);else if(v.objectMode||r&&r.length>0)if(y)if(v.endEmitted)se(s,new te);else{if(v.destroyed||v.errored)return!1;de(s,v,r,!0)}else if(v.ended)se(s,new z);else{if(v.destroyed||v.errored)return!1;v.reading=!1,v.decoder&&!c?(r=v.decoder.write(r),v.objectMode||r.length!==0?de(s,v,r,!1):re(s,v)):de(s,v,r,!1)}else y||(v.reading=!1,re(s,v));return!v.ended&&(v.length<v.highWaterMark||v.length===0)}function de(s,r,c,y){r.flowing&&r.length===0&&!r.sync&&s.listenerCount("data")>0?(r.multiAwaitDrain?r.awaitDrainWriters.clear():r.awaitDrainWriters=null,r.dataEmitted=!0,s.emit("data",c)):(r.length+=r.objectMode?1:c.length,y?r.buffer.unshift(c):r.buffer.push(c),r.needReadable&&G(s)),re(s,r)}E.prototype.isPaused=function(){let s=this._readableState;return s[ye]===!0||s.flowing===!1},E.prototype.setEncoding=function(s){let r=new ae(s);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;let c=this._readableState.buffer,y="";for(let v of c)y+=r.write(v);return c.clear(),y!==""&&c.push(y),this._readableState.length=y.length,this};var Ee=1073741824;function le(s){if(s>Ee)throw new I("size","<= 1GiB",s);return s--,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s++,s}function P(s,r){return s<=0||r.length===0&&r.ended?0:r.objectMode?1:a(s)?r.flowing&&r.length?r.buffer.first().length:r.length:s<=r.length?s:r.ended?r.length:0}E.prototype.read=function(s){j("read",s),s===void 0?s=NaN:f(s)||(s=i(s,10));let r=this._readableState,c=s;if(s>r.highWaterMark&&(r.highWaterMark=le(s)),s!==0&&(r.emittedReadable=!1),s===0&&r.needReadable&&((r.highWaterMark!==0?r.length>=r.highWaterMark:r.length>0)||r.ended))return j("read: emitReadable",r.length,r.ended),r.length===0&&r.ended?x(this):G(this),null;if(s=P(s,r),s===0&&r.ended)return r.length===0&&x(this),null;let y=r.needReadable;if(j("need readable",y),(r.length===0||r.length-s<r.highWaterMark)&&(y=!0,j("length less than watermark",y)),r.ended||r.reading||r.destroyed||r.errored||!r.constructed)y=!1,j("reading, ended or constructing",y);else if(y){j("do read"),r.reading=!0,r.sync=!0,r.length===0&&(r.needReadable=!0);try{this._read(r.highWaterMark)}catch(k){se(this,k)}r.sync=!1,r.reading||(s=P(c,r))}let v;return s>0?v=K(s,r):v=null,v===null?(r.needReadable=r.length<=r.highWaterMark,s=0):(r.length-=s,r.multiAwaitDrain?r.awaitDrainWriters.clear():r.awaitDrainWriters=null),r.length===0&&(r.ended||(r.needReadable=!0),c!==s&&r.ended&&x(this)),v!==null&&!r.errorEmitted&&!r.closeEmitted&&(r.dataEmitted=!0,this.emit("data",v)),v};function A(s,r){if(j("onEofChunk"),!r.ended){if(r.decoder){let c=r.decoder.end();c&&c.length&&(r.buffer.push(c),r.length+=r.objectMode?1:c.length)}r.ended=!0,r.sync?G(s):(r.needReadable=!1,r.emittedReadable=!0,ue(s))}}function G(s){let r=s._readableState;j("emitReadable",r.needReadable,r.emittedReadable),r.needReadable=!1,r.emittedReadable||(j("emitReadable",r.flowing),r.emittedReadable=!0,t.nextTick(ue,s))}function ue(s){let r=s._readableState;j("emitReadable_",r.destroyed,r.length,r.ended),!r.destroyed&&!r.errored&&(r.length||r.ended)&&(s.emit("readable"),r.emittedReadable=!1),r.needReadable=!r.flowing&&!r.ended&&r.length<=r.highWaterMark,oe(s)}function re(s,r){!r.readingMore&&r.constructed&&(r.readingMore=!0,t.nextTick(ee,s,r))}function ee(s,r){for(;!r.reading&&!r.ended&&(r.length<r.highWaterMark||r.flowing&&r.length===0);){let c=r.length;if(j("maybeReadMore read 0"),s.read(0),c===r.length)break}r.readingMore=!1}E.prototype._read=function(s){throw new ne("_read()")},E.prototype.pipe=function(s,r){let c=this,y=this._readableState;y.pipes.length===1&&(y.multiAwaitDrain||(y.multiAwaitDrain=!0,y.awaitDrainWriters=new g(y.awaitDrainWriters?[y.awaitDrainWriters]:[]))),y.pipes.push(s),j("pipe count=%d opts=%j",y.pipes.length,r);let v=(!r||r.end!==!1)&&s!==t.stdout&&s!==t.stderr?Y:Ke;y.endEmitted?t.nextTick(v):c.once("end",v),s.on("unpipe",k);function k(Ze,Ve){j("onunpipe"),Ze===c&&Ve&&Ve.hasUnpiped===!1&&(Ve.hasUnpiped=!0,Se())}function Y(){j("onend"),s.end()}let _e,Te=!1;function Se(){j("cleanup"),s.removeListener("close",He),s.removeListener("finish",$e),_e&&s.removeListener("drain",_e),s.removeListener("error",Me),s.removeListener("unpipe",k),c.removeListener("end",Y),c.removeListener("end",Ke),c.removeListener("data",Ae),Te=!0,_e&&y.awaitDrainWriters&&(!s._writableState||s._writableState.needDrain)&&_e()}function Ie(){Te||(y.pipes.length===1&&y.pipes[0]===s?(j("false write response, pause",0),y.awaitDrainWriters=s,y.multiAwaitDrain=!1):y.pipes.length>1&&y.pipes.includes(s)&&(j("false write response, pause",y.awaitDrainWriters.size),y.awaitDrainWriters.add(s)),c.pause()),_e||(_e=me(c,s),s.on("drain",_e))}c.on("data",Ae);function Ae(Ze){j("ondata");let Ve=s.write(Ze);j("dest.write",Ve),Ve===!1&&Ie()}function Me(Ze){if(j("onerror",Ze),Ke(),s.removeListener("error",Me),s.listenerCount("error")===0){let Ve=s._writableState||s._readableState;Ve&&!Ve.errorEmitted?se(s,Ze):s.emit("error",Ze)}}T(s,"error",Me);function He(){s.removeListener("finish",$e),Ke()}s.once("close",He);function $e(){j("onfinish"),s.removeListener("close",He),Ke()}s.once("finish",$e);function Ke(){j("unpipe"),c.unpipe(s)}return s.emit("pipe",c),s.writableNeedDrain===!0?y.flowing&&Ie():y.flowing||(j("pipe resume"),c.resume()),s};function me(s,r){return function(){let c=s._readableState;c.awaitDrainWriters===r?(j("pipeOnDrain",1),c.awaitDrainWriters=null):c.multiAwaitDrain&&(j("pipeOnDrain",c.awaitDrainWriters.size),c.awaitDrainWriters.delete(r)),(!c.awaitDrainWriters||c.awaitDrainWriters.size===0)&&s.listenerCount("data")&&s.resume()}}E.prototype.unpipe=function(s){let r=this._readableState,c={hasUnpiped:!1};if(r.pipes.length===0)return this;if(!s){let v=r.pipes;r.pipes=[],this.pause();for(let k=0;k<v.length;k++)v[k].emit("unpipe",this,{hasUnpiped:!1});return this}let y=h(r.pipes,s);return y===-1?this:(r.pipes.splice(y,1),r.pipes.length===0&&this.pause(),s.emit("unpipe",this,c),this)},E.prototype.on=function(s,r){let c=_.prototype.on.call(this,s,r),y=this._readableState;return s==="data"?(y.readableListening=this.listenerCount("readable")>0,y.flowing!==!1&&this.resume()):s==="readable"&&!y.endEmitted&&!y.readableListening&&(y.readableListening=y.needReadable=!0,y.flowing=!1,y.emittedReadable=!1,j("on readable",y.length,y.reading),y.length?G(this):y.reading||t.nextTick(O,this)),c},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(s,r){let c=_.prototype.removeListener.call(this,s,r);return s==="readable"&&t.nextTick(he,this),c},E.prototype.off=E.prototype.removeListener,E.prototype.removeAllListeners=function(s){let r=_.prototype.removeAllListeners.apply(this,arguments);return(s==="readable"||s===void 0)&&t.nextTick(he,this),r};function he(s){let r=s._readableState;r.readableListening=s.listenerCount("readable")>0,r.resumeScheduled&&r[ye]===!1?r.flowing=!0:s.listenerCount("data")>0?s.resume():r.readableListening||(r.flowing=null)}function O(s){j("readable nexttick read 0"),s.read(0)}E.prototype.resume=function(){let s=this._readableState;return s.flowing||(j("resume"),s.flowing=!s.readableListening,W(this,s)),s[ye]=!1,this};function W(s,r){r.resumeScheduled||(r.resumeScheduled=!0,t.nextTick($,s,r))}function $(s,r){j("resume",r.reading),r.reading||s.read(0),r.resumeScheduled=!1,s.emit("resume"),oe(s),r.flowing&&!r.reading&&s.read(0)}E.prototype.pause=function(){return j("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(j("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ye]=!0,this};function oe(s){let r=s._readableState;for(j("flow",r.flowing);r.flowing&&s.read()!==null;);}E.prototype.wrap=function(s){let r=!1;s.on("data",y=>{!this.push(y)&&s.pause&&(r=!0,s.pause())}),s.on("end",()=>{this.push(null)}),s.on("error",y=>{se(this,y)}),s.on("close",()=>{this.destroy()}),s.on("destroy",()=>{this.destroy()}),this._read=()=>{r&&s.resume&&(r=!1,s.resume())};let c=l(s);for(let y=1;y<c.length;y++){let v=c[y];this[v]===void 0&&typeof s[v]=="function"&&(this[v]=s[v].bind(s))}return this},E.prototype[m]=function(){return Z(this)},E.prototype.iterator=function(s){return s!==void 0&&Q(s,"options"),Z(this,s)};function Z(s,r){typeof s.read!="function"&&(s=E.wrap(s,{objectMode:!0}));let c=N(s,r);return c.stream=s,c}async function*N(s,r){let c=we;function y(Y){this===s?(c(),c=we):c=Y}s.on("readable",y);let v,k=S(s,{writable:!1},Y=>{v=Y?q(v,Y):null,c(),c=we});try{for(;;){let Y=s.destroyed?null:s.read();if(Y!==null)yield Y;else{if(v)throw v;if(v===null)return;await new d(y)}}}catch(Y){throw v=q(v,Y),v}finally{(v||(r==null?void 0:r.destroyOnReturn)!==!1)&&(v===void 0||s._readableState.autoDestroy)?R.destroyer(s,null):(s.off("readable",y),k())}}o(E.prototype,{readable:{__proto__:null,get(){let s=this._readableState;return!!s&&s.readable!==!1&&!s.destroyed&&!s.errorEmitted&&!s.endEmitted},set(s){this._readableState&&(this._readableState.readable=!!s)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(s){this._readableState&&(this._readableState.flowing=s)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(s){this._readableState&&(this._readableState.destroyed=s)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o(be.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ye]!==!1},set(s){this[ye]=!!s}}}),E._fromList=K;function K(s,r){if(r.length===0)return null;let c;return r.objectMode?c=r.buffer.shift():!s||s>=r.length?(r.decoder?c=r.buffer.join(""):r.buffer.length===1?c=r.buffer.first():c=r.buffer.concat(r.length),r.buffer.clear()):c=r.buffer.consume(s,r.decoder),c}function x(s){let r=s._readableState;j("endReadable",r.endEmitted),r.endEmitted||(r.ended=!0,t.nextTick(D,r,s))}function D(s,r){if(j("endReadableNT",s.endEmitted,s.length),!s.errored&&!s.closeEmitted&&!s.endEmitted&&s.length===0){if(s.endEmitted=!0,r.emit("end"),r.writable&&r.allowHalfOpen===!1)t.nextTick(H,r);else if(s.autoDestroy){let c=r._writableState;(!c||c.autoDestroy&&(c.finished||c.writable===!1))&&r.destroy()}}}function H(s){s.writable&&!s.writableEnded&&!s.destroyed&&s.end()}E.from=function(s,r){return V(E,s,r)};var ie;function p(){return ie===void 0&&(ie={}),ie}E.fromWeb=function(s,r){return p().newStreamReadableFromReadableStream(s,r)},E.toWeb=function(s,r){return p().newReadableStreamFromStreamReadable(s,r)},E.wrap=function(s,r){var c,y;return new E({objectMode:(c=(y=s.readableObjectMode)!==null&&y!==void 0?y:s.objectMode)!==null&&c!==void 0?c:!0,...r,destroy(v,k){R.destroyer(s,v),k(v)}}).wrap(s)}}),Ps=ve((e,n)=>{ce(),pe(),fe();var t=Jt(),{ArrayPrototypeSlice:h,Error:f,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:i,ObjectDefineProperties:o,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:u,Symbol:d,SymbolHasInstance:g}=qe();n.exports=ae,ae.WritableState=Q;var{EventEmitter:m}=(sr(),Le(Xt)),b=qi().Stream,{Buffer:w}=(Je(),Le(Qe)),_=or(),{addAbortSignal:T}=zr(),{getHighWaterMark:M,getDefaultHighWaterMark:B}=Hi(),{ERR_INVALID_ARG_TYPE:S,ERR_METHOD_NOT_IMPLEMENTED:j,ERR_MULTIPLE_CALLBACK:F,ERR_STREAM_CANNOT_PIPE:R,ERR_STREAM_DESTROYED:C,ERR_STREAM_ALREADY_FINISHED:L,ERR_STREAM_NULL_VALUES:q,ERR_STREAM_WRITE_AFTER_END:X,ERR_UNKNOWN_ENCODING:ne}=tt().codes,{errorOrDestroy:I}=_;l(ae.prototype,b.prototype),l(ae,b);function z(){}var te=d("kOnFinished");function Q(O,W,$){typeof $!="boolean"&&($=W instanceof Tt()),this.objectMode=!!(O&&O.objectMode),$&&(this.objectMode=this.objectMode||!!(O&&O.writableObjectMode)),this.highWaterMark=O?M(this,O,"writableHighWaterMark",$):B(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let oe=!!(O&&O.decodeStrings===!1);this.decodeStrings=!oe,this.defaultEncoding=O&&O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=E.bind(void 0,W),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ye(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!O||O.emitClose!==!1,this.autoDestroy=!O||O.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[te]=[]}function ye(O){O.buffered=[],O.bufferedIndex=0,O.allBuffers=!0,O.allNoop=!0}Q.prototype.getBuffer=function(){return h(this.buffered,this.bufferedIndex)},i(Q.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ae(O){let W=this instanceof Tt();if(!W&&!a(ae,this))return new ae(O);this._writableState=new Q(O,this,W),O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final),typeof O.construct=="function"&&(this._construct=O.construct),O.signal&&T(O.signal,this)),b.call(this,O),_.construct(this,()=>{let $=this._writableState;$.writing||le(this,$),ue(this,$)})}i(ae,g,{__proto__:null,value:function(O){return a(this,O)?!0:this!==ae?!1:O&&O._writableState instanceof Q}}),ae.prototype.pipe=function(){I(this,new R)};function V(O,W,$,oe){let Z=O._writableState;if(typeof $=="function")oe=$,$=Z.defaultEncoding;else{if(!$)$=Z.defaultEncoding;else if($!=="buffer"&&!w.isEncoding($))throw new ne($);typeof oe!="function"&&(oe=z)}if(W===null)throw new q;if(!Z.objectMode)if(typeof W=="string")Z.decodeStrings!==!1&&(W=w.from(W,$),$="buffer");else if(W instanceof w)$="buffer";else if(b._isUint8Array(W))W=b._uint8ArrayToBuffer(W),$="buffer";else throw new S("chunk",["string","Buffer","Uint8Array"],W);let N;return Z.ending?N=new X:Z.destroyed&&(N=new C("write")),N?(t.nextTick(oe,N),I(O,N,!0),N):(Z.pendingcb++,we(O,Z,W,$,oe))}ae.prototype.write=function(O,W,$){return V(this,O,W,$)===!0},ae.prototype.cork=function(){this._writableState.corked++},ae.prototype.uncork=function(){let O=this._writableState;O.corked&&(O.corked--,O.writing||le(this,O))},ae.prototype.setDefaultEncoding=function(O){if(typeof O=="string"&&(O=u(O)),!w.isEncoding(O))throw new ne(O);return this._writableState.defaultEncoding=O,this};function we(O,W,$,oe,Z){let N=W.objectMode?1:$.length;W.length+=N;let K=W.length<W.highWaterMark;return K||(W.needDrain=!0),W.writing||W.corked||W.errored||!W.constructed?(W.buffered.push({chunk:$,encoding:oe,callback:Z}),W.allBuffers&&oe!=="buffer"&&(W.allBuffers=!1),W.allNoop&&Z!==z&&(W.allNoop=!1)):(W.writelen=N,W.writecb=Z,W.writing=!0,W.sync=!0,O._write($,oe,W.onwrite),W.sync=!1),K&&!W.errored&&!W.destroyed}function se(O,W,$,oe,Z,N,K){W.writelen=oe,W.writecb=K,W.writing=!0,W.sync=!0,W.destroyed?W.onwrite(new C("write")):$?O._writev(Z,W.onwrite):O._write(Z,N,W.onwrite),W.sync=!1}function be(O,W,$,oe){--W.pendingcb,oe($),Ee(W),I(O,$)}function E(O,W){let $=O._writableState,oe=$.sync,Z=$.writecb;if(typeof Z!="function"){I(O,new F);return}$.writing=!1,$.writecb=null,$.length-=$.writelen,$.writelen=0,W?(W.stack,$.errored||($.errored=W),O._readableState&&!O._readableState.errored&&(O._readableState.errored=W),oe?t.nextTick(be,O,$,W,Z):be(O,$,W,Z)):($.buffered.length>$.bufferedIndex&&le(O,$),oe?$.afterWriteTickInfo!==null&&$.afterWriteTickInfo.cb===Z?$.afterWriteTickInfo.count++:($.afterWriteTickInfo={count:1,cb:Z,stream:O,state:$},t.nextTick(J,$.afterWriteTickInfo)):de(O,$,1,Z))}function J({stream:O,state:W,count:$,cb:oe}){return W.afterWriteTickInfo=null,de(O,W,$,oe)}function de(O,W,$,oe){for(!W.ending&&!O.destroyed&&W.length===0&&W.needDrain&&(W.needDrain=!1,O.emit("drain"));$-- >0;)W.pendingcb--,oe();W.destroyed&&Ee(W),ue(O,W)}function Ee(O){if(O.writing)return;for(let Z=O.bufferedIndex;Z<O.buffered.length;++Z){var W;let{chunk:N,callback:K}=O.buffered[Z],x=O.objectMode?1:N.length;O.length-=x,K((W=O.errored)!==null&&W!==void 0?W:new C("write"))}let $=O[te].splice(0);for(let Z=0;Z<$.length;Z++){var oe;$[Z]((oe=O.errored)!==null&&oe!==void 0?oe:new C("end"))}ye(O)}function le(O,W){if(W.corked||W.bufferProcessing||W.destroyed||!W.constructed)return;let{buffered:$,bufferedIndex:oe,objectMode:Z}=W,N=$.length-oe;if(!N)return;let K=oe;if(W.bufferProcessing=!0,N>1&&O._writev){W.pendingcb-=N-1;let x=W.allNoop?z:H=>{for(let ie=K;ie<$.length;++ie)$[ie].callback(H)},D=W.allNoop&&K===0?$:h($,K);D.allBuffers=W.allBuffers,se(O,W,!0,W.length,D,"",x),ye(W)}else{do{let{chunk:x,encoding:D,callback:H}=$[K];$[K++]=null;let ie=Z?1:x.length;se(O,W,!1,ie,x,D,H)}while(K<$.length&&!W.writing);K===$.length?ye(W):K>256?($.splice(0,K),W.bufferedIndex=0):W.bufferedIndex=K}W.bufferProcessing=!1}ae.prototype._write=function(O,W,$){if(this._writev)this._writev([{chunk:O,encoding:W}],$);else throw new j("_write()")},ae.prototype._writev=null,ae.prototype.end=function(O,W,$){let oe=this._writableState;typeof O=="function"?($=O,O=null,W=null):typeof W=="function"&&($=W,W=null);let Z;if(O!=null){let N=V(this,O,W);N instanceof f&&(Z=N)}return oe.corked&&(oe.corked=1,this.uncork()),Z||(!oe.errored&&!oe.ending?(oe.ending=!0,ue(this,oe,!0),oe.ended=!0):oe.finished?Z=new L("end"):oe.destroyed&&(Z=new C("end"))),typeof $=="function"&&(Z||oe.finished?t.nextTick($,Z):oe[te].push($)),this};function P(O){return O.ending&&!O.destroyed&&O.constructed&&O.length===0&&!O.errored&&O.buffered.length===0&&!O.finished&&!O.writing&&!O.errorEmitted&&!O.closeEmitted}function A(O,W){let $=!1;function oe(Z){if($){I(O,Z??F());return}if($=!0,W.pendingcb--,Z){let N=W[te].splice(0);for(let K=0;K<N.length;K++)N[K](Z);I(O,Z,W.sync)}else P(W)&&(W.prefinished=!0,O.emit("prefinish"),W.pendingcb++,t.nextTick(re,O,W))}W.sync=!0,W.pendingcb++;try{O._final(oe)}catch(Z){oe(Z)}W.sync=!1}function G(O,W){!W.prefinished&&!W.finalCalled&&(typeof O._final=="function"&&!W.destroyed?(W.finalCalled=!0,A(O,W)):(W.prefinished=!0,O.emit("prefinish")))}function ue(O,W,$){P(W)&&(G(O,W),W.pendingcb===0&&($?(W.pendingcb++,t.nextTick((oe,Z)=>{P(Z)?re(oe,Z):Z.pendingcb--},O,W)):P(W)&&(W.pendingcb++,re(O,W))))}function re(O,W){W.pendingcb--,W.finished=!0;let $=W[te].splice(0);for(let oe=0;oe<$.length;oe++)$[oe]();if(O.emit("finish"),W.autoDestroy){let oe=O._readableState;(!oe||oe.autoDestroy&&(oe.endEmitted||oe.readable===!1))&&O.destroy()}}o(ae.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(O){this._writableState&&(this._writableState.destroyed=O)}},writable:{__proto__:null,get(){let O=this._writableState;return!!O&&O.writable!==!1&&!O.destroyed&&!O.errored&&!O.ending&&!O.ended},set(O){this._writableState&&(this._writableState.writable=!!O)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let O=this._writableState;return O?!O.destroyed&&!O.ending&&O.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var ee=_.destroy;ae.prototype.destroy=function(O,W){let $=this._writableState;return!$.destroyed&&($.bufferedIndex<$.buffered.length||$[te].length)&&t.nextTick(Ee,$),ee.call(this,O,W),this},ae.prototype._undestroy=_.undestroy,ae.prototype._destroy=function(O,W){W(O)},ae.prototype[m.captureRejectionSymbol]=function(O){this.destroy(O)};var me;function he(){return me===void 0&&(me={}),me}ae.fromWeb=function(O,W){return he().newStreamWritableFromWritableStream(O,W)},ae.toWeb=function(O){return he().newWritableStreamFromStreamWritable(O)}}),Wl=ve((e,n)=>{ce(),pe(),fe();var t=Jt(),h=(Je(),Le(Qe)),{isReadable:f,isWritable:a,isIterable:i,isNodeStream:o,isReadableNodeStream:l,isWritableNodeStream:u,isDuplexNodeStream:d}=Bt(),g=Mt(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:b,ERR_INVALID_RETURN_VALUE:w}}=tt(),{destroyer:_}=or(),T=Tt(),M=Yr(),{createDeferredPromise:B}=It(),S=Os(),j=globalThis.Blob||h.Blob,F=typeof j<"u"?function(ne){return ne instanceof j}:function(ne){return!1},R=globalThis.AbortController||$i().AbortController,{FunctionPrototypeCall:C}=qe(),L=class extends T{constructor(ne){super(ne),(ne==null?void 0:ne.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(ne==null?void 0:ne.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};n.exports=function ne(I,z){if(d(I))return I;if(l(I))return X({readable:I});if(u(I))return X({writable:I});if(o(I))return X({writable:!1,readable:!1});if(typeof I=="function"){let{value:Q,write:ye,final:ae,destroy:V}=q(I);if(i(Q))return S(L,Q,{objectMode:!0,write:ye,final:ae,destroy:V});let we=Q==null?void 0:Q.then;if(typeof we=="function"){let se,be=C(we,Q,E=>{if(E!=null)throw new w("nully","body",E)},E=>{_(se,E)});return se=new L({objectMode:!0,readable:!1,write:ye,final(E){ae(async()=>{try{await be,t.nextTick(E,null)}catch(J){t.nextTick(E,J)}})},destroy:V})}throw new w("Iterable, AsyncIterable or AsyncFunction",z,Q)}if(F(I))return ne(I.arrayBuffer());if(i(I))return S(L,I,{objectMode:!0,writable:!1});if(typeof(I==null?void 0:I.writable)=="object"||typeof(I==null?void 0:I.readable)=="object"){let Q=I!=null&&I.readable?l(I==null?void 0:I.readable)?I==null?void 0:I.readable:ne(I.readable):void 0,ye=I!=null&&I.writable?u(I==null?void 0:I.writable)?I==null?void 0:I.writable:ne(I.writable):void 0;return X({readable:Q,writable:ye})}let te=I==null?void 0:I.then;if(typeof te=="function"){let Q;return C(te,I,ye=>{ye!=null&&Q.push(ye),Q.push(null)},ye=>{_(Q,ye)}),Q=new L({objectMode:!0,writable:!1,read(){}})}throw new b(z,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],I)};function q(ne){let{promise:I,resolve:z}=B(),te=new R,Q=te.signal;return{value:ne(async function*(){for(;;){let ye=I;I=null;let{chunk:ae,done:V,cb:we}=await ye;if(t.nextTick(we),V)return;if(Q.aborted)throw new m(void 0,{cause:Q.reason});({promise:I,resolve:z}=B()),yield ae}}(),{signal:Q}),write(ye,ae,V){let we=z;z=null,we({chunk:ye,done:!1,cb:V})},final(ye){let ae=z;z=null,ae({done:!0,cb:ye})},destroy(ye,ae){te.abort(),ae(ye)}}}function X(ne){let I=ne.readable&&typeof ne.readable.read!="function"?M.wrap(ne.readable):ne.readable,z=ne.writable,te=!!f(I),Q=!!a(z),ye,ae,V,we,se;function be(E){let J=we;we=null,J?J(E):E&&se.destroy(E)}return se=new L({readableObjectMode:!!(I!=null&&I.readableObjectMode),writableObjectMode:!!(z!=null&&z.writableObjectMode),readable:te,writable:Q}),Q&&(g(z,E=>{Q=!1,E&&_(I,E),be(E)}),se._write=function(E,J,de){z.write(E,J)?de():ye=de},se._final=function(E){z.end(),ae=E},z.on("drain",function(){if(ye){let E=ye;ye=null,E()}}),z.on("finish",function(){if(ae){let E=ae;ae=null,E()}})),te&&(g(I,E=>{te=!1,E&&_(I,E),be(E)}),I.on("readable",function(){if(V){let E=V;V=null,E()}}),I.on("end",function(){se.push(null)}),se._read=function(){for(;;){let E=I.read();if(E===null){V=se._read;return}if(!se.push(E))return}}),se._destroy=function(E,J){!E&&we!==null&&(E=new m),V=null,ye=null,ae=null,we===null?J(E):(we=J,_(z,E),_(I,E))},se}}),Tt=ve((e,n)=>{ce(),pe(),fe();var{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:h,ObjectKeys:f,ObjectSetPrototypeOf:a}=qe();n.exports=l;var i=Yr(),o=Ps();a(l.prototype,i.prototype),a(l,i);{let m=f(o.prototype);for(let b=0;b<m.length;b++){let w=m[b];l.prototype[w]||(l.prototype[w]=o.prototype[w])}}function l(m){if(!(this instanceof l))return new l(m);i.call(this,m),o.call(this,m),m?(this.allowHalfOpen=m.allowHalfOpen!==!1,m.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),m.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(l.prototype,{writable:{__proto__:null,...h(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...h(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...h(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...h(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...h(o.prototype,"writableLength")},writableFinished:{__proto__:null,...h(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...h(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...h(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...h(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(m){this._readableState&&this._writableState&&(this._readableState.destroyed=m,this._writableState.destroyed=m)}}});var u;function d(){return u===void 0&&(u={}),u}l.fromWeb=function(m,b){return d().newStreamDuplexFromReadableWritablePair(m,b)},l.toWeb=function(m){return d().newReadableWritablePairFromDuplex(m)};var g;l.from=function(m){return g||(g=Wl()),g(m,"body")}}),Us=ve((e,n)=>{ce(),pe(),fe();var{ObjectSetPrototypeOf:t,Symbol:h}=qe();n.exports=l;var{ERR_METHOD_NOT_IMPLEMENTED:f}=tt().codes,a=Tt(),{getHighWaterMark:i}=Hi();t(l.prototype,a.prototype),t(l,a);var o=h("kCallback");function l(g){if(!(this instanceof l))return new l(g);let m=g?i(this,g,"readableHighWaterMark",!0):null;m===0&&(g={...g,highWaterMark:null,readableHighWaterMark:m,writableHighWaterMark:g.writableHighWaterMark||0}),a.call(this,g),this._readableState.sync=!1,this[o]=null,g&&(typeof g.transform=="function"&&(this._transform=g.transform),typeof g.flush=="function"&&(this._flush=g.flush)),this.on("prefinish",d)}function u(g){typeof this._flush=="function"&&!this.destroyed?this._flush((m,b)=>{if(m){g?g(m):this.destroy(m);return}b!=null&&this.push(b),this.push(null),g&&g()}):(this.push(null),g&&g())}function d(){this._final!==u&&u.call(this)}l.prototype._final=u,l.prototype._transform=function(g,m,b){throw new f("_transform()")},l.prototype._write=function(g,m,b){let w=this._readableState,_=this._writableState,T=w.length;this._transform(g,m,(M,B)=>{if(M){b(M);return}B!=null&&this.push(B),_.ended||T===w.length||w.length<w.highWaterMark?b():this[o]=b})},l.prototype._read=function(){if(this[o]){let g=this[o];this[o]=null,g()}}}),Ls=ve((e,n)=>{ce(),pe(),fe();var{ObjectSetPrototypeOf:t}=qe();n.exports=f;var h=Us();t(f.prototype,h.prototype),t(f,h);function f(a){if(!(this instanceof f))return new f(a);h.call(this,a)}f.prototype._transform=function(a,i,o){o(null,a)}}),Ki=ve((e,n)=>{ce(),pe(),fe();var t=Jt(),{ArrayIsArray:h,Promise:f,SymbolAsyncIterator:a}=qe(),i=Mt(),{once:o}=It(),l=or(),u=Tt(),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:m,ERR_MISSING_ARGS:b,ERR_STREAM_DESTROYED:w,ERR_STREAM_PREMATURE_CLOSE:_},AbortError:T}=tt(),{validateFunction:M,validateAbortSignal:B}=Vr(),{isIterable:S,isReadable:j,isReadableNodeStream:F,isNodeStream:R,isTransformStream:C,isWebStream:L,isReadableStream:q,isReadableEnded:X}=Bt(),ne=globalThis.AbortController||$i().AbortController,I,z;function te(J,de,Ee){let le=!1;J.on("close",()=>{le=!0});let P=i(J,{readable:de,writable:Ee},A=>{le=!A});return{destroy:A=>{le||(le=!0,l.destroyer(J,A||new w("pipe")))},cleanup:P}}function Q(J){return M(J[J.length-1],"streams[stream.length - 1]"),J.pop()}function ye(J){if(S(J))return J;if(F(J))return ae(J);throw new g("val",["Readable","Iterable","AsyncIterable"],J)}async function*ae(J){z||(z=Yr()),yield*z.prototype[a].call(J)}async function V(J,de,Ee,{end:le}){let P,A=null,G=ee=>{if(ee&&(P=ee),A){let me=A;A=null,me()}},ue=()=>new f((ee,me)=>{P?me(P):A=()=>{P?me(P):ee()}});de.on("drain",G);let re=i(de,{readable:!1},G);try{de.writableNeedDrain&&await ue();for await(let ee of J)de.write(ee)||await ue();le&&de.end(),await ue(),Ee()}catch(ee){Ee(P!==ee?d(P,ee):ee)}finally{re(),de.off("drain",G)}}async function we(J,de,Ee,{end:le}){C(de)&&(de=de.writable);let P=de.getWriter();try{for await(let A of J)await P.ready,P.write(A).catch(()=>{});await P.ready,le&&await P.close(),Ee()}catch(A){try{await P.abort(A),Ee(A)}catch(G){Ee(G)}}}function se(...J){return be(J,o(Q(J)))}function be(J,de,Ee){if(J.length===1&&h(J[0])&&(J=J[0]),J.length<2)throw new b("streams");let le=new ne,P=le.signal,A=Ee==null?void 0:Ee.signal,G=[];B(A,"options.signal");function ue(){W(new T)}A==null||A.addEventListener("abort",ue);let re,ee,me=[],he=0;function O(N){W(N,--he===0)}function W(N,K){if(N&&(!re||re.code==="ERR_STREAM_PREMATURE_CLOSE")&&(re=N),!(!re&&!K)){for(;me.length;)me.shift()(re);A==null||A.removeEventListener("abort",ue),le.abort(),K&&(re||G.forEach(x=>x()),t.nextTick(de,re,ee))}}let $;for(let N=0;N<J.length;N++){let K=J[N],x=N<J.length-1,D=N>0,H=x||(Ee==null?void 0:Ee.end)!==!1,ie=N===J.length-1;if(R(K)){let p=function(s){s&&s.name!=="AbortError"&&s.code!=="ERR_STREAM_PREMATURE_CLOSE"&&O(s)};if(H){let{destroy:s,cleanup:r}=te(K,x,D);me.push(s),j(K)&&ie&&G.push(r)}K.on("error",p),j(K)&&ie&&G.push(()=>{K.removeListener("error",p)})}if(N===0)if(typeof K=="function"){if($=K({signal:P}),!S($))throw new m("Iterable, AsyncIterable or Stream","source",$)}else S(K)||F(K)||C(K)?$=K:$=u.from(K);else if(typeof K=="function"){if(C($)){var oe;$=ye((oe=$)===null||oe===void 0?void 0:oe.readable)}else $=ye($);if($=K($,{signal:P}),x){if(!S($,!0))throw new m("AsyncIterable",`transform[${N-1}]`,$)}else{var Z;I||(I=Ls());let p=new I({objectMode:!0}),s=(Z=$)===null||Z===void 0?void 0:Z.then;if(typeof s=="function")he++,s.call($,y=>{ee=y,y!=null&&p.write(y),H&&p.end(),t.nextTick(O)},y=>{p.destroy(y),t.nextTick(O,y)});else if(S($,!0))he++,V($,p,O,{end:H});else if(q($)||C($)){let y=$.readable||$;he++,V(y,p,O,{end:H})}else throw new m("AsyncIterable or Promise","destination",$);$=p;let{destroy:r,cleanup:c}=te($,!1,!0);me.push(r),ie&&G.push(c)}}else if(R(K)){if(F($)){he+=2;let p=E($,K,O,{end:H});j(K)&&ie&&G.push(p)}else if(C($)||q($)){let p=$.readable||$;he++,V(p,K,O,{end:H})}else if(S($))he++,V($,K,O,{end:H});else throw new g("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],$);$=K}else if(L(K)){if(F($))he++,we(ye($),K,O,{end:H});else if(q($)||S($))he++,we($,K,O,{end:H});else if(C($))he++,we($.readable,K,O,{end:H});else throw new g("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],$);$=K}else $=u.from(K)}return(P!=null&&P.aborted||A!=null&&A.aborted)&&t.nextTick(ue),$}function E(J,de,Ee,{end:le}){let P=!1;if(de.on("close",()=>{P||Ee(new _)}),J.pipe(de,{end:!1}),le){let A=function(){P=!0,de.end()};X(J)?t.nextTick(A):J.once("end",A)}else Ee();return i(J,{readable:!0,writable:!1},A=>{let G=J._readableState;A&&A.code==="ERR_STREAM_PREMATURE_CLOSE"&&G&&G.ended&&!G.errored&&!G.errorEmitted?J.once("end",Ee).once("error",Ee):Ee(A)}),i(de,{readable:!1,writable:!0},Ee)}n.exports={pipelineImpl:be,pipeline:se}}),Ms=ve((e,n)=>{ce(),pe(),fe();var{pipeline:t}=Ki(),h=Tt(),{destroyer:f}=or(),{isNodeStream:a,isReadable:i,isWritable:o,isWebStream:l,isTransformStream:u,isWritableStream:d,isReadableStream:g}=Bt(),{AbortError:m,codes:{ERR_INVALID_ARG_VALUE:b,ERR_MISSING_ARGS:w}}=tt(),_=Mt();n.exports=function(...T){if(T.length===0)throw new w("streams");if(T.length===1)return h.from(T[0]);let M=[...T];if(typeof T[0]=="function"&&(T[0]=h.from(T[0])),typeof T[T.length-1]=="function"){let I=T.length-1;T[I]=h.from(T[I])}for(let I=0;I<T.length;++I)if(!(!a(T[I])&&!l(T[I]))){if(I<T.length-1&&!(i(T[I])||g(T[I])||u(T[I])))throw new b(`streams[${I}]`,M[I],"must be readable");if(I>0&&!(o(T[I])||d(T[I])||u(T[I])))throw new b(`streams[${I}]`,M[I],"must be writable")}let B,S,j,F,R;function C(I){let z=F;F=null,z?z(I):I?R.destroy(I):!ne&&!X&&R.destroy()}let L=T[0],q=t(T,C),X=!!(o(L)||d(L)||u(L)),ne=!!(i(q)||g(q)||u(q));if(R=new h({writableObjectMode:!!(L!=null&&L.writableObjectMode),readableObjectMode:!!(q!=null&&q.writableObjectMode),writable:X,readable:ne}),X){if(a(L))R._write=function(z,te,Q){L.write(z,te)?Q():B=Q},R._final=function(z){L.end(),S=z},L.on("drain",function(){if(B){let z=B;B=null,z()}});else if(l(L)){let z=(u(L)?L.writable:L).getWriter();R._write=async function(te,Q,ye){try{await z.ready,z.write(te).catch(()=>{}),ye()}catch(ae){ye(ae)}},R._final=async function(te){try{await z.ready,z.close().catch(()=>{}),S=te}catch(Q){te(Q)}}}let I=u(q)?q.readable:q;_(I,()=>{if(S){let z=S;S=null,z()}})}if(ne){if(a(q))q.on("readable",function(){if(j){let I=j;j=null,I()}}),q.on("end",function(){R.push(null)}),R._read=function(){for(;;){let I=q.read();if(I===null){j=R._read;return}if(!R.push(I))return}};else if(l(q)){let I=(u(q)?q.readable:q).getReader();R._read=async function(){for(;;)try{let{value:z,done:te}=await I.read();if(!R.push(z))return;if(te){R.push(null);return}}catch{return}}}}return R._destroy=function(I,z){!I&&F!==null&&(I=new m),j=null,B=null,S=null,F===null?z(I):(F=z,a(q)&&f(q,I))},R}}),$l=ve((e,n)=>{ce(),pe(),fe();var t=globalThis.AbortController||$i().AbortController,{codes:{ERR_INVALID_ARG_VALUE:h,ERR_INVALID_ARG_TYPE:f,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:i},AbortError:o}=tt(),{validateAbortSignal:l,validateInteger:u,validateObject:d}=Vr(),g=qe().Symbol("kWeak"),{finished:m}=Mt(),b=Ms(),{addAbortSignalNoValidate:w}=zr(),{isWritable:_,isNodeStream:T}=Bt(),{ArrayPrototypePush:M,MathFloor:B,Number:S,NumberIsNaN:j,Promise:F,PromiseReject:R,PromisePrototypeThen:C,Symbol:L}=qe(),q=L("kEmpty"),X=L("kEof");function ne(le,P){if(P!=null&&d(P,"options"),(P==null?void 0:P.signal)!=null&&l(P.signal,"options.signal"),T(le)&&!_(le))throw new h("stream",le,"must be writable");let A=b(this,le);return P!=null&&P.signal&&w(P.signal,A),A}function I(le,P){if(typeof le!="function")throw new f("fn",["Function","AsyncFunction"],le);P!=null&&d(P,"options"),(P==null?void 0:P.signal)!=null&&l(P.signal,"options.signal");let A=1;return(P==null?void 0:P.concurrency)!=null&&(A=B(P.concurrency)),u(A,"concurrency",1),(async function*(){var G,ue;let re=new t,ee=this,me=[],he=re.signal,O={signal:he},W=()=>re.abort();P!=null&&(G=P.signal)!==null&&G!==void 0&&G.aborted&&W(),P==null||(ue=P.signal)===null||ue===void 0||ue.addEventListener("abort",W);let $,oe,Z=!1;function N(){Z=!0}async function K(){try{for await(let H of ee){var x;if(Z)return;if(he.aborted)throw new o;try{H=le(H,O)}catch(ie){H=R(ie)}H!==q&&(typeof((x=H)===null||x===void 0?void 0:x.catch)=="function"&&H.catch(N),me.push(H),$&&($(),$=null),!Z&&me.length&&me.length>=A&&await new F(ie=>{oe=ie}))}me.push(X)}catch(H){let ie=R(H);C(ie,void 0,N),me.push(ie)}finally{var D;Z=!0,$&&($(),$=null),P==null||(D=P.signal)===null||D===void 0||D.removeEventListener("abort",W)}}K();try{for(;;){for(;me.length>0;){let x=await me[0];if(x===X)return;if(he.aborted)throw new o;x!==q&&(yield x),me.shift(),oe&&(oe(),oe=null)}await new F(x=>{$=x})}}finally{re.abort(),Z=!0,oe&&(oe(),oe=null)}}).call(this)}function z(le=void 0){return le!=null&&d(le,"options"),(le==null?void 0:le.signal)!=null&&l(le.signal,"options.signal"),(async function*(){let P=0;for await(let G of this){var A;if(le!=null&&(A=le.signal)!==null&&A!==void 0&&A.aborted)throw new o({cause:le.signal.reason});yield[P++,G]}}).call(this)}async function te(le,P=void 0){for await(let A of V.call(this,le,P))return!0;return!1}async function Q(le,P=void 0){if(typeof le!="function")throw new f("fn",["Function","AsyncFunction"],le);return!await te.call(this,async(...A)=>!await le(...A),P)}async function ye(le,P){for await(let A of V.call(this,le,P))return A}async function ae(le,P){if(typeof le!="function")throw new f("fn",["Function","AsyncFunction"],le);async function A(G,ue){return await le(G,ue),q}for await(let G of I.call(this,A,P));}function V(le,P){if(typeof le!="function")throw new f("fn",["Function","AsyncFunction"],le);async function A(G,ue){return await le(G,ue)?G:q}return I.call(this,A,P)}var we=class extends a{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function se(le,P,A){var G;if(typeof le!="function")throw new f("reducer",["Function","AsyncFunction"],le);A!=null&&d(A,"options"),(A==null?void 0:A.signal)!=null&&l(A.signal,"options.signal");let ue=arguments.length>1;if(A!=null&&(G=A.signal)!==null&&G!==void 0&&G.aborted){let O=new o(void 0,{cause:A.signal.reason});throw this.once("error",()=>{}),await m(this.destroy(O)),O}let re=new t,ee=re.signal;if(A!=null&&A.signal){let O={once:!0,[g]:this};A.signal.addEventListener("abort",()=>re.abort(),O)}let me=!1;try{for await(let O of this){var he;if(me=!0,A!=null&&(he=A.signal)!==null&&he!==void 0&&he.aborted)throw new o;ue?P=await le(P,O,{signal:ee}):(P=O,ue=!0)}if(!me&&!ue)throw new we}finally{re.abort()}return P}async function be(le){le!=null&&d(le,"options"),(le==null?void 0:le.signal)!=null&&l(le.signal,"options.signal");let P=[];for await(let G of this){var A;if(le!=null&&(A=le.signal)!==null&&A!==void 0&&A.aborted)throw new o(void 0,{cause:le.signal.reason});M(P,G)}return P}function E(le,P){let A=I.call(this,le,P);return(async function*(){for await(let G of A)yield*G}).call(this)}function J(le){if(le=S(le),j(le))return 0;if(le<0)throw new i("number",">= 0",le);return le}function de(le,P=void 0){return P!=null&&d(P,"options"),(P==null?void 0:P.signal)!=null&&l(P.signal,"options.signal"),le=J(le),(async function*(){var A;if(P!=null&&(A=P.signal)!==null&&A!==void 0&&A.aborted)throw new o;for await(let ue of this){var G;if(P!=null&&(G=P.signal)!==null&&G!==void 0&&G.aborted)throw new o;le--<=0&&(yield ue)}}).call(this)}function Ee(le,P=void 0){return P!=null&&d(P,"options"),(P==null?void 0:P.signal)!=null&&l(P.signal,"options.signal"),le=J(le),(async function*(){var A;if(P!=null&&(A=P.signal)!==null&&A!==void 0&&A.aborted)throw new o;for await(let ue of this){var G;if(P!=null&&(G=P.signal)!==null&&G!==void 0&&G.aborted)throw new o;if(le-- >0)yield ue;else return}}).call(this)}n.exports.streamReturningOperators={asIndexedPairs:z,drop:de,filter:V,flatMap:E,map:I,take:Ee,compose:ne},n.exports.promiseReturningOperators={every:Q,forEach:ae,reduce:se,toArray:be,some:te,find:ye}}),Ns=ve((e,n)=>{ce(),pe(),fe();var{ArrayPrototypePop:t,Promise:h}=qe(),{isIterable:f,isNodeStream:a,isWebStream:i}=Bt(),{pipelineImpl:o}=Ki(),{finished:l}=Mt();js();function u(...d){return new h((g,m)=>{let b,w,_=d[d.length-1];if(_&&typeof _=="object"&&!a(_)&&!f(_)&&!i(_)){let T=t(d);b=T.signal,w=T.end}o(d,(T,M)=>{T?m(T):g(M)},{signal:b,end:w})})}n.exports={finished:l,pipeline:u}}),js=ve((e,n)=>{ce(),pe(),fe();var{Buffer:t}=(Je(),Le(Qe)),{ObjectDefineProperty:h,ObjectKeys:f,ReflectApply:a}=qe(),{promisify:{custom:i}}=It(),{streamReturningOperators:o,promiseReturningOperators:l}=$l(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=tt(),d=Ms(),{pipeline:g}=Ki(),{destroyer:m}=or(),b=Mt(),w=Ns(),_=Bt(),T=n.exports=qi().Stream;T.isDisturbed=_.isDisturbed,T.isErrored=_.isErrored,T.isReadable=_.isReadable,T.Readable=Yr();for(let B of f(o)){let S=function(...F){if(new.target)throw u();return T.Readable.from(a(j,this,F))},j=o[B];h(S,"name",{__proto__:null,value:j.name}),h(S,"length",{__proto__:null,value:j.length}),h(T.Readable.prototype,B,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}for(let B of f(l)){let S=function(...F){if(new.target)throw u();return a(j,this,F)},j=l[B];h(S,"name",{__proto__:null,value:j.name}),h(S,"length",{__proto__:null,value:j.length}),h(T.Readable.prototype,B,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}T.Writable=Ps(),T.Duplex=Tt(),T.Transform=Us(),T.PassThrough=Ls(),T.pipeline=g;var{addAbortSignal:M}=zr();T.addAbortSignal=M,T.finished=b,T.destroy=m,T.compose=d,h(T,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return w}}),h(g,i,{__proto__:null,enumerable:!0,get(){return w.pipeline}}),h(b,i,{__proto__:null,enumerable:!0,get(){return w.finished}}),T.Stream=T,T._isUint8Array=function(B){return B instanceof Uint8Array},T._uint8ArrayToBuffer=function(B){return t.from(B.buffer,B.byteOffset,B.byteLength)}}),Zt=ve((e,n)=>{ce(),pe(),fe();var t=js(),h=Ns(),f=t.Readable.destroy;n.exports=t.Readable,n.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,n.exports._isUint8Array=t._isUint8Array,n.exports.isDisturbed=t.isDisturbed,n.exports.isErrored=t.isErrored,n.exports.isReadable=t.isReadable,n.exports.Readable=t.Readable,n.exports.Writable=t.Writable,n.exports.Duplex=t.Duplex,n.exports.Transform=t.Transform,n.exports.PassThrough=t.PassThrough,n.exports.addAbortSignal=t.addAbortSignal,n.exports.finished=t.finished,n.exports.destroy=t.destroy,n.exports.destroy=f,n.exports.pipeline=t.pipeline,n.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return h}}),n.exports.Stream=t.Stream,n.exports.default=n.exports}),ql=ve((e,n)=>{ce(),pe(),fe(),typeof Object.create=="function"?n.exports=function(t,h){h&&(t.super_=h,t.prototype=Object.create(h.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(t,h){if(h){t.super_=h;var f=function(){};f.prototype=h.prototype,t.prototype=new f,t.prototype.constructor=t}}}),Hl=ve((e,n)=>{ce(),pe(),fe();var{Buffer:t}=(Je(),Le(Qe)),h=Symbol.for("BufferList");function f(a){if(!(this instanceof f))return new f(a);f._init.call(this,a)}f._init=function(a){Object.defineProperty(this,h,{value:!0}),this._bufs=[],this.length=0,a&&this.append(a)},f.prototype._new=function(a){return new f(a)},f.prototype._offset=function(a){if(a===0)return[0,0];let i=0;for(let o=0;o<this._bufs.length;o++){let l=i+this._bufs[o].length;if(a<l||o===this._bufs.length-1)return[o,a-i];i=l}},f.prototype._reverseOffset=function(a){let i=a[0],o=a[1];for(let l=0;l<i;l++)o+=this._bufs[l].length;return o},f.prototype.get=function(a){if(a>this.length||a<0)return;let i=this._offset(a);return this._bufs[i[0]][i[1]]},f.prototype.slice=function(a,i){return typeof a=="number"&&a<0&&(a+=this.length),typeof i=="number"&&i<0&&(i+=this.length),this.copy(null,0,a,i)},f.prototype.copy=function(a,i,o,l){if((typeof o!="number"||o<0)&&(o=0),(typeof l!="number"||l>this.length)&&(l=this.length),o>=this.length||l<=0)return a||t.alloc(0);let u=!!a,d=this._offset(o),g=l-o,m=g,b=u&&i||0,w=d[1];if(o===0&&l===this.length){if(!u)return this._bufs.length===1?this._bufs[0]:t.concat(this._bufs,this.length);for(let _=0;_<this._bufs.length;_++)this._bufs[_].copy(a,b),b+=this._bufs[_].length;return a}if(m<=this._bufs[d[0]].length-w)return u?this._bufs[d[0]].copy(a,i,w,w+m):this._bufs[d[0]].slice(w,w+m);u||(a=t.allocUnsafe(g));for(let _=d[0];_<this._bufs.length;_++){let T=this._bufs[_].length-w;if(m>T)this._bufs[_].copy(a,b,w),b+=T;else{this._bufs[_].copy(a,b,w,w+m),b+=T;break}m-=T,w&&(w=0)}return a.length>b?a.slice(0,b):a},f.prototype.shallowSlice=function(a,i){if(a=a||0,i=typeof i!="number"?this.length:i,a<0&&(a+=this.length),i<0&&(i+=this.length),a===i)return this._new();let o=this._offset(a),l=this._offset(i),u=this._bufs.slice(o[0],l[0]+1);return l[1]===0?u.pop():u[u.length-1]=u[u.length-1].slice(0,l[1]),o[1]!==0&&(u[0]=u[0].slice(o[1])),this._new(u)},f.prototype.toString=function(a,i,o){return this.slice(i,o).toString(a)},f.prototype.consume=function(a){if(a=Math.trunc(a),Number.isNaN(a)||a<=0)return this;for(;this._bufs.length;)if(a>=this._bufs[0].length)a-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(a),this.length-=a;break}return this},f.prototype.duplicate=function(){let a=this._new();for(let i=0;i<this._bufs.length;i++)a.append(this._bufs[i]);return a},f.prototype.append=function(a){if(a==null)return this;if(a.buffer)this._appendBuffer(t.from(a.buffer,a.byteOffset,a.byteLength));else if(Array.isArray(a))for(let i=0;i<a.length;i++)this.append(a[i]);else if(this._isBufferList(a))for(let i=0;i<a._bufs.length;i++)this.append(a._bufs[i]);else typeof a=="number"&&(a=a.toString()),this._appendBuffer(t.from(a));return this},f.prototype._appendBuffer=function(a){this._bufs.push(a),this.length+=a.length},f.prototype.indexOf=function(a,i,o){if(o===void 0&&typeof i=="string"&&(o=i,i=void 0),typeof a=="function"||Array.isArray(a))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof a=="number"?a=t.from([a]):typeof a=="string"?a=t.from(a,o):this._isBufferList(a)?a=a.slice():Array.isArray(a.buffer)?a=t.from(a.buffer,a.byteOffset,a.byteLength):t.isBuffer(a)||(a=t.from(a)),i=Number(i||0),isNaN(i)&&(i=0),i<0&&(i=this.length+i),i<0&&(i=0),a.length===0)return i>this.length?this.length:i;let l=this._offset(i),u=l[0],d=l[1];for(;u<this._bufs.length;u++){let g=this._bufs[u];for(;d<g.length;)if(g.length-d>=a.length){let m=g.indexOf(a,d);if(m!==-1)return this._reverseOffset([u,m]);d=g.length-a.length+1}else{let m=this._reverseOffset([u,d]);if(this._match(m,a))return m;d++}d=0}return-1},f.prototype._match=function(a,i){if(this.length-a<i.length)return!1;for(let o=0;o<i.length;o++)if(this.get(a+o)!==i[o])return!1;return!0},function(){let a={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let i in a)(function(o){a[o]===null?f.prototype[o]=function(l,u){return this.slice(l,l+u)[o](0,u)}:f.prototype[o]=function(l=0){return this.slice(l,l+a[o])[o](0)}})(i)}(),f.prototype._isBufferList=function(a){return a instanceof f||f.isBufferList(a)},f.isBufferList=function(a){return a!=null&&a[h]},n.exports=f}),Vl=ve((e,n)=>{ce(),pe(),fe();var t=Zt().Duplex,h=ql(),f=Hl();function a(i){if(!(this instanceof a))return new a(i);if(typeof i=="function"){this._callback=i;let o=(function(l){this._callback&&(this._callback(l),this._callback=null)}).bind(this);this.on("pipe",function(l){l.on("error",o)}),this.on("unpipe",function(l){l.removeListener("error",o)}),i=null}f._init.call(this,i),t.call(this)}h(a,t),Object.assign(a.prototype,f.prototype),a.prototype._new=function(i){return new a(i)},a.prototype._write=function(i,o,l){this._appendBuffer(i),typeof l=="function"&&l()},a.prototype._read=function(i){if(!this.length)return this.push(null);i=Math.min(i,this.length),this.push(this.slice(0,i)),this.consume(i)},a.prototype.end=function(i){t.prototype.end.call(this,i),this._callback&&(this._callback(null,this.slice()),this._callback=null)},a.prototype._destroy=function(i,o){this._bufs.length=0,this.length=0,o(i)},a.prototype._isBufferList=function(i){return i instanceof a||i instanceof f||a.isBufferList(i)},a.isBufferList=f.isBufferList,n.exports=a,n.exports.BufferListStream=a,n.exports.BufferList=f}),zl=ve((e,n)=>{ce(),pe(),fe();var t=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};n.exports=t}),Fs=ve((e,n)=>{ce(),pe(),fe();var t=n.exports,{Buffer:h}=(Je(),Le(Qe));t.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},t.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},t.requiredHeaderFlagsErrors={};for(let a in t.requiredHeaderFlags){let i=t.requiredHeaderFlags[a];t.requiredHeaderFlagsErrors[a]="Invalid header flag bits, must be 0x"+i.toString(16)+" for "+t.types[a]+" packet"}t.codes={};for(let a in t.types){let i=t.types[a];t.codes[i]=a}t.CMD_SHIFT=4,t.CMD_MASK=240,t.DUP_MASK=8,t.QOS_MASK=3,t.QOS_SHIFT=1,t.RETAIN_MASK=1,t.VARBYTEINT_MASK=127,t.VARBYTEINT_FIN_MASK=128,t.VARBYTEINT_MAX=268435455,t.SESSIONPRESENT_MASK=1,t.SESSIONPRESENT_HEADER=h.from([t.SESSIONPRESENT_MASK]),t.CONNACK_HEADER=h.from([t.codes.connack<<t.CMD_SHIFT]),t.USERNAME_MASK=128,t.PASSWORD_MASK=64,t.WILL_RETAIN_MASK=32,t.WILL_QOS_MASK=24,t.WILL_QOS_SHIFT=3,t.WILL_FLAG_MASK=4,t.CLEAN_SESSION_MASK=2,t.CONNECT_HEADER=h.from([t.codes.connect<<t.CMD_SHIFT]),t.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},t.propertiesCodes={};for(let a in t.properties){let i=t.properties[a];t.propertiesCodes[i]=a}t.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function f(a){return[0,1,2].map(i=>[0,1].map(o=>[0,1].map(l=>{let u=h.alloc(1);return u.writeUInt8(t.codes[a]<<t.CMD_SHIFT|(o?t.DUP_MASK:0)|i<<t.QOS_SHIFT|l,0,!0),u})))}t.PUBLISH_HEADER=f("publish"),t.SUBSCRIBE_HEADER=f("subscribe"),t.SUBSCRIBE_OPTIONS_QOS_MASK=3,t.SUBSCRIBE_OPTIONS_NL_MASK=1,t.SUBSCRIBE_OPTIONS_NL_SHIFT=2,t.SUBSCRIBE_OPTIONS_RAP_MASK=1,t.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,t.SUBSCRIBE_OPTIONS_RH_MASK=3,t.SUBSCRIBE_OPTIONS_RH_SHIFT=4,t.SUBSCRIBE_OPTIONS_RH=[0,16,32],t.SUBSCRIBE_OPTIONS_NL=4,t.SUBSCRIBE_OPTIONS_RAP=8,t.SUBSCRIBE_OPTIONS_QOS=[0,1,2],t.UNSUBSCRIBE_HEADER=f("unsubscribe"),t.ACKS={unsuback:f("unsuback"),puback:f("puback"),pubcomp:f("pubcomp"),pubrel:f("pubrel"),pubrec:f("pubrec")},t.SUBACK_HEADER=h.from([t.codes.suback<<t.CMD_SHIFT]),t.VERSION3=h.from([3]),t.VERSION4=h.from([4]),t.VERSION5=h.from([5]),t.VERSION131=h.from([131]),t.VERSION132=h.from([132]),t.QOS=[0,1,2].map(a=>h.from([a])),t.EMPTY={pingreq:h.from([t.codes.pingreq<<4,0]),pingresp:h.from([t.codes.pingresp<<4,0]),disconnect:h.from([t.codes.disconnect<<4,0])},t.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},t.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},t.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},t.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),Kl=ve((e,n)=>{ce(),pe(),fe();var t=1e3,h=t*60,f=h*60,a=f*24,i=a*7,o=a*365.25;n.exports=function(m,b){b=b||{};var w=typeof m;if(w==="string"&&m.length>0)return l(m);if(w==="number"&&isFinite(m))return b.long?d(m):u(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))};function l(m){if(m=String(m),!(m.length>100)){var b=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(m);if(b){var w=parseFloat(b[1]),_=(b[2]||"ms").toLowerCase();switch(_){case"years":case"year":case"yrs":case"yr":case"y":return w*o;case"weeks":case"week":case"w":return w*i;case"days":case"day":case"d":return w*a;case"hours":case"hour":case"hrs":case"hr":case"h":return w*f;case"minutes":case"minute":case"mins":case"min":case"m":return w*h;case"seconds":case"second":case"secs":case"sec":case"s":return w*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return w;default:return}}}}function u(m){var b=Math.abs(m);return b>=a?Math.round(m/a)+"d":b>=f?Math.round(m/f)+"h":b>=h?Math.round(m/h)+"m":b>=t?Math.round(m/t)+"s":m+"ms"}function d(m){var b=Math.abs(m);return b>=a?g(m,b,a,"day"):b>=f?g(m,b,f,"hour"):b>=h?g(m,b,h,"minute"):b>=t?g(m,b,t,"second"):m+" ms"}function g(m,b,w,_){var T=b>=w*1.5;return Math.round(m/w)+" "+_+(T?"s":"")}}),Yl=ve((e,n)=>{ce(),pe(),fe();function t(h){a.debug=a,a.default=a,a.coerce=g,a.disable=l,a.enable=o,a.enabled=u,a.humanize=Kl(),a.destroy=m,Object.keys(h).forEach(b=>{a[b]=h[b]}),a.names=[],a.skips=[],a.formatters={};function f(b){let w=0;for(let _=0;_<b.length;_++)w=(w<<5)-w+b.charCodeAt(_),w|=0;return a.colors[Math.abs(w)%a.colors.length]}a.selectColor=f;function a(b){let w,_=null,T,M;function B(...S){if(!B.enabled)return;let j=B,F=Number(new Date),R=F-(w||F);j.diff=R,j.prev=w,j.curr=F,w=F,S[0]=a.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let C=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(L,q)=>{if(L==="%%")return"%";C++;let X=a.formatters[q];if(typeof X=="function"){let ne=S[C];L=X.call(j,ne),S.splice(C,1),C--}return L}),a.formatArgs.call(j,S),(j.log||a.log).apply(j,S)}return B.namespace=b,B.useColors=a.useColors(),B.color=a.selectColor(b),B.extend=i,B.destroy=a.destroy,Object.defineProperty(B,"enabled",{enumerable:!0,configurable:!1,get:()=>_!==null?_:(T!==a.namespaces&&(T=a.namespaces,M=a.enabled(b)),M),set:S=>{_=S}}),typeof a.init=="function"&&a.init(B),B}function i(b,w){let _=a(this.namespace+(typeof w>"u"?":":w)+b);return _.log=this.log,_}function o(b){a.save(b),a.namespaces=b,a.names=[],a.skips=[];let w,_=(typeof b=="string"?b:"").split(/[\s,]+/),T=_.length;for(w=0;w<T;w++)_[w]&&(b=_[w].replace(/\*/g,".*?"),b[0]==="-"?a.skips.push(new RegExp("^"+b.slice(1)+"$")):a.names.push(new RegExp("^"+b+"$")))}function l(){let b=[...a.names.map(d),...a.skips.map(d).map(w=>"-"+w)].join(",");return a.enable(""),b}function u(b){if(b[b.length-1]==="*")return!0;let w,_;for(w=0,_=a.skips.length;w<_;w++)if(a.skips[w].test(b))return!1;for(w=0,_=a.names.length;w<_;w++)if(a.names[w].test(b))return!0;return!1}function d(b){return b.toString().substring(2,b.toString().length-2).replace(/\.\*\?$/,"*")}function g(b){return b instanceof Error?b.stack||b.message:b}function m(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return a.enable(a.load()),a}n.exports=t}),kt=ve((e,n)=>{ce(),pe(),fe(),e.formatArgs=h,e.save=f,e.load=a,e.useColors=t,e.storage=i(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function h(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;let u="color: "+this.color;l.splice(1,0,u,"color: inherit");let d=0,g=0;l[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(d++,m==="%c"&&(g=d))}),l.splice(g,0,u)}e.log=console.debug||console.log||(()=>{});function f(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function a(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof Re<"u"&&"env"in Re&&(l=Re.env.DEBUG),l}function i(){try{return localStorage}catch{}}n.exports=Yl()(e);var{formatters:o}=n.exports;o.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}}),Gl=ve((e,n)=>{ce(),pe(),fe();var t=Vl(),{EventEmitter:h}=(sr(),Le(Xt)),f=zl(),a=Fs(),i=kt()("mqtt-packet:parser"),o=class Ai extends h{constructor(){super(),this.parser=this.constructor.parser}static parser(u){return this instanceof Ai?(this.settings=u||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new Ai().parser(u)}_resetState(){i("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new f,this.error=null,this._list=t(),this._stateCounter=0}parse(u){for(this.error&&this._resetState(),this._list.append(u),i("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,i("parse: state complete. _stateCounter is now: %d",this._stateCounter),i("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return i("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let u=this._list.readUInt8(0),d=u>>a.CMD_SHIFT;this.packet.cmd=a.types[d];let g=u&15,m=a.requiredHeaderFlags[d];return m!=null&&g!==m?this._emitError(new Error(a.requiredHeaderFlagsErrors[d])):(this.packet.retain=(u&a.RETAIN_MASK)!==0,this.packet.qos=u>>a.QOS_SHIFT&a.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(u&a.DUP_MASK)!==0,i("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let u=this._parseVarByteNum(!0);return u&&(this.packet.length=u.value,this._list.consume(u.bytes)),i("_parseLength %d",u.value),!!u}_parsePayload(){i("_parsePayload: payload %O",this._list);let u=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}u=!0}return i("_parsePayload complete result: %s",u),u}_parseConnect(){i("_parseConnect");let u,d,g,m,b={},w=this.packet,_=this._parseString();if(_===null)return this._emitError(new Error("Cannot parse protocolId"));if(_!=="MQTT"&&_!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(w.protocolId=_,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(w.protocolVersion=this._list.readUInt8(this._pos),w.protocolVersion>=128&&(w.bridgeMode=!0,w.protocolVersion=w.protocolVersion-128),w.protocolVersion!==3&&w.protocolVersion!==4&&w.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));b.username=this._list.readUInt8(this._pos)&a.USERNAME_MASK,b.password=this._list.readUInt8(this._pos)&a.PASSWORD_MASK,b.will=this._list.readUInt8(this._pos)&a.WILL_FLAG_MASK;let T=!!(this._list.readUInt8(this._pos)&a.WILL_RETAIN_MASK),M=(this._list.readUInt8(this._pos)&a.WILL_QOS_MASK)>>a.WILL_QOS_SHIFT;if(b.will)w.will={},w.will.retain=T,w.will.qos=M;else{if(T)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(M)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(w.clean=(this._list.readUInt8(this._pos)&a.CLEAN_SESSION_MASK)!==0,this._pos++,w.keepalive=this._parseNum(),w.keepalive===-1)return this._emitError(new Error("Packet too short"));if(w.protocolVersion===5){let S=this._parseProperties();Object.getOwnPropertyNames(S).length&&(w.properties=S)}let B=this._parseString();if(B===null)return this._emitError(new Error("Packet too short"));if(w.clientId=B,i("_parseConnect: packet.clientId: %s",w.clientId),b.will){if(w.protocolVersion===5){let S=this._parseProperties();Object.getOwnPropertyNames(S).length&&(w.will.properties=S)}if(u=this._parseString(),u===null)return this._emitError(new Error("Cannot parse will topic"));if(w.will.topic=u,i("_parseConnect: packet.will.topic: %s",w.will.topic),d=this._parseBuffer(),d===null)return this._emitError(new Error("Cannot parse will payload"));w.will.payload=d,i("_parseConnect: packet.will.paylaod: %s",w.will.payload)}if(b.username){if(m=this._parseString(),m===null)return this._emitError(new Error("Cannot parse username"));w.username=m,i("_parseConnect: packet.username: %s",w.username)}if(b.password){if(g=this._parseBuffer(),g===null)return this._emitError(new Error("Cannot parse password"));w.password=g}return this.settings=w,i("_parseConnect: complete"),w}_parseConnack(){i("_parseConnack");let u=this.packet;if(this._list.length<1)return null;let d=this._list.readUInt8(this._pos++);if(d>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(u.sessionPresent=!!(d&a.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?u.reasonCode=this._list.readUInt8(this._pos++):u.reasonCode=0;else{if(this._list.length<2)return null;u.returnCode=this._list.readUInt8(this._pos++)}if(u.returnCode===-1||u.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let g=this._parseProperties();Object.getOwnPropertyNames(g).length&&(u.properties=g)}i("_parseConnack: complete")}_parsePublish(){i("_parsePublish");let u=this.packet;if(u.topic=this._parseString(),u.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(u.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(u.properties=d)}u.payload=this._list.slice(this._pos,u.length),i("_parsePublish: payload from buffer list: %o",u.payload)}}_parseSubscribe(){i("_parseSubscribe");let u=this.packet,d,g,m,b,w,_,T;if(u.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let M=this._parseProperties();Object.getOwnPropertyNames(M).length&&(u.properties=M)}if(u.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<u.length;){if(d=this._parseString(),d===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=u.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(g=this._parseByte(),this.settings.protocolVersion===5){if(g&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(g&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(m=g&a.SUBSCRIBE_OPTIONS_QOS_MASK,m>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(_=(g>>a.SUBSCRIBE_OPTIONS_NL_SHIFT&a.SUBSCRIBE_OPTIONS_NL_MASK)!==0,w=(g>>a.SUBSCRIBE_OPTIONS_RAP_SHIFT&a.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,b=g>>a.SUBSCRIBE_OPTIONS_RH_SHIFT&a.SUBSCRIBE_OPTIONS_RH_MASK,b>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));T={topic:d,qos:m},this.settings.protocolVersion===5?(T.nl=_,T.rap=w,T.rh=b):this.settings.bridgeMode&&(T.rh=0,T.rap=!0,T.nl=!0),i("_parseSubscribe: push subscription `%s` to subscription",T),u.subscriptions.push(T)}}}_parseSuback(){i("_parseSuback");let u=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(u.properties=d)}if(u.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let d=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!a.MQTT5_SUBACK_CODES[d])return this._emitError(new Error("Invalid suback code"))}else if(d>2&&d!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(d)}}}_parseUnsubscribe(){i("_parseUnsubscribe");let u=this.packet;if(u.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(u.properties=d)}if(u.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<u.length;){let d=this._parseString();if(d===null)return this._emitError(new Error("Cannot parse topic"));i("_parseUnsubscribe: push topic `%s` to unsubscriptions",d),u.unsubscriptions.push(d)}}}_parseUnsuback(){i("_parseUnsuback");let u=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&u.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(u.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let d=this._parseProperties();for(Object.getOwnPropertyNames(d).length&&(u.properties=d),u.granted=[];this._pos<this.packet.length;){let g=this._list.readUInt8(this._pos++);if(!a.MQTT5_UNSUBACK_CODES[g])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(g)}}}_parseConfirmation(){i("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let u=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(u.length>2){switch(u.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!a.MQTT5_PUBACK_PUBREC_CODES[u.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!a.MQTT5_PUBREL_PUBCOMP_CODES[u.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}i("_parseConfirmation: packet.reasonCode `%d`",u.reasonCode)}else u.reasonCode=0;if(u.length>3){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(u.properties=d)}}return!0}_parseDisconnect(){let u=this.packet;if(i("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(u.reasonCode=this._parseByte(),a.MQTT5_DISCONNECT_CODES[u.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):u.reasonCode=0;let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(u.properties=d)}return i("_parseDisconnect result: true"),!0}_parseAuth(){i("_parseAuth");let u=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(u.reasonCode=this._parseByte(),!a.MQTT5_AUTH_CODES[u.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let d=this._parseProperties();return Object.getOwnPropertyNames(d).length&&(u.properties=d),i("_parseAuth: result: true"),!0}_parseMessageId(){let u=this.packet;return u.messageId=this._parseNum(),u.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(i("_parseMessageId: packet.messageId %d",u.messageId),!0)}_parseString(u){let d=this._parseNum(),g=d+this._pos;if(d===-1||g>this._list.length||g>this.packet.length)return null;let m=this._list.toString("utf8",this._pos,g);return this._pos+=d,i("_parseString: result: %s",m),m}_parseStringPair(){return i("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let u=this._parseNum(),d=u+this._pos;if(u===-1||d>this._list.length||d>this.packet.length)return null;let g=this._list.slice(this._pos,d);return this._pos+=u,i("_parseBuffer: result: %o",g),g}_parseNum(){if(this._list.length-this._pos<2)return-1;let u=this._list.readUInt16BE(this._pos);return this._pos+=2,i("_parseNum: result: %s",u),u}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let u=this._list.readUInt32BE(this._pos);return this._pos+=4,i("_parse4ByteNum: result: %s",u),u}_parseVarByteNum(u){i("_parseVarByteNum");let d=4,g=0,m=1,b=0,w=!1,_,T=this._pos?this._pos:0;for(;g<d&&T+g<this._list.length;){if(_=this._list.readUInt8(T+g++),b+=m*(_&a.VARBYTEINT_MASK),m*=128,!(_&a.VARBYTEINT_FIN_MASK)){w=!0;break}if(this._list.length<=g)break}return!w&&g===d&&this._list.length>=g&&this._emitError(new Error("Invalid variable byte integer")),T&&(this._pos+=g),w?u?w={bytes:g,value:b}:w=b:w=!1,i("_parseVarByteNum: result: %o",w),w}_parseByte(){let u;return this._pos<this._list.length&&(u=this._list.readUInt8(this._pos),this._pos++),i("_parseByte: result: %o",u),u}_parseByType(u){switch(i("_parseByType: type: %s",u),u){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){i("_parseProperties");let u=this._parseVarByteNum(),d=this._pos+u,g={};for(;this._pos<d;){let m=this._parseByte();if(!m)return this._emitError(new Error("Cannot parse property code type")),!1;let b=a.propertiesCodes[m];if(!b)return this._emitError(new Error("Unknown property")),!1;if(b==="userProperties"){g[b]||(g[b]=Object.create(null));let w=this._parseByType(a.propertiesTypes[b]);if(g[b][w.name])if(Array.isArray(g[b][w.name]))g[b][w.name].push(w.value);else{let _=g[b][w.name];g[b][w.name]=[_],g[b][w.name].push(w.value)}else g[b][w.name]=w.value;continue}g[b]?Array.isArray(g[b])?g[b].push(this._parseByType(a.propertiesTypes[b])):(g[b]=[g[b]],g[b].push(this._parseByType(a.propertiesTypes[b]))):g[b]=this._parseByType(a.propertiesTypes[b])}return g}_newPacket(){return i("_newPacket"),this.packet&&(this._list.consume(this.packet.length),i("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),i("_newPacket: new packet"),this.packet=new f,this._pos=0,!0}_emitError(u){i("_emitError",u),this.error=u,this.emit("error",u)}};n.exports=o}),Ql=ve((e,n)=>{ce(),pe(),fe();var{Buffer:t}=(Je(),Le(Qe)),h=65536,f={},a=t.isBuffer(t.from([1,2]).subarray(0,1));function i(d){let g=t.allocUnsafe(2);return g.writeUInt8(d>>8,0),g.writeUInt8(d&255,1),g}function o(){for(let d=0;d<h;d++)f[d]=i(d)}function l(d){let g=0,m=0,b=t.allocUnsafe(4);do g=d%128|0,d=d/128|0,d>0&&(g=g|128),b.writeUInt8(g,m++);while(d>0&&m<4);return d>0&&(m=0),a?b.subarray(0,m):b.slice(0,m)}function u(d){let g=t.allocUnsafe(4);return g.writeUInt32BE(d,0),g}n.exports={cache:f,generateCache:o,generateNumber:i,genBufVariableByteInt:l,generate4ByteBuffer:u}}),Jl=ve((e,n)=>{ce(),pe(),fe(),typeof Re>"u"||!Re.version||Re.version.indexOf("v0.")===0||Re.version.indexOf("v1.")===0&&Re.version.indexOf("v1.8.")!==0?n.exports={nextTick:t}:n.exports=Re;function t(h,f,a,i){if(typeof h!="function")throw new TypeError('"callback" argument must be a function');var o=arguments.length,l,u;switch(o){case 0:case 1:return Re.nextTick(h);case 2:return Re.nextTick(function(){h.call(null,f)});case 3:return Re.nextTick(function(){h.call(null,f,a)});case 4:return Re.nextTick(function(){h.call(null,f,a,i)});default:for(l=new Array(o-1),u=0;u<l.length;)l[u++]=arguments[u];return Re.nextTick(function(){h.apply(null,l)})}}}),Ds=ve((e,n)=>{ce(),pe(),fe();var t=Fs(),{Buffer:h}=(Je(),Le(Qe)),f=h.allocUnsafe(0),a=h.from([0]),i=Ql(),o=Jl().nextTick,l=kt()("mqtt-packet:writeToStream"),u=i.cache,d=i.generateNumber,g=i.generateCache,m=i.genBufVariableByteInt,b=i.generate4ByteBuffer,w=ae,_=!0;function T(P,A,G){switch(l("generate called"),A.cork&&(A.cork(),o(M,A)),_&&(_=!1,g()),l("generate: packet.cmd: %s",P.cmd),P.cmd){case"connect":return B(P,A);case"connack":return S(P,A,G);case"publish":return j(P,A,G);case"puback":case"pubrec":case"pubrel":case"pubcomp":return F(P,A,G);case"subscribe":return R(P,A,G);case"suback":return C(P,A,G);case"unsubscribe":return L(P,A,G);case"unsuback":return q(P,A,G);case"pingreq":case"pingresp":return X(P,A);case"disconnect":return ne(P,A,G);case"auth":return I(P,A,G);default:return A.destroy(new Error("Unknown command")),!1}}Object.defineProperty(T,"cacheNumbers",{get(){return w===ae},set(P){P?((!u||Object.keys(u).length===0)&&(_=!0),w=ae):(_=!1,w=V)}});function M(P){P.uncork()}function B(P,A,G){let ue=P||{},re=ue.protocolId||"MQTT",ee=ue.protocolVersion||4,me=ue.will,he=ue.clean,O=ue.keepalive||0,W=ue.clientId||"",$=ue.username,oe=ue.password,Z=ue.properties;he===void 0&&(he=!0);let N=0;if(!re||typeof re!="string"&&!h.isBuffer(re))return A.destroy(new Error("Invalid protocolId")),!1;if(N+=re.length+2,ee!==3&&ee!==4&&ee!==5)return A.destroy(new Error("Invalid protocol version")),!1;if(N+=1,(typeof W=="string"||h.isBuffer(W))&&(W||ee>=4)&&(W||he))N+=h.byteLength(W)+2;else{if(ee<4)return A.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(he*1===0)return A.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof O!="number"||O<0||O>65535||O%1!==0)return A.destroy(new Error("Invalid keepalive")),!1;N+=2,N+=1;let K,x;if(ee===5){if(K=be(A,Z),!K)return!1;N+=K.length}if(me){if(typeof me!="object")return A.destroy(new Error("Invalid will")),!1;if(!me.topic||typeof me.topic!="string")return A.destroy(new Error("Invalid will topic")),!1;if(N+=h.byteLength(me.topic)+2,N+=2,me.payload)if(me.payload.length>=0)typeof me.payload=="string"?N+=h.byteLength(me.payload):N+=me.payload.length;else return A.destroy(new Error("Invalid will payload")),!1;if(x={},ee===5){if(x=be(A,me.properties),!x)return!1;N+=x.length}}let D=!1;if($!=null)if(le($))D=!0,N+=h.byteLength($)+2;else return A.destroy(new Error("Invalid username")),!1;if(oe!=null){if(!D)return A.destroy(new Error("Username is required to use password")),!1;if(le(oe))N+=Ee(oe)+2;else return A.destroy(new Error("Invalid password")),!1}A.write(t.CONNECT_HEADER),te(A,N),se(A,re),ue.bridgeMode&&(ee+=128),A.write(ee===131?t.VERSION131:ee===132?t.VERSION132:ee===4?t.VERSION4:ee===5?t.VERSION5:t.VERSION3);let H=0;return H|=$!=null?t.USERNAME_MASK:0,H|=oe!=null?t.PASSWORD_MASK:0,H|=me&&me.retain?t.WILL_RETAIN_MASK:0,H|=me&&me.qos?me.qos<<t.WILL_QOS_SHIFT:0,H|=me?t.WILL_FLAG_MASK:0,H|=he?t.CLEAN_SESSION_MASK:0,A.write(h.from([H])),w(A,O),ee===5&&K.write(),se(A,W),me&&(ee===5&&x.write(),Q(A,me.topic),se(A,me.payload)),$!=null&&se(A,$),oe!=null&&se(A,oe),!0}function S(P,A,G){let ue=G?G.protocolVersion:4,re=P||{},ee=ue===5?re.reasonCode:re.returnCode,me=re.properties,he=2;if(typeof ee!="number")return A.destroy(new Error("Invalid return code")),!1;let O=null;if(ue===5){if(O=be(A,me),!O)return!1;he+=O.length}return A.write(t.CONNACK_HEADER),te(A,he),A.write(re.sessionPresent?t.SESSIONPRESENT_HEADER:a),A.write(h.from([ee])),O==null||O.write(),!0}function j(P,A,G){l("publish: packet: %o",P);let ue=G?G.protocolVersion:4,re=P||{},ee=re.qos||0,me=re.retain?t.RETAIN_MASK:0,he=re.topic,O=re.payload||f,W=re.messageId,$=re.properties,oe=0;if(typeof he=="string")oe+=h.byteLength(he)+2;else if(h.isBuffer(he))oe+=he.length+2;else return A.destroy(new Error("Invalid topic")),!1;if(h.isBuffer(O)?oe+=O.length:oe+=h.byteLength(O),ee&&typeof W!="number")return A.destroy(new Error("Invalid messageId")),!1;ee&&(oe+=2);let Z=null;if(ue===5){if(Z=be(A,$),!Z)return!1;oe+=Z.length}return A.write(t.PUBLISH_HEADER[ee][re.dup?1:0][me?1:0]),te(A,oe),w(A,Ee(he)),A.write(he),ee>0&&w(A,W),Z==null||Z.write(),l("publish: payload: %o",O),A.write(O)}function F(P,A,G){let ue=G?G.protocolVersion:4,re=P||{},ee=re.cmd||"puback",me=re.messageId,he=re.dup&&ee==="pubrel"?t.DUP_MASK:0,O=0,W=re.reasonCode,$=re.properties,oe=ue===5?3:2;if(ee==="pubrel"&&(O=1),typeof me!="number")return A.destroy(new Error("Invalid messageId")),!1;let Z=null;if(ue===5&&typeof $=="object"){if(Z=E(A,$,G,oe),!Z)return!1;oe+=Z.length}return A.write(t.ACKS[ee][O][he][0]),oe===3&&(oe+=W!==0?1:-1),te(A,oe),w(A,me),ue===5&&oe!==2&&A.write(h.from([W])),Z!==null?Z.write():oe===4&&A.write(h.from([0])),!0}function R(P,A,G){l("subscribe: packet: ");let ue=G?G.protocolVersion:4,re=P||{},ee=re.dup?t.DUP_MASK:0,me=re.messageId,he=re.subscriptions,O=re.properties,W=0;if(typeof me!="number")return A.destroy(new Error("Invalid messageId")),!1;W+=2;let $=null;if(ue===5){if($=be(A,O),!$)return!1;W+=$.length}if(typeof he=="object"&&he.length)for(let Z=0;Z<he.length;Z+=1){let N=he[Z].topic,K=he[Z].qos;if(typeof N!="string")return A.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof K!="number")return A.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(ue===5){if(typeof(he[Z].nl||!1)!="boolean")return A.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(he[Z].rap||!1)!="boolean")return A.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let x=he[Z].rh||0;if(typeof x!="number"||x>2)return A.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}W+=h.byteLength(N)+2+1}else return A.destroy(new Error("Invalid subscriptions")),!1;l("subscribe: writing to stream: %o",t.SUBSCRIBE_HEADER),A.write(t.SUBSCRIBE_HEADER[1][ee?1:0][0]),te(A,W),w(A,me),$!==null&&$.write();let oe=!0;for(let Z of he){let N=Z.topic,K=Z.qos,x=+Z.nl,D=+Z.rap,H=Z.rh,ie;Q(A,N),ie=t.SUBSCRIBE_OPTIONS_QOS[K],ue===5&&(ie|=x?t.SUBSCRIBE_OPTIONS_NL:0,ie|=D?t.SUBSCRIBE_OPTIONS_RAP:0,ie|=H?t.SUBSCRIBE_OPTIONS_RH[H]:0),oe=A.write(h.from([ie]))}return oe}function C(P,A,G){let ue=G?G.protocolVersion:4,re=P||{},ee=re.messageId,me=re.granted,he=re.properties,O=0;if(typeof ee!="number")return A.destroy(new Error("Invalid messageId")),!1;if(O+=2,typeof me=="object"&&me.length)for(let $=0;$<me.length;$+=1){if(typeof me[$]!="number")return A.destroy(new Error("Invalid qos vector")),!1;O+=1}else return A.destroy(new Error("Invalid qos vector")),!1;let W=null;if(ue===5){if(W=E(A,he,G,O),!W)return!1;O+=W.length}return A.write(t.SUBACK_HEADER),te(A,O),w(A,ee),W!==null&&W.write(),A.write(h.from(me))}function L(P,A,G){let ue=G?G.protocolVersion:4,re=P||{},ee=re.messageId,me=re.dup?t.DUP_MASK:0,he=re.unsubscriptions,O=re.properties,W=0;if(typeof ee!="number")return A.destroy(new Error("Invalid messageId")),!1;if(W+=2,typeof he=="object"&&he.length)for(let Z=0;Z<he.length;Z+=1){if(typeof he[Z]!="string")return A.destroy(new Error("Invalid unsubscriptions")),!1;W+=h.byteLength(he[Z])+2}else return A.destroy(new Error("Invalid unsubscriptions")),!1;let $=null;if(ue===5){if($=be(A,O),!$)return!1;W+=$.length}A.write(t.UNSUBSCRIBE_HEADER[1][me?1:0][0]),te(A,W),w(A,ee),$!==null&&$.write();let oe=!0;for(let Z=0;Z<he.length;Z++)oe=Q(A,he[Z]);return oe}function q(P,A,G){let ue=G?G.protocolVersion:4,re=P||{},ee=re.messageId,me=re.dup?t.DUP_MASK:0,he=re.granted,O=re.properties,W=re.cmd,$=0,oe=2;if(typeof ee!="number")return A.destroy(new Error("Invalid messageId")),!1;if(ue===5)if(typeof he=="object"&&he.length)for(let N=0;N<he.length;N+=1){if(typeof he[N]!="number")return A.destroy(new Error("Invalid qos vector")),!1;oe+=1}else return A.destroy(new Error("Invalid qos vector")),!1;let Z=null;if(ue===5){if(Z=E(A,O,G,oe),!Z)return!1;oe+=Z.length}return A.write(t.ACKS[W][$][me][0]),te(A,oe),w(A,ee),Z!==null&&Z.write(),ue===5&&A.write(h.from(he)),!0}function X(P,A,G){return A.write(t.EMPTY[P.cmd])}function ne(P,A,G){let ue=G?G.protocolVersion:4,re=P||{},ee=re.reasonCode,me=re.properties,he=ue===5?1:0,O=null;if(ue===5){if(O=E(A,me,G,he),!O)return!1;he+=O.length}return A.write(h.from([t.codes.disconnect<<4])),te(A,he),ue===5&&A.write(h.from([ee])),O!==null&&O.write(),!0}function I(P,A,G){let ue=G?G.protocolVersion:4,re=P||{},ee=re.reasonCode,me=re.properties,he=ue===5?1:0;ue!==5&&A.destroy(new Error("Invalid mqtt version for auth packet"));let O=E(A,me,G,he);return O?(he+=O.length,A.write(h.from([t.codes.auth<<4])),te(A,he),A.write(h.from([ee])),O!==null&&O.write(),!0):!1}var z={};function te(P,A){if(A>t.VARBYTEINT_MAX)return P.destroy(new Error(`Invalid variable byte integer: ${A}`)),!1;let G=z[A];return G||(G=m(A),A<16384&&(z[A]=G)),l("writeVarByteInt: writing to stream: %o",G),P.write(G)}function Q(P,A){let G=h.byteLength(A);return w(P,G),l("writeString: %s",A),P.write(A,"utf8")}function ye(P,A,G){Q(P,A),Q(P,G)}function ae(P,A){return l("writeNumberCached: number: %d",A),l("writeNumberCached: %o",u[A]),P.write(u[A])}function V(P,A){let G=d(A);return l("writeNumberGenerated: %o",G),P.write(G)}function we(P,A){let G=b(A);return l("write4ByteNumber: %o",G),P.write(G)}function se(P,A){typeof A=="string"?Q(P,A):A?(w(P,A.length),P.write(A)):w(P,0)}function be(P,A){if(typeof A!="object"||A.length!=null)return{length:1,write(){de(P,{},0)}};let G=0;function ue(re,ee){let me=t.propertiesTypes[re],he=0;switch(me){case"byte":{if(typeof ee!="boolean")return P.destroy(new Error(`Invalid ${re}: ${ee}`)),!1;he+=2;break}case"int8":{if(typeof ee!="number"||ee<0||ee>255)return P.destroy(new Error(`Invalid ${re}: ${ee}`)),!1;he+=2;break}case"binary":{if(ee&&ee===null)return P.destroy(new Error(`Invalid ${re}: ${ee}`)),!1;he+=1+h.byteLength(ee)+2;break}case"int16":{if(typeof ee!="number"||ee<0||ee>65535)return P.destroy(new Error(`Invalid ${re}: ${ee}`)),!1;he+=3;break}case"int32":{if(typeof ee!="number"||ee<0||ee>4294967295)return P.destroy(new Error(`Invalid ${re}: ${ee}`)),!1;he+=5;break}case"var":{if(typeof ee!="number"||ee<0||ee>268435455)return P.destroy(new Error(`Invalid ${re}: ${ee}`)),!1;he+=1+h.byteLength(m(ee));break}case"string":{if(typeof ee!="string")return P.destroy(new Error(`Invalid ${re}: ${ee}`)),!1;he+=3+h.byteLength(ee.toString());break}case"pair":{if(typeof ee!="object")return P.destroy(new Error(`Invalid ${re}: ${ee}`)),!1;he+=Object.getOwnPropertyNames(ee).reduce((O,W)=>{let $=ee[W];return Array.isArray($)?O+=$.reduce((oe,Z)=>(oe+=3+h.byteLength(W.toString())+2+h.byteLength(Z.toString()),oe),0):O+=3+h.byteLength(W.toString())+2+h.byteLength(ee[W].toString()),O},0);break}default:return P.destroy(new Error(`Invalid property ${re}: ${ee}`)),!1}return he}if(A)for(let re in A){let ee=0,me=0,he=A[re];if(Array.isArray(he))for(let O=0;O<he.length;O++){if(me=ue(re,he[O]),!me)return!1;ee+=me}else{if(me=ue(re,he),!me)return!1;ee=me}if(!ee)return!1;G+=ee}return{length:h.byteLength(m(G))+G,write(){de(P,A,G)}}}function E(P,A,G,ue){let re=["reasonString","userProperties"],ee=G&&G.properties&&G.properties.maximumPacketSize?G.properties.maximumPacketSize:0,me=be(P,A);if(ee)for(;ue+me.length>ee;){let he=re.shift();if(he&&A[he])delete A[he],me=be(P,A);else return!1}return me}function J(P,A,G){switch(t.propertiesTypes[A]){case"byte":{P.write(h.from([t.properties[A]])),P.write(h.from([+G]));break}case"int8":{P.write(h.from([t.properties[A]])),P.write(h.from([G]));break}case"binary":{P.write(h.from([t.properties[A]])),se(P,G);break}case"int16":{P.write(h.from([t.properties[A]])),w(P,G);break}case"int32":{P.write(h.from([t.properties[A]])),we(P,G);break}case"var":{P.write(h.from([t.properties[A]])),te(P,G);break}case"string":{P.write(h.from([t.properties[A]])),Q(P,G);break}case"pair":{Object.getOwnPropertyNames(G).forEach(ue=>{let re=G[ue];Array.isArray(re)?re.forEach(ee=>{P.write(h.from([t.properties[A]])),ye(P,ue.toString(),ee.toString())}):(P.write(h.from([t.properties[A]])),ye(P,ue.toString(),re.toString()))});break}default:return P.destroy(new Error(`Invalid property ${A} value: ${G}`)),!1}}function de(P,A,G){te(P,G);for(let ue in A)if(Object.prototype.hasOwnProperty.call(A,ue)&&A[ue]!==null){let re=A[ue];if(Array.isArray(re))for(let ee=0;ee<re.length;ee++)J(P,ue,re[ee]);else J(P,ue,re)}}function Ee(P){return P?P instanceof h?P.length:h.byteLength(P):0}function le(P){return typeof P=="string"||P instanceof h}n.exports=T}),Xl=ve((e,n)=>{ce(),pe(),fe();var t=Ds(),{EventEmitter:h}=(sr(),Le(Xt)),{Buffer:f}=(Je(),Le(Qe));function a(o,l){let u=new i;return t(o,u,l),u.concat()}var i=class extends h{constructor(){super(),this._array=new Array(20),this._i=0}write(o){return this._array[this._i++]=o,!0}concat(){let o=0,l=new Array(this._array.length),u=this._array,d=0,g;for(g=0;g<u.length&&u[g]!==void 0;g++)typeof u[g]!="string"?l[g]=u[g].length:l[g]=f.byteLength(u[g]),o+=l[g];let m=f.allocUnsafe(o);for(g=0;g<u.length&&u[g]!==void 0;g++)typeof u[g]!="string"?(u[g].copy(m,d),d+=l[g]):(m.write(u[g],d),d+=l[g]);return m}destroy(o){o&&this.emit("error",o)}};n.exports=a}),Zl=ve(e=>{ce(),pe(),fe(),e.parser=Gl().parser,e.generate=Xl(),e.writeToStream=Ds()}),Ws=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var n=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let t=this.nextId++;return this.nextId===65536&&(this.nextId=1),t}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(t){return!0}deallocate(t){}clear(){}};e.default=n}),eu=ve((e,n)=>{ce(),pe(),fe(),n.exports=h;function t(a){return a instanceof Mr?Mr.from(a):new a.constructor(a.buffer.slice(),a.byteOffset,a.length)}function h(a){if(a=a||{},a.circles)return f(a);return a.proto?l:o;function i(u,d){for(var g=Object.keys(u),m=new Array(g.length),b=0;b<g.length;b++){var w=g[b],_=u[w];typeof _!="object"||_===null?m[w]=_:_ instanceof Date?m[w]=new Date(_):ArrayBuffer.isView(_)?m[w]=t(_):m[w]=d(_)}return m}function o(u){if(typeof u!="object"||u===null)return u;if(u instanceof Date)return new Date(u);if(Array.isArray(u))return i(u,o);if(u instanceof Map)return new Map(i(Array.from(u),o));if(u instanceof Set)return new Set(i(Array.from(u),o));var d={};for(var g in u)if(Object.hasOwnProperty.call(u,g)!==!1){var m=u[g];typeof m!="object"||m===null?d[g]=m:m instanceof Date?d[g]=new Date(m):m instanceof Map?d[g]=new Map(i(Array.from(m),o)):m instanceof Set?d[g]=new Set(i(Array.from(m),o)):ArrayBuffer.isView(m)?d[g]=t(m):d[g]=o(m)}return d}function l(u){if(typeof u!="object"||u===null)return u;if(u instanceof Date)return new Date(u);if(Array.isArray(u))return i(u,l);if(u instanceof Map)return new Map(i(Array.from(u),l));if(u instanceof Set)return new Set(i(Array.from(u),l));var d={};for(var g in u){var m=u[g];typeof m!="object"||m===null?d[g]=m:m instanceof Date?d[g]=new Date(m):m instanceof Map?d[g]=new Map(i(Array.from(m),l)):m instanceof Set?d[g]=new Set(i(Array.from(m),l)):ArrayBuffer.isView(m)?d[g]=t(m):d[g]=l(m)}return d}}function f(a){var i=[],o=[];return a.proto?d:u;function l(g,m){for(var b=Object.keys(g),w=new Array(b.length),_=0;_<b.length;_++){var T=b[_],M=g[T];if(typeof M!="object"||M===null)w[T]=M;else if(M instanceof Date)w[T]=new Date(M);else if(ArrayBuffer.isView(M))w[T]=t(M);else{var B=i.indexOf(M);B!==-1?w[T]=o[B]:w[T]=m(M)}}return w}function u(g){if(typeof g!="object"||g===null)return g;if(g instanceof Date)return new Date(g);if(Array.isArray(g))return l(g,u);if(g instanceof Map)return new Map(l(Array.from(g),u));if(g instanceof Set)return new Set(l(Array.from(g),u));var m={};i.push(g),o.push(m);for(var b in g)if(Object.hasOwnProperty.call(g,b)!==!1){var w=g[b];if(typeof w!="object"||w===null)m[b]=w;else if(w instanceof Date)m[b]=new Date(w);else if(w instanceof Map)m[b]=new Map(l(Array.from(w),u));else if(w instanceof Set)m[b]=new Set(l(Array.from(w),u));else if(ArrayBuffer.isView(w))m[b]=t(w);else{var _=i.indexOf(w);_!==-1?m[b]=o[_]:m[b]=u(w)}}return i.pop(),o.pop(),m}function d(g){if(typeof g!="object"||g===null)return g;if(g instanceof Date)return new Date(g);if(Array.isArray(g))return l(g,d);if(g instanceof Map)return new Map(l(Array.from(g),d));if(g instanceof Set)return new Set(l(Array.from(g),d));var m={};i.push(g),o.push(m);for(var b in g){var w=g[b];if(typeof w!="object"||w===null)m[b]=w;else if(w instanceof Date)m[b]=new Date(w);else if(w instanceof Map)m[b]=new Map(l(Array.from(w),d));else if(w instanceof Set)m[b]=new Set(l(Array.from(w),d));else if(ArrayBuffer.isView(w))m[b]=t(w);else{var _=i.indexOf(w);_!==-1?m[b]=o[_]:m[b]=d(w)}}return i.pop(),o.pop(),m}}}),tu=ve((e,n)=>{ce(),pe(),fe(),n.exports=eu()()}),ru=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopics=e.validateTopic=void 0;function n(h){let f=h.split("/");for(let a=0;a<f.length;a++)if(f[a]!=="+"){if(f[a]==="#")return a===f.length-1;if(f[a].indexOf("+")!==-1||f[a].indexOf("#")!==-1)return!1}return!0}e.validateTopic=n;function t(h){if(h.length===0)return"empty_topic_list";for(let f=0;f<h.length;f++)if(!n(h[f]))return h[f];return null}e.validateTopics=t}),$s=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var n=Zt(),t={objectMode:!0},h={clean:!0},f=class{constructor(a){this.options=a||{},this.options=Object.assign(Object.assign({},h),a),this._inflights=new Map}put(a,i){return this._inflights.set(a.messageId,a),i&&i(),this}createStream(){let a=new n.Readable(t),i=[],o=!1,l=0;return this._inflights.forEach((u,d)=>{i.push(u)}),a._read=()=>{!o&&l<i.length?a.push(i[l++]):a.push(null)},a.destroy=u=>{if(!o)return o=!0,setTimeout(()=>{a.emit("close")},0),a},a}del(a,i){let o=this._inflights.get(a.messageId);return o?(this._inflights.delete(a.messageId),i(null,o)):i&&i(new Error("missing packet")),this}get(a,i){let o=this._inflights.get(a.messageId);return o?i(null,o):i&&i(new Error("missing packet")),this}close(a){this.options.clean&&(this._inflights=null),a&&a()}};e.default=f}),nu=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var n=[0,16,128,131,135,144,145,151,153],t=(h,f,a)=>{h.log("handlePublish: packet %o",f),a=typeof a<"u"?a:h.noop;let i=f.topic.toString(),o=f.payload,{qos:l}=f,{messageId:u}=f,{options:d}=h;if(h.options.protocolVersion===5){let g;if(f.properties&&(g=f.properties.topicAlias),typeof g<"u")if(i.length===0)if(g>0&&g<=65535){let m=h.topicAliasRecv.getTopicByAlias(g);if(m)i=m,h.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",i,g);else{h.log("handlePublish :: unregistered topic alias. alias: %d",g),h.emit("error",new Error("Received unregistered Topic Alias"));return}}else{h.log("handlePublish :: topic alias out of range. alias: %d",g),h.emit("error",new Error("Received Topic Alias is out of range"));return}else if(h.topicAliasRecv.put(i,g))h.log("handlePublish :: registered topic: %s - alias: %d",i,g);else{h.log("handlePublish :: topic alias out of range. alias: %d",g),h.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(h.log("handlePublish: qos %d",l),l){case 2:{d.customHandleAcks(i,o,f,(g,m)=>{if(typeof g=="number"&&(m=g,g=null),g)return h.emit("error",g);if(n.indexOf(m)===-1)return h.emit("error",new Error("Wrong reason code for pubrec"));m?h._sendPacket({cmd:"pubrec",messageId:u,reasonCode:m},a):h.incomingStore.put(f,()=>{h._sendPacket({cmd:"pubrec",messageId:u},a)})});break}case 1:{d.customHandleAcks(i,o,f,(g,m)=>{if(typeof g=="number"&&(m=g,g=null),g)return h.emit("error",g);if(n.indexOf(m)===-1)return h.emit("error",new Error("Wrong reason code for puback"));m||h.emit("message",i,o,f),h.handleMessage(f,b=>{if(b)return a&&a(b);h._sendPacket({cmd:"puback",messageId:u,reasonCode:m},a)})});break}case 0:h.emit("message",i,o,f),h.handleMessage(f,a);break;default:h.log("handlePublish: unknown QoS. Doing nothing.");break}};e.default=t}),iu=ve((e,n)=>{n.exports={version:"5.9.0"}}),br=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"__esModule",{value:!0}),e.MQTTJS_VERSION=e.nextTick=e.applyMixin=e.ErrorWithReasonCode=void 0;var n=class qs extends Error{constructor(f,a){super(f),this.code=a,Object.setPrototypeOf(this,qs.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};e.ErrorWithReasonCode=n;function t(h,f,a=!1){var i;let o=[f];for(;;){let l=o[0],u=Object.getPrototypeOf(l);if(u!=null&&u.prototype)o.unshift(u);else break}for(let l of o)for(let u of Object.getOwnPropertyNames(l.prototype))(a||u!=="constructor")&&Object.defineProperty(h.prototype,u,(i=Object.getOwnPropertyDescriptor(l.prototype,u))!==null&&i!==void 0?i:Object.create(null))}e.applyMixin=t,e.nextTick=typeof(Re==null?void 0:Re.nextTick)=="function"?Re.nextTick:h=>{setTimeout(h,0)},e.MQTTJS_VERSION=iu().version}),Gr=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=void 0,e.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var n=(t,h)=>{let{messageId:f}=h,a=h.cmd,i=null,o=t.outgoing[f]?t.outgoing[f].cb:null,l=null;if(!o){t.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(t.log("_handleAck :: packet type",a),a){case"pubcomp":case"puback":{let u=h.reasonCode;u&&u>0&&u!==16?(l=new Error(`Publish error: ${e.ReasonCodes[u]}`),l.code=u,t._removeOutgoingAndStoreMessage(f,()=>{o(l,h)})):t._removeOutgoingAndStoreMessage(f,o);break}case"pubrec":{i={cmd:"pubrel",qos:2,messageId:f};let u=h.reasonCode;u&&u>0&&u!==16?(l=new Error(`Publish error: ${e.ReasonCodes[u]}`),l.code=u,t._removeOutgoingAndStoreMessage(f,()=>{o(l,h)})):t._sendPacket(i);break}case"suback":{delete t.outgoing[f],t.messageIdProvider.deallocate(f);let u=h.granted;for(let d=0;d<u.length;d++){let g=u[d];if(g&128){l=new Error(`Subscribe error: ${e.ReasonCodes[g]}`),l.code=g;let m=t.messageIdToTopic[f];m&&m.forEach(b=>{delete t._resubscribeTopics[b]})}}delete t.messageIdToTopic[f],t._invokeStoreProcessingQueue(),o(l,h);break}case"unsuback":{delete t.outgoing[f],t.messageIdProvider.deallocate(f),t._invokeStoreProcessingQueue(),o(null);break}default:t.emit("error",new Error("unrecognized packet type"))}t.disconnecting&&Object.keys(t.outgoing).length===0&&t.emit("outgoingEmpty")};e.default=n}),ou=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var n=br(),t=Gr(),h=(f,a)=>{let{options:i}=f,o=i.protocolVersion,l=o===5?a.reasonCode:a.returnCode;if(o!==5){let u=new n.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${o}`,l);f.emit("error",u);return}f.handleAuth(a,(u,d)=>{if(u){f.emit("error",u);return}if(l===24)f.reconnecting=!1,f._sendPacket(d);else{let g=new n.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[l]}`,l);f.emit("error",g)}})};e.default=h}),su=ve(e=>{var b,w,_,T,M,B,S,j,F,R,C,L,q,X,ne,I,z,te,Q,ye,ae,V,we,se,be,E,Ii,de,Ee,le,P,Hs,G,ue,re,Pt,Ut,Ti,Rr,Or,Ne,ki,pr,N;ce(),pe(),fe(),Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=void 0;var n=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,t=new Set,h=typeof Re=="object"&&Re?Re:{},f=(K,x,D,H)=>{typeof h.emitWarning=="function"?h.emitWarning(K,x,D,H):console.error(`[${D}] ${x}: ${K}`)},a=globalThis.AbortController,i=globalThis.AbortSignal;if(typeof a>"u"){i=class{constructor(){Ce(this,"onabort");Ce(this,"_onabort",[]);Ce(this,"reason");Ce(this,"aborted",!1)}addEventListener(D,H){this._onabort.push(H)}},a=class{constructor(){Ce(this,"signal",new i);x()}abort(D){var H,ie;if(!this.signal.aborted){this.signal.reason=D,this.signal.aborted=!0;for(let p of this.signal._onabort)p(D);(ie=(H=this.signal).onabort)==null||ie.call(H,D)}}};let K=((b=h.env)==null?void 0:b.LRU_CACHE_IGNORE_AC_WARNING)!=="1",x=()=>{K&&(K=!1,f("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",x))}}var o=K=>!t.has(K),l=K=>K&&K===Math.floor(K)&&K>0&&isFinite(K),u=K=>l(K)?K<=Math.pow(2,8)?Uint8Array:K<=Math.pow(2,16)?Uint16Array:K<=Math.pow(2,32)?Uint32Array:K<=Number.MAX_SAFE_INTEGER?d:null:null,d=class extends Array{constructor(K){super(K),this.fill(0)}},g=(w=class{constructor(x,D){Ce(this,"heap");Ce(this,"length");if(!U(w,_))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new D(x),this.length=0}static create(x){let D=u(x);if(!D)return[];Be(w,_,!0);let H=new w(x,D);return Be(w,_,!1),H}push(x){this.heap[this.length++]=x}pop(){return this.heap[--this.length]}},_=new WeakMap,xe(w,_,!1),w),m=(N=class{constructor(x){xe(this,E);xe(this,T);xe(this,M);xe(this,B);xe(this,S);xe(this,j);Ce(this,"ttl");Ce(this,"ttlResolution");Ce(this,"ttlAutopurge");Ce(this,"updateAgeOnGet");Ce(this,"updateAgeOnHas");Ce(this,"allowStale");Ce(this,"noDisposeOnSet");Ce(this,"noUpdateTTL");Ce(this,"maxEntrySize");Ce(this,"sizeCalculation");Ce(this,"noDeleteOnFetchRejection");Ce(this,"noDeleteOnStaleGet");Ce(this,"allowStaleOnFetchAbort");Ce(this,"allowStaleOnFetchRejection");Ce(this,"ignoreFetchAbort");xe(this,F);xe(this,R);xe(this,C);xe(this,L);xe(this,q);xe(this,X);xe(this,ne);xe(this,I);xe(this,z);xe(this,te);xe(this,Q);xe(this,ye);xe(this,ae);xe(this,V);xe(this,we);xe(this,se);xe(this,be);xe(this,de,()=>{});xe(this,Ee,()=>{});xe(this,le,()=>{});xe(this,P,()=>!1);xe(this,G,x=>{});xe(this,ue,(x,D,H)=>{});xe(this,re,(x,D,H,ie)=>{if(H||ie)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});let{max:D=0,ttl:H,ttlResolution:ie=1,ttlAutopurge:p,updateAgeOnGet:s,updateAgeOnHas:r,allowStale:c,dispose:y,disposeAfter:v,noDisposeOnSet:k,noUpdateTTL:Y,maxSize:_e=0,maxEntrySize:Te=0,sizeCalculation:Se,fetchMethod:Ie,noDeleteOnFetchRejection:Ae,noDeleteOnStaleGet:Me,allowStaleOnFetchRejection:He,allowStaleOnFetchAbort:$e,ignoreFetchAbort:Ke}=x;if(D!==0&&!l(D))throw new TypeError("max option must be a nonnegative integer");let Ze=D?u(D):Array;if(!Ze)throw new Error("invalid max value: "+D);if(Be(this,T,D),Be(this,M,_e),this.maxEntrySize=Te||U(this,M),this.sizeCalculation=Se,this.sizeCalculation){if(!U(this,M)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Ie!==void 0&&typeof Ie!="function")throw new TypeError("fetchMethod must be a function if specified");if(Be(this,j,Ie),Be(this,se,!!Ie),Be(this,C,new Map),Be(this,L,new Array(D).fill(void 0)),Be(this,q,new Array(D).fill(void 0)),Be(this,X,new Ze(D)),Be(this,ne,new Ze(D)),Be(this,I,0),Be(this,z,0),Be(this,te,g.create(D)),Be(this,F,0),Be(this,R,0),typeof y=="function"&&Be(this,B,y),typeof v=="function"?(Be(this,S,v),Be(this,Q,[])):(Be(this,S,void 0),Be(this,Q,void 0)),Be(this,we,!!U(this,B)),Be(this,be,!!U(this,S)),this.noDisposeOnSet=!!k,this.noUpdateTTL=!!Y,this.noDeleteOnFetchRejection=!!Ae,this.allowStaleOnFetchRejection=!!He,this.allowStaleOnFetchAbort=!!$e,this.ignoreFetchAbort=!!Ke,this.maxEntrySize!==0){if(U(this,M)!==0&&!l(U(this,M)))throw new TypeError("maxSize must be a positive integer if specified");if(!l(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");ke(this,E,Hs).call(this)}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!Me,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!r,this.ttlResolution=l(ie)||ie===0?ie:1,this.ttlAutopurge=!!p,this.ttl=H||0,this.ttl){if(!l(this.ttl))throw new TypeError("ttl must be a positive integer if specified");ke(this,E,Ii).call(this)}if(U(this,T)===0&&this.ttl===0&&U(this,M)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!U(this,T)&&!U(this,M)){let Ve="LRU_CACHE_UNBOUNDED";o(Ve)&&(t.add(Ve),f("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Ve,N))}}static unsafeExposeInternals(x){return{starts:U(x,ae),ttls:U(x,V),sizes:U(x,ye),keyMap:U(x,C),keyList:U(x,L),valList:U(x,q),next:U(x,X),prev:U(x,ne),get head(){return U(x,I)},get tail(){return U(x,z)},free:U(x,te),isBackgroundFetch:D=>{var H;return ke(H=x,E,Ne).call(H,D)},backgroundFetch:(D,H,ie,p)=>{var s;return ke(s=x,E,Or).call(s,D,H,ie,p)},moveToTail:D=>{var H;return ke(H=x,E,pr).call(H,D)},indexes:D=>{var H;return ke(H=x,E,Pt).call(H,D)},rindexes:D=>{var H;return ke(H=x,E,Ut).call(H,D)},isStale:D=>{var H;return U(H=x,P).call(H,D)}}}get max(){return U(this,T)}get maxSize(){return U(this,M)}get calculatedSize(){return U(this,R)}get size(){return U(this,F)}get fetchMethod(){return U(this,j)}get dispose(){return U(this,B)}get disposeAfter(){return U(this,S)}getRemainingTTL(x){return U(this,C).has(x)?1/0:0}*entries(){for(let x of ke(this,E,Pt).call(this))U(this,q)[x]!==void 0&&U(this,L)[x]!==void 0&&!ke(this,E,Ne).call(this,U(this,q)[x])&&(yield[U(this,L)[x],U(this,q)[x]])}*rentries(){for(let x of ke(this,E,Ut).call(this))U(this,q)[x]!==void 0&&U(this,L)[x]!==void 0&&!ke(this,E,Ne).call(this,U(this,q)[x])&&(yield[U(this,L)[x],U(this,q)[x]])}*keys(){for(let x of ke(this,E,Pt).call(this)){let D=U(this,L)[x];D!==void 0&&!ke(this,E,Ne).call(this,U(this,q)[x])&&(yield D)}}*rkeys(){for(let x of ke(this,E,Ut).call(this)){let D=U(this,L)[x];D!==void 0&&!ke(this,E,Ne).call(this,U(this,q)[x])&&(yield D)}}*values(){for(let x of ke(this,E,Pt).call(this))U(this,q)[x]!==void 0&&!ke(this,E,Ne).call(this,U(this,q)[x])&&(yield U(this,q)[x])}*rvalues(){for(let x of ke(this,E,Ut).call(this))U(this,q)[x]!==void 0&&!ke(this,E,Ne).call(this,U(this,q)[x])&&(yield U(this,q)[x])}[Symbol.iterator](){return this.entries()}find(x,D={}){for(let H of ke(this,E,Pt).call(this)){let ie=U(this,q)[H],p=ke(this,E,Ne).call(this,ie)?ie.__staleWhileFetching:ie;if(p!==void 0&&x(p,U(this,L)[H],this))return this.get(U(this,L)[H],D)}}forEach(x,D=this){for(let H of ke(this,E,Pt).call(this)){let ie=U(this,q)[H],p=ke(this,E,Ne).call(this,ie)?ie.__staleWhileFetching:ie;p!==void 0&&x.call(D,p,U(this,L)[H],this)}}rforEach(x,D=this){for(let H of ke(this,E,Ut).call(this)){let ie=U(this,q)[H],p=ke(this,E,Ne).call(this,ie)?ie.__staleWhileFetching:ie;p!==void 0&&x.call(D,p,U(this,L)[H],this)}}purgeStale(){let x=!1;for(let D of ke(this,E,Ut).call(this,{allowStale:!0}))U(this,P).call(this,D)&&(this.delete(U(this,L)[D]),x=!0);return x}dump(){let x=[];for(let D of ke(this,E,Pt).call(this,{allowStale:!0})){let H=U(this,L)[D],ie=U(this,q)[D],p=ke(this,E,Ne).call(this,ie)?ie.__staleWhileFetching:ie;if(p===void 0||H===void 0)continue;let s={value:p};if(U(this,V)&&U(this,ae)){s.ttl=U(this,V)[D];let r=n.now()-U(this,ae)[D];s.start=Math.floor(Date.now()-r)}U(this,ye)&&(s.size=U(this,ye)[D]),x.unshift([H,s])}return x}load(x){this.clear();for(let[D,H]of x){if(H.start){let ie=Date.now()-H.start;H.start=n.now()-ie}this.set(D,H.value,H)}}set(x,D,H={}){var Y,_e,Te,Se,Ie;if(D===void 0)return this.delete(x),this;let{ttl:ie=this.ttl,start:p,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:r=this.sizeCalculation,status:c}=H,{noUpdateTTL:y=this.noUpdateTTL}=H,v=U(this,re).call(this,x,D,H.size||0,r);if(this.maxEntrySize&&v>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.delete(x),this;let k=U(this,F)===0?void 0:U(this,C).get(x);if(k===void 0)k=U(this,F)===0?U(this,z):U(this,te).length!==0?U(this,te).pop():U(this,F)===U(this,T)?ke(this,E,Rr).call(this,!1):U(this,F),U(this,L)[k]=x,U(this,q)[k]=D,U(this,C).set(x,k),U(this,X)[U(this,z)]=k,U(this,ne)[k]=U(this,z),Be(this,z,k),wr(this,F)._++,U(this,ue).call(this,k,v,c),c&&(c.set="add"),y=!1;else{ke(this,E,pr).call(this,k);let Ae=U(this,q)[k];if(D!==Ae){if(U(this,se)&&ke(this,E,Ne).call(this,Ae)){Ae.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:Me}=Ae;Me!==void 0&&!s&&(U(this,we)&&((Y=U(this,B))==null||Y.call(this,Me,x,"set")),U(this,be)&&((_e=U(this,Q))==null||_e.push([Me,x,"set"])))}else s||(U(this,we)&&((Te=U(this,B))==null||Te.call(this,Ae,x,"set")),U(this,be)&&((Se=U(this,Q))==null||Se.push([Ae,x,"set"])));if(U(this,G).call(this,k),U(this,ue).call(this,k,v,c),U(this,q)[k]=D,c){c.set="replace";let Me=Ae&&ke(this,E,Ne).call(this,Ae)?Ae.__staleWhileFetching:Ae;Me!==void 0&&(c.oldValue=Me)}}else c&&(c.set="update")}if(ie!==0&&!U(this,V)&&ke(this,E,Ii).call(this),U(this,V)&&(y||U(this,le).call(this,k,ie,p),c&&U(this,Ee).call(this,c,k)),!s&&U(this,be)&&U(this,Q)){let Ae=U(this,Q),Me;for(;Me=Ae==null?void 0:Ae.shift();)(Ie=U(this,S))==null||Ie.call(this,...Me)}return this}pop(){var x;try{for(;U(this,F);){let D=U(this,q)[U(this,I)];if(ke(this,E,Rr).call(this,!0),ke(this,E,Ne).call(this,D)){if(D.__staleWhileFetching)return D.__staleWhileFetching}else if(D!==void 0)return D}}finally{if(U(this,be)&&U(this,Q)){let D=U(this,Q),H;for(;H=D==null?void 0:D.shift();)(x=U(this,S))==null||x.call(this,...H)}}}has(x,D={}){let{updateAgeOnHas:H=this.updateAgeOnHas,status:ie}=D,p=U(this,C).get(x);if(p!==void 0){let s=U(this,q)[p];if(ke(this,E,Ne).call(this,s)&&s.__staleWhileFetching===void 0)return!1;if(U(this,P).call(this,p))ie&&(ie.has="stale",U(this,Ee).call(this,ie,p));else return H&&U(this,de).call(this,p),ie&&(ie.has="hit",U(this,Ee).call(this,ie,p)),!0}else ie&&(ie.has="miss");return!1}peek(x,D={}){let{allowStale:H=this.allowStale}=D,ie=U(this,C).get(x);if(ie!==void 0&&(H||!U(this,P).call(this,ie))){let p=U(this,q)[ie];return ke(this,E,Ne).call(this,p)?p.__staleWhileFetching:p}}async fetch(x,D={}){let{allowStale:H=this.allowStale,updateAgeOnGet:ie=this.updateAgeOnGet,noDeleteOnStaleGet:p=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:r=this.noDisposeOnSet,size:c=0,sizeCalculation:y=this.sizeCalculation,noUpdateTTL:v=this.noUpdateTTL,noDeleteOnFetchRejection:k=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:Y=this.allowStaleOnFetchRejection,ignoreFetchAbort:_e=this.ignoreFetchAbort,allowStaleOnFetchAbort:Te=this.allowStaleOnFetchAbort,context:Se,forceRefresh:Ie=!1,status:Ae,signal:Me}=D;if(!U(this,se))return Ae&&(Ae.fetch="get"),this.get(x,{allowStale:H,updateAgeOnGet:ie,noDeleteOnStaleGet:p,status:Ae});let He={allowStale:H,updateAgeOnGet:ie,noDeleteOnStaleGet:p,ttl:s,noDisposeOnSet:r,size:c,sizeCalculation:y,noUpdateTTL:v,noDeleteOnFetchRejection:k,allowStaleOnFetchRejection:Y,allowStaleOnFetchAbort:Te,ignoreFetchAbort:_e,status:Ae,signal:Me},$e=U(this,C).get(x);if($e===void 0){Ae&&(Ae.fetch="miss");let Ke=ke(this,E,Or).call(this,x,$e,He,Se);return Ke.__returned=Ke}else{let Ke=U(this,q)[$e];if(ke(this,E,Ne).call(this,Ke)){let Xi=H&&Ke.__staleWhileFetching!==void 0;return Ae&&(Ae.fetch="inflight",Xi&&(Ae.returnedStale=!0)),Xi?Ke.__staleWhileFetching:Ke.__returned=Ke}let Ze=U(this,P).call(this,$e);if(!Ie&&!Ze)return Ae&&(Ae.fetch="hit"),ke(this,E,pr).call(this,$e),ie&&U(this,de).call(this,$e),Ae&&U(this,Ee).call(this,Ae,$e),Ke;let Ve=ke(this,E,Or).call(this,x,$e,He,Se),Ji=Ve.__staleWhileFetching!==void 0&&H;return Ae&&(Ae.fetch=Ze?"stale":"refresh",Ji&&Ze&&(Ae.returnedStale=!0)),Ji?Ve.__staleWhileFetching:Ve.__returned=Ve}}get(x,D={}){let{allowStale:H=this.allowStale,updateAgeOnGet:ie=this.updateAgeOnGet,noDeleteOnStaleGet:p=this.noDeleteOnStaleGet,status:s}=D,r=U(this,C).get(x);if(r!==void 0){let c=U(this,q)[r],y=ke(this,E,Ne).call(this,c);return s&&U(this,Ee).call(this,s,r),U(this,P).call(this,r)?(s&&(s.get="stale"),y?(s&&H&&c.__staleWhileFetching!==void 0&&(s.returnedStale=!0),H?c.__staleWhileFetching:void 0):(p||this.delete(x),s&&H&&(s.returnedStale=!0),H?c:void 0)):(s&&(s.get="hit"),y?c.__staleWhileFetching:(ke(this,E,pr).call(this,r),ie&&U(this,de).call(this,r),c))}else s&&(s.get="miss")}delete(x){var H,ie,p,s;let D=!1;if(U(this,F)!==0){let r=U(this,C).get(x);if(r!==void 0)if(D=!0,U(this,F)===1)this.clear();else{U(this,G).call(this,r);let c=U(this,q)[r];ke(this,E,Ne).call(this,c)?c.__abortController.abort(new Error("deleted")):(U(this,we)||U(this,be))&&(U(this,we)&&((H=U(this,B))==null||H.call(this,c,x,"delete")),U(this,be)&&((ie=U(this,Q))==null||ie.push([c,x,"delete"]))),U(this,C).delete(x),U(this,L)[r]=void 0,U(this,q)[r]=void 0,r===U(this,z)?Be(this,z,U(this,ne)[r]):r===U(this,I)?Be(this,I,U(this,X)[r]):(U(this,X)[U(this,ne)[r]]=U(this,X)[r],U(this,ne)[U(this,X)[r]]=U(this,ne)[r]),wr(this,F)._--,U(this,te).push(r)}}if(U(this,be)&&((p=U(this,Q))!=null&&p.length)){let r=U(this,Q),c;for(;c=r==null?void 0:r.shift();)(s=U(this,S))==null||s.call(this,...c)}return D}clear(){var x,D,H;for(let ie of ke(this,E,Ut).call(this,{allowStale:!0})){let p=U(this,q)[ie];if(ke(this,E,Ne).call(this,p))p.__abortController.abort(new Error("deleted"));else{let s=U(this,L)[ie];U(this,we)&&((x=U(this,B))==null||x.call(this,p,s,"delete")),U(this,be)&&((D=U(this,Q))==null||D.push([p,s,"delete"]))}}if(U(this,C).clear(),U(this,q).fill(void 0),U(this,L).fill(void 0),U(this,V)&&U(this,ae)&&(U(this,V).fill(0),U(this,ae).fill(0)),U(this,ye)&&U(this,ye).fill(0),Be(this,I,0),Be(this,z,0),U(this,te).length=0,Be(this,R,0),Be(this,F,0),U(this,be)&&U(this,Q)){let ie=U(this,Q),p;for(;p=ie==null?void 0:ie.shift();)(H=U(this,S))==null||H.call(this,...p)}}},T=new WeakMap,M=new WeakMap,B=new WeakMap,S=new WeakMap,j=new WeakMap,F=new WeakMap,R=new WeakMap,C=new WeakMap,L=new WeakMap,q=new WeakMap,X=new WeakMap,ne=new WeakMap,I=new WeakMap,z=new WeakMap,te=new WeakMap,Q=new WeakMap,ye=new WeakMap,ae=new WeakMap,V=new WeakMap,we=new WeakMap,se=new WeakMap,be=new WeakMap,E=new WeakSet,Ii=function(){let x=new d(U(this,T)),D=new d(U(this,T));Be(this,V,x),Be(this,ae,D),Be(this,le,(p,s,r=n.now())=>{if(D[p]=s!==0?r:0,x[p]=s,s!==0&&this.ttlAutopurge){let c=setTimeout(()=>{U(this,P).call(this,p)&&this.delete(U(this,L)[p])},s+1);c.unref&&c.unref()}}),Be(this,de,p=>{D[p]=x[p]!==0?n.now():0}),Be(this,Ee,(p,s)=>{if(x[s]){let r=x[s],c=D[s];p.ttl=r,p.start=c,p.now=H||ie();let y=p.now-c;p.remainingTTL=r-y}});let H=0,ie=()=>{let p=n.now();if(this.ttlResolution>0){H=p;let s=setTimeout(()=>H=0,this.ttlResolution);s.unref&&s.unref()}return p};this.getRemainingTTL=p=>{let s=U(this,C).get(p);if(s===void 0)return 0;let r=x[s],c=D[s];if(r===0||c===0)return 1/0;let y=(H||ie())-c;return r-y},Be(this,P,p=>x[p]!==0&&D[p]!==0&&(H||ie())-D[p]>x[p])},de=new WeakMap,Ee=new WeakMap,le=new WeakMap,P=new WeakMap,Hs=function(){let x=new d(U(this,T));Be(this,R,0),Be(this,ye,x),Be(this,G,D=>{Be(this,R,U(this,R)-x[D]),x[D]=0}),Be(this,re,(D,H,ie,p)=>{if(ke(this,E,Ne).call(this,H))return 0;if(!l(ie))if(p){if(typeof p!="function")throw new TypeError("sizeCalculation must be a function");if(ie=p(H,D),!l(ie))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return ie}),Be(this,ue,(D,H,ie)=>{if(x[D]=H,U(this,M)){let p=U(this,M)-x[D];for(;U(this,R)>p;)ke(this,E,Rr).call(this,!0)}Be(this,R,U(this,R)+x[D]),ie&&(ie.entrySize=H,ie.totalCalculatedSize=U(this,R))})},G=new WeakMap,ue=new WeakMap,re=new WeakMap,Pt=function*({allowStale:x=this.allowStale}={}){if(U(this,F))for(let D=U(this,z);!(!ke(this,E,Ti).call(this,D)||((x||!U(this,P).call(this,D))&&(yield D),D===U(this,I)));)D=U(this,ne)[D]},Ut=function*({allowStale:x=this.allowStale}={}){if(U(this,F))for(let D=U(this,I);!(!ke(this,E,Ti).call(this,D)||((x||!U(this,P).call(this,D))&&(yield D),D===U(this,z)));)D=U(this,X)[D]},Ti=function(x){return x!==void 0&&U(this,C).get(U(this,L)[x])===x},Rr=function(x){var p,s;let D=U(this,I),H=U(this,L)[D],ie=U(this,q)[D];return U(this,se)&&ke(this,E,Ne).call(this,ie)?ie.__abortController.abort(new Error("evicted")):(U(this,we)||U(this,be))&&(U(this,we)&&((p=U(this,B))==null||p.call(this,ie,H,"evict")),U(this,be)&&((s=U(this,Q))==null||s.push([ie,H,"evict"]))),U(this,G).call(this,D),x&&(U(this,L)[D]=void 0,U(this,q)[D]=void 0,U(this,te).push(D)),U(this,F)===1?(Be(this,I,Be(this,z,0)),U(this,te).length=0):Be(this,I,U(this,X)[D]),U(this,C).delete(H),wr(this,F)._--,D},Or=function(x,D,H,ie){let p=D===void 0?void 0:U(this,q)[D];if(ke(this,E,Ne).call(this,p))return p;let s=new a,{signal:r}=H;r==null||r.addEventListener("abort",()=>s.abort(r.reason),{signal:s.signal});let c={signal:s.signal,options:H,context:ie},y=(Se,Ie=!1)=>{let{aborted:Ae}=s.signal,Me=H.ignoreFetchAbort&&Se!==void 0;if(H.status&&(Ae&&!Ie?(H.status.fetchAborted=!0,H.status.fetchError=s.signal.reason,Me&&(H.status.fetchAbortIgnored=!0)):H.status.fetchResolved=!0),Ae&&!Me&&!Ie)return k(s.signal.reason);let He=_e;return U(this,q)[D]===_e&&(Se===void 0?He.__staleWhileFetching?U(this,q)[D]=He.__staleWhileFetching:this.delete(x):(H.status&&(H.status.fetchUpdated=!0),this.set(x,Se,c.options))),Se},v=Se=>(H.status&&(H.status.fetchRejected=!0,H.status.fetchError=Se),k(Se)),k=Se=>{let{aborted:Ie}=s.signal,Ae=Ie&&H.allowStaleOnFetchAbort,Me=Ae||H.allowStaleOnFetchRejection,He=Me||H.noDeleteOnFetchRejection,$e=_e;if(U(this,q)[D]===_e&&(!He||$e.__staleWhileFetching===void 0?this.delete(x):Ae||(U(this,q)[D]=$e.__staleWhileFetching)),Me)return H.status&&$e.__staleWhileFetching!==void 0&&(H.status.returnedStale=!0),$e.__staleWhileFetching;if($e.__returned===$e)throw Se},Y=(Se,Ie)=>{var Me;let Ae=(Me=U(this,j))==null?void 0:Me.call(this,x,p,c);Ae&&Ae instanceof Promise&&Ae.then(He=>Se(He===void 0?void 0:He),Ie),s.signal.addEventListener("abort",()=>{(!H.ignoreFetchAbort||H.allowStaleOnFetchAbort)&&(Se(void 0),H.allowStaleOnFetchAbort&&(Se=He=>y(He,!0)))})};H.status&&(H.status.fetchDispatched=!0);let _e=new Promise(Y).then(y,v),Te=Object.assign(_e,{__abortController:s,__staleWhileFetching:p,__returned:void 0});return D===void 0?(this.set(x,Te,{...c.options,status:void 0}),D=U(this,C).get(x)):U(this,q)[D]=Te,Te},Ne=function(x){if(!U(this,se))return!1;let D=x;return!!D&&D instanceof Promise&&D.hasOwnProperty("__staleWhileFetching")&&D.__abortController instanceof a},ki=function(x,D){U(this,ne)[D]=x,U(this,X)[x]=D},pr=function(x){x!==U(this,z)&&(x===U(this,I)?Be(this,I,U(this,X)[x]):ke(this,E,ki).call(this,U(this,ne)[x],U(this,X)[x]),ke(this,E,ki).call(this,U(this,z),x),Be(this,z,x))},N);e.LRUCache=m}),Ct=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.ContainerIterator=e.Container=e.Base=void 0;var n=class{constructor(f=0){this.iteratorType=f}equals(f){return this.o===f.o}};e.ContainerIterator=n;var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};e.Base=t;var h=class extends t{};e.Container=h}),au=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=Ct(),t=class extends n.Base{constructor(f=[]){super(),this.S=[];let a=this;f.forEach(function(i){a.push(i)})}clear(){this.i=0,this.S=[]}push(f){return this.S.push(f),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},h=t;e.default=h}),lu=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=Ct(),t=class extends n.Base{constructor(f=[]){super(),this.j=0,this.q=[];let a=this;f.forEach(function(i){a.push(i)})}clear(){this.q=[],this.i=this.j=0}push(f){let a=this.q.length;if(this.j/a>.5&&this.j+this.i>=a&&a>4096){let i=this.i;for(let o=0;o<i;++o)this.q[o]=this.q[this.j+o];this.j=0,this.q[this.i]=f}else this.q[this.j+this.i]=f;return++this.i}pop(){if(this.i===0)return;let f=this.q[this.j++];return this.i-=1,f}front(){if(this.i!==0)return this.q[this.j]}},h=t;e.default=h}),uu=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=Ct(),t=class extends n.Base{constructor(f=[],a=function(o,l){return o>l?-1:o<l?1:0},i=!0){if(super(),this.v=a,Array.isArray(f))this.C=i?[...f]:f;else{this.C=[];let l=this;f.forEach(function(u){l.C.push(u)})}this.i=this.C.length;let o=this.i>>1;for(let l=this.i-1>>1;l>=0;--l)this.k(l,o)}m(f){let a=this.C[f];for(;f>0;){let i=f-1>>1,o=this.C[i];if(this.v(o,a)<=0)break;this.C[f]=o,f=i}this.C[f]=a}k(f,a){let i=this.C[f];for(;f<a;){let o=f<<1|1,l=o+1,u=this.C[o];if(l<this.i&&this.v(u,this.C[l])>0&&(o=l,u=this.C[l]),this.v(u,i)>=0)break;this.C[f]=u,f=o}this.C[f]=i}clear(){this.i=0,this.C.length=0}push(f){this.C.push(f),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let f=this.C[0],a=this.C.pop();return this.i-=1,this.i&&(this.C[0]=a,this.k(0,this.i>>1)),f}top(){return this.C[0]}find(f){return this.C.indexOf(f)>=0}remove(f){let a=this.C.indexOf(f);return a<0?!1:(a===0?this.pop():a===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(a,1,this.C.pop()),this.i-=1,this.m(a),this.k(a,this.i>>1)),!0)}updateItem(f){let a=this.C.indexOf(f);return a<0?!1:(this.m(a),this.k(a,this.i>>1),!0)}toArray(){return[...this.C]}},h=t;e.default=h}),Yi=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=Ct(),t=class extends n.Container{},h=t;e.default=h}),xt=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.throwIteratorAccessError=n;function n(){throw new RangeError("Iterator access denied!")}}),Vs=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.RandomIterator=void 0;var n=Ct(),t=xt(),h=class extends n.ContainerIterator{constructor(f,a){super(a),this.o=f,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,t.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,t.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,t.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,t.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(f){this.container.setElementByPos(this.o,f)}};e.RandomIterator=h}),hu=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=h(Yi()),t=Vs();function h(o){return o&&o.t?o:{default:o}}var f=class zs extends t.RandomIterator{constructor(l,u,d){super(l,d),this.container=u}copy(){return new zs(this.o,this.container,this.iteratorType)}},a=class extends n.default{constructor(o=[],l=!0){if(super(),Array.isArray(o))this.J=l?[...o]:o,this.i=o.length;else{this.J=[];let u=this;o.forEach(function(d){u.pushBack(d)})}}clear(){this.i=0,this.J.length=0}begin(){return new f(0,this)}end(){return new f(this.i,this)}rBegin(){return new f(this.i-1,this,1)}rEnd(){return new f(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;return this.J[o]}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;return this.J.splice(o,1),this.i-=1,this.i}eraseElementByValue(o){let l=0;for(let u=0;u<this.i;++u)this.J[u]!==o&&(this.J[l++]=this.J[u]);return this.i=this.J.length=l,this.i}eraseElementByIterator(o){let l=o.o;return o=o.next(),this.eraseElementByPos(l),o}pushBack(o){return this.J.push(o),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(o,l){if(o<0||o>this.i-1)throw new RangeError;this.J[o]=l}insert(o,l,u=1){if(o<0||o>this.i)throw new RangeError;return this.J.splice(o,0,...new Array(u).fill(l)),this.i+=u,this.i}find(o){for(let l=0;l<this.i;++l)if(this.J[l]===o)return new f(l,this);return this.end()}reverse(){this.J.reverse()}unique(){let o=1;for(let l=1;l<this.i;++l)this.J[l]!==this.J[l-1]&&(this.J[o++]=this.J[l]);return this.i=this.J.length=o,this.i}sort(o){this.J.sort(o)}forEach(o){for(let l=0;l<this.i;++l)o(this.J[l],l,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},i=a;e.default=i}),cu=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=f(Yi()),t=Ct(),h=xt();function f(l){return l&&l.t?l:{default:l}}var a=class Ks extends t.ContainerIterator{constructor(u,d,g,m){super(m),this.o=u,this.h=d,this.container=g,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,h.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,h.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,h.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,h.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,h.throwIteratorAccessError)(),this.o.l}set pointer(u){this.o===this.h&&(0,h.throwIteratorAccessError)(),this.o.l=u}copy(){return new Ks(this.o,this.h,this.container,this.iteratorType)}},i=class extends n.default{constructor(l=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let u=this;l.forEach(function(d){u.pushBack(d)})}V(l){let{L:u,B:d}=l;u.B=d,d.L=u,l===this.p&&(this.p=d),l===this._&&(this._=u),this.i-=1}G(l,u){let d=u.B,g={l,L:u,B:d};u.B=g,d.L=g,u===this.h&&(this.p=g),d===this.h&&(this._=g),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new a(this.p,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this._,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let u=this.p;for(;l--;)u=u.B;return u.l}eraseElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let u=this.p;for(;l--;)u=u.B;return this.V(u),this.i}eraseElementByValue(l){let u=this.p;for(;u!==this.h;)u.l===l&&this.V(u),u=u.B;return this.i}eraseElementByIterator(l){let u=l.o;return u===this.h&&(0,h.throwIteratorAccessError)(),l=l.next(),this.V(u),l}pushBack(l){return this.G(l,this._),this.i}popBack(){if(this.i===0)return;let l=this._.l;return this.V(this._),l}pushFront(l){return this.G(l,this.h),this.i}popFront(){if(this.i===0)return;let l=this.p.l;return this.V(this.p),l}setElementByPos(l,u){if(l<0||l>this.i-1)throw new RangeError;let d=this.p;for(;l--;)d=d.B;d.l=u}insert(l,u,d=1){if(l<0||l>this.i)throw new RangeError;if(d<=0)return this.i;if(l===0)for(;d--;)this.pushFront(u);else if(l===this.i)for(;d--;)this.pushBack(u);else{let g=this.p;for(let b=1;b<l;++b)g=g.B;let m=g.B;for(this.i+=d;d--;)g.B={l:u,L:g},g.B.L=g,g=g.B;g.B=m,m.L=g}return this.i}find(l){let u=this.p;for(;u!==this.h;){if(u.l===l)return new a(u,this.h,this);u=u.B}return this.end()}reverse(){if(this.i<=1)return;let l=this.p,u=this._,d=0;for(;d<<1<this.i;){let g=l.l;l.l=u.l,u.l=g,l=l.B,u=u.L,d+=1}}unique(){if(this.i<=1)return this.i;let l=this.p;for(;l!==this.h;){let u=l;for(;u.B!==this.h&&u.l===u.B.l;)u=u.B,this.i-=1;l.B=u.B,l.B.L=l,l=l.B}return this.i}sort(l){if(this.i<=1)return;let u=[];this.forEach(function(g){u.push(g)}),u.sort(l);let d=this.p;u.forEach(function(g){d.l=g,d=d.B})}merge(l){let u=this;if(this.i===0)l.forEach(function(d){u.pushBack(d)});else{let d=this.p;l.forEach(function(g){for(;d!==u.h&&d.l<=g;)d=d.B;u.G(g,d.L)})}return this.i}forEach(l){let u=this.p,d=0;for(;u!==this.h;)l(u.l,d++,this),u=u.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let l=this.p;for(;l!==this.h;)yield l.l,l=l.B}).bind(this)()}},o=i;e.default=o}),fu=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=h(Yi()),t=Vs();function h(o){return o&&o.t?o:{default:o}}var f=class Ys extends t.RandomIterator{constructor(l,u,d){super(l,d),this.container=u}copy(){return new Ys(this.o,this.container,this.iteratorType)}},a=class extends n.default{constructor(o=[],l=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let u=(()=>{if(typeof o.length=="number")return o.length;if(typeof o.size=="number")return o.size;if(typeof o.size=="function")return o.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=l,this.P=Math.max(Math.ceil(u/this.F),1);for(let m=0;m<this.P;++m)this.A.push(new Array(this.F));let d=Math.ceil(u/this.F);this.j=this.R=(this.P>>1)-(d>>1),this.D=this.N=this.F-u%this.F>>1;let g=this;o.forEach(function(m){g.pushBack(m)})}T(){let o=[],l=Math.max(this.P>>1,1);for(let u=0;u<l;++u)o[u]=new Array(this.F);for(let u=this.j;u<this.P;++u)o[o.length]=this.A[u];for(let u=0;u<this.R;++u)o[o.length]=this.A[u];o[o.length]=[...this.A[this.R]],this.j=l,this.R=o.length-1;for(let u=0;u<l;++u)o[o.length]=new Array(this.F);this.A=o,this.P=o.length}O(o){let l=this.D+o+1,u=l%this.F,d=u-1,g=this.j+(l-u)/this.F;return u===0&&(g-=1),g%=this.P,d<0&&(d+=this.F),{curNodeBucketIndex:g,curNodePointerIndex:d}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new f(0,this)}end(){return new f(this.i,this)}rBegin(){return new f(this.i-1,this,1)}rEnd(){return new f(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(o){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=o,this.i}popBack(){if(this.i===0)return;let o=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,o}pushFront(o){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=o,this.i}popFront(){if(this.i===0)return;let o=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,o}getElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let{curNodeBucketIndex:l,curNodePointerIndex:u}=this.O(o);return this.A[l][u]}setElementByPos(o,l){if(o<0||o>this.i-1)throw new RangeError;let{curNodeBucketIndex:u,curNodePointerIndex:d}=this.O(o);this.A[u][d]=l}insert(o,l,u=1){if(o<0||o>this.i)throw new RangeError;if(o===0)for(;u--;)this.pushFront(l);else if(o===this.i)for(;u--;)this.pushBack(l);else{let d=[];for(let g=o;g<this.i;++g)d.push(this.getElementByPos(g));this.cut(o-1);for(let g=0;g<u;++g)this.pushBack(l);for(let g=0;g<d.length;++g)this.pushBack(d[g])}return this.i}cut(o){if(o<0)return this.clear(),0;let{curNodeBucketIndex:l,curNodePointerIndex:u}=this.O(o);return this.R=l,this.N=u,this.i=o+1,this.i}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;if(o===0)this.popFront();else if(o===this.i-1)this.popBack();else{let l=[];for(let d=o+1;d<this.i;++d)l.push(this.getElementByPos(d));this.cut(o),this.popBack();let u=this;l.forEach(function(d){u.pushBack(d)})}return this.i}eraseElementByValue(o){if(this.i===0)return 0;let l=[];for(let d=0;d<this.i;++d){let g=this.getElementByPos(d);g!==o&&l.push(g)}let u=l.length;for(let d=0;d<u;++d)this.setElementByPos(d,l[d]);return this.cut(u-1)}eraseElementByIterator(o){let l=o.o;return this.eraseElementByPos(l),o=o.next(),o}find(o){for(let l=0;l<this.i;++l)if(this.getElementByPos(l)===o)return new f(l,this);return this.end()}reverse(){let o=0,l=this.i-1;for(;o<l;){let u=this.getElementByPos(o);this.setElementByPos(o,this.getElementByPos(l)),this.setElementByPos(l,u),o+=1,l-=1}}unique(){if(this.i<=1)return this.i;let o=1,l=this.getElementByPos(0);for(let u=1;u<this.i;++u){let d=this.getElementByPos(u);d!==l&&(l=d,this.setElementByPos(o++,d))}for(;this.i>o;)this.popBack();return this.i}sort(o){let l=[];for(let u=0;u<this.i;++u)l.push(this.getElementByPos(u));l.sort(o);for(let u=0;u<this.i;++u)this.setElementByPos(u,l[u])}shrinkToFit(){if(this.i===0)return;let o=[];this.forEach(function(l){o.push(l)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let l=0;l<this.P;++l)this.A.push(new Array(this.F));for(let l=0;l<o.length;++l)this.pushBack(o[l])}forEach(o){for(let l=0;l<this.i;++l)o(this.getElementByPos(l),l,this)}[Symbol.iterator](){return(function*(){for(let o=0;o<this.i;++o)yield this.getElementByPos(o)}).bind(this)()}},i=a;e.default=i}),pu=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.TreeNodeEnableIndex=e.TreeNode=void 0;var n=class{constructor(h,f){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=h,this.l=f}L(){let h=this;if(h.ee===1&&h.tt.tt===h)h=h.W;else if(h.U)for(h=h.U;h.W;)h=h.W;else{let f=h.tt;for(;f.U===h;)h=f,f=h.tt;h=f}return h}B(){let h=this;if(h.W){for(h=h.W;h.U;)h=h.U;return h}else{let f=h.tt;for(;f.W===h;)h=f,f=h.tt;return h.W!==f?f:h}}te(){let h=this.tt,f=this.W,a=f.U;return h.tt===this?h.tt=f:h.U===this?h.U=f:h.W=f,f.tt=h,f.U=this,this.tt=f,this.W=a,a&&(a.tt=this),f}se(){let h=this.tt,f=this.U,a=f.W;return h.tt===this?h.tt=f:h.U===this?h.U=f:h.W=f,f.tt=h,f.W=this,this.tt=f,this.U=a,a&&(a.tt=this),f}};e.TreeNode=n;var t=class extends n{constructor(){super(...arguments),this.rt=1}te(){let h=super.te();return this.ie(),h.ie(),h}se(){let h=super.se();return this.ie(),h.ie(),h}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};e.TreeNodeEnableIndex=t}),Gs=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=pu(),t=Ct(),h=xt(),f=class extends t.Container{constructor(i=function(l,u){return l<u?-1:l>u?1:0},o=!1){super(),this.Y=void 0,this.v=i,o?(this.re=n.TreeNodeEnableIndex,this.M=function(l,u,d){let g=this.ne(l,u,d);if(g){let m=g.tt;for(;m!==this.h;)m.rt+=1,m=m.tt;let b=this.he(g);if(b){let{parentNode:w,grandParent:_,curNode:T}=b;w.ie(),_.ie(),T.ie()}}return this.i},this.V=function(l){let u=this.fe(l);for(;u!==this.h;)u.rt-=1,u=u.tt}):(this.re=n.TreeNode,this.M=function(l,u,d){let g=this.ne(l,u,d);return g&&this.he(g),this.i},this.V=this.fe),this.h=new this.re}X(i,o){let l=this.h;for(;i;){let u=this.v(i.u,o);if(u<0)i=i.W;else if(u>0)l=i,i=i.U;else return i}return l}Z(i,o){let l=this.h;for(;i;)this.v(i.u,o)<=0?i=i.W:(l=i,i=i.U);return l}$(i,o){let l=this.h;for(;i;){let u=this.v(i.u,o);if(u<0)l=i,i=i.W;else if(u>0)i=i.U;else return i}return l}rr(i,o){let l=this.h;for(;i;)this.v(i.u,o)<0?(l=i,i=i.W):i=i.U;return l}ue(i){for(;;){let o=i.tt;if(o===this.h)return;if(i.ee===1){i.ee=0;return}if(i===o.U){let l=o.W;if(l.ee===1)l.ee=0,o.ee=1,o===this.Y?this.Y=o.te():o.te();else if(l.W&&l.W.ee===1){l.ee=o.ee,o.ee=0,l.W.ee=0,o===this.Y?this.Y=o.te():o.te();return}else l.U&&l.U.ee===1?(l.ee=1,l.U.ee=0,l.se()):(l.ee=1,i=o)}else{let l=o.U;if(l.ee===1)l.ee=0,o.ee=1,o===this.Y?this.Y=o.se():o.se();else if(l.U&&l.U.ee===1){l.ee=o.ee,o.ee=0,l.U.ee=0,o===this.Y?this.Y=o.se():o.se();return}else l.W&&l.W.ee===1?(l.ee=1,l.W.ee=0,l.te()):(l.ee=1,i=o)}}}fe(i){if(this.i===1)return this.clear(),this.h;let o=i;for(;o.U||o.W;){if(o.W)for(o=o.W;o.U;)o=o.U;else o=o.U;[i.u,o.u]=[o.u,i.u],[i.l,o.l]=[o.l,i.l],i=o}this.h.U===o?this.h.U=o.tt:this.h.W===o&&(this.h.W=o.tt),this.ue(o);let l=o.tt;return o===l.U?l.U=void 0:l.W=void 0,this.i-=1,this.Y.ee=0,l}oe(i,o){return i===void 0?!1:this.oe(i.U,o)||o(i)?!0:this.oe(i.W,o)}he(i){for(;;){let o=i.tt;if(o.ee===0)return;let l=o.tt;if(o===l.U){let u=l.W;if(u&&u.ee===1){if(u.ee=o.ee=0,l===this.Y)return;l.ee=1,i=l;continue}else if(i===o.W){if(i.ee=0,i.U&&(i.U.tt=o),i.W&&(i.W.tt=l),o.W=i.U,l.U=i.W,i.U=o,i.W=l,l===this.Y)this.Y=i,this.h.tt=i;else{let d=l.tt;d.U===l?d.U=i:d.W=i}return i.tt=l.tt,o.tt=i,l.tt=i,l.ee=1,{parentNode:o,grandParent:l,curNode:i}}else o.ee=0,l===this.Y?this.Y=l.se():l.se(),l.ee=1}else{let u=l.U;if(u&&u.ee===1){if(u.ee=o.ee=0,l===this.Y)return;l.ee=1,i=l;continue}else if(i===o.U){if(i.ee=0,i.U&&(i.U.tt=l),i.W&&(i.W.tt=o),l.W=i.U,o.U=i.W,i.U=l,i.W=o,l===this.Y)this.Y=i,this.h.tt=i;else{let d=l.tt;d.U===l?d.U=i:d.W=i}return i.tt=l.tt,o.tt=i,l.tt=i,l.ee=1,{parentNode:o,grandParent:l,curNode:i}}else o.ee=0,l===this.Y?this.Y=l.te():l.te(),l.ee=1}return}}ne(i,o,l){if(this.Y===void 0){this.i+=1,this.Y=new this.re(i,o),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let u,d=this.h.U,g=this.v(d.u,i);if(g===0){d.l=o;return}else if(g>0)d.U=new this.re(i,o),d.U.tt=d,u=d.U,this.h.U=u;else{let m=this.h.W,b=this.v(m.u,i);if(b===0){m.l=o;return}else if(b<0)m.W=new this.re(i,o),m.W.tt=m,u=m.W,this.h.W=u;else{if(l!==void 0){let w=l.o;if(w!==this.h){let _=this.v(w.u,i);if(_===0){w.l=o;return}else if(_>0){let T=w.L(),M=this.v(T.u,i);if(M===0){T.l=o;return}else M<0&&(u=new this.re(i,o),T.W===void 0?(T.W=u,u.tt=T):(w.U=u,u.tt=w))}}}if(u===void 0)for(u=this.Y;;){let w=this.v(u.u,i);if(w>0){if(u.U===void 0){u.U=new this.re(i,o),u.U.tt=u,u=u.U;break}u=u.U}else if(w<0){if(u.W===void 0){u.W=new this.re(i,o),u.W.tt=u,u=u.W;break}u=u.W}else{u.l=o;return}}}}return this.i+=1,u}I(i,o){for(;i;){let l=this.v(i.u,o);if(l<0)i=i.W;else if(l>0)i=i.U;else return i}return i||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(i,o){let l=i.o;if(l===this.h&&(0,h.throwIteratorAccessError)(),this.i===1)return l.u=o,!0;if(l===this.h.U)return this.v(l.B().u,o)>0?(l.u=o,!0):!1;if(l===this.h.W)return this.v(l.L().u,o)<0?(l.u=o,!0):!1;let u=l.L().u;if(this.v(u,o)>=0)return!1;let d=l.B().u;return this.v(d,o)<=0?!1:(l.u=o,!0)}eraseElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let o=0,l=this;return this.oe(this.Y,function(u){return i===o?(l.V(u),!0):(o+=1,!1)}),this.i}eraseElementByKey(i){if(this.i===0)return!1;let o=this.I(this.Y,i);return o===this.h?!1:(this.V(o),!0)}eraseElementByIterator(i){let o=i.o;o===this.h&&(0,h.throwIteratorAccessError)();let l=o.W===void 0;return i.iteratorType===0?l&&i.next():(!l||o.U===void 0)&&i.next(),this.V(o),i}forEach(i){let o=0;for(let l of this)i(l,o++,this)}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let o,l=0;for(let u of this){if(l===i){o=u;break}l+=1}return o}getHeight(){if(this.i===0)return 0;let i=function(o){return o?Math.max(i(o.U),i(o.W))+1:0};return i(this.Y)}},a=f;e.default=a}),Qs=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=Ct(),t=xt(),h=class extends n.ContainerIterator{constructor(a,i,o){super(o),this.o=a,this.h=i,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let a=this.o,i=this.h.tt;if(a===this.h)return i?i.rt-1:0;let o=0;for(a.U&&(o+=a.U.rt);a!==i;){let l=a.tt;a===l.W&&(o+=1,l.U&&(o+=l.U.rt)),a=l}return o}},f=h;e.default=f}),du=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=f(Gs()),t=f(Qs()),h=xt();function f(l){return l&&l.t?l:{default:l}}var a=class Js extends t.default{constructor(u,d,g,m){super(u,d,m),this.container=g}get pointer(){return this.o===this.h&&(0,h.throwIteratorAccessError)(),this.o.u}copy(){return new Js(this.o,this.h,this.container,this.iteratorType)}},i=class extends n.default{constructor(l=[],u,d){super(u,d);let g=this;l.forEach(function(m){g.insert(m)})}*K(l){l!==void 0&&(yield*this.K(l.U),yield l.u,yield*this.K(l.W))}begin(){return new a(this.h.U||this.h,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this.h.W||this.h,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(l,u){return this.M(l,void 0,u)}find(l){let u=this.I(this.Y,l);return new a(u,this.h,this)}lowerBound(l){let u=this.X(this.Y,l);return new a(u,this.h,this)}upperBound(l){let u=this.Z(this.Y,l);return new a(u,this.h,this)}reverseLowerBound(l){let u=this.$(this.Y,l);return new a(u,this.h,this)}reverseUpperBound(l){let u=this.rr(this.Y,l);return new a(u,this.h,this)}union(l){let u=this;return l.forEach(function(d){u.insert(d)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},o=i;e.default=o}),gu=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=f(Gs()),t=f(Qs()),h=xt();function f(l){return l&&l.t?l:{default:l}}var a=class Xs extends t.default{constructor(u,d,g,m){super(u,d,m),this.container=g}get pointer(){this.o===this.h&&(0,h.throwIteratorAccessError)();let u=this;return new Proxy([],{get(d,g){if(g==="0")return u.o.u;if(g==="1")return u.o.l},set(d,g,m){if(g!=="1")throw new TypeError("props must be 1");return u.o.l=m,!0}})}copy(){return new Xs(this.o,this.h,this.container,this.iteratorType)}},i=class extends n.default{constructor(l=[],u,d){super(u,d);let g=this;l.forEach(function(m){g.setElement(m[0],m[1])})}*K(l){l!==void 0&&(yield*this.K(l.U),yield[l.u,l.l],yield*this.K(l.W))}begin(){return new a(this.h.U||this.h,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this.h.W||this.h,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){if(this.i===0)return;let l=this.h.U;return[l.u,l.l]}back(){if(this.i===0)return;let l=this.h.W;return[l.u,l.l]}lowerBound(l){let u=this.X(this.Y,l);return new a(u,this.h,this)}upperBound(l){let u=this.Z(this.Y,l);return new a(u,this.h,this)}reverseLowerBound(l){let u=this.$(this.Y,l);return new a(u,this.h,this)}reverseUpperBound(l){let u=this.rr(this.Y,l);return new a(u,this.h,this)}setElement(l,u,d){return this.M(l,u,d)}find(l){let u=this.I(this.Y,l);return new a(u,this.h,this)}getElementByKey(l){return this.I(this.Y,l).l}union(l){let u=this;return l.forEach(function(d){u.setElement(d[0],d[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},o=i;e.default=o}),Zs=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=n;function n(t){let h=typeof t;return h==="object"&&t!==null||h==="function"}}),ea=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.HashContainerIterator=e.HashContainer=void 0;var n=Ct(),t=f(Zs()),h=xt();function f(o){return o&&o.t?o:{default:o}}var a=class extends n.ContainerIterator{constructor(o,l,u){super(u),this.o=o,this.h=l,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,h.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,h.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,h.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,h.throwIteratorAccessError)(),this.o=this.o.L,this})}};e.HashContainerIterator=a;var i=class extends n.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(o){let{L:l,B:u}=o;l.B=u,u.L=l,o===this.p&&(this.p=u),o===this._&&(this._=l),this.i-=1}M(o,l,u){u===void 0&&(u=(0,t.default)(o));let d;if(u){let g=o[this.HASH_TAG];if(g!==void 0)return this.H[g].l=l,this.i;Object.defineProperty(o,this.HASH_TAG,{value:this.H.length,configurable:!0}),d={u:o,l,L:this._,B:this.h},this.H.push(d)}else{let g=this.g[o];if(g)return g.l=l,this.i;d={u:o,l,L:this._,B:this.h},this.g[o]=d}return this.i===0?(this.p=d,this.h.B=d):this._.B=d,this._=d,this.h.L=d,++this.i}I(o,l){if(l===void 0&&(l=(0,t.default)(o)),l){let u=o[this.HASH_TAG];return u===void 0?this.h:this.H[u]}else return this.g[o]||this.h}clear(){let o=this.HASH_TAG;this.H.forEach(function(l){delete l.u[o]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(o,l){let u;if(l===void 0&&(l=(0,t.default)(o)),l){let d=o[this.HASH_TAG];if(d===void 0)return!1;delete o[this.HASH_TAG],u=this.H[d],delete this.H[d]}else{if(u=this.g[o],u===void 0)return!1;delete this.g[o]}return this.V(u),!0}eraseElementByIterator(o){let l=o.o;return l===this.h&&(0,h.throwIteratorAccessError)(),this.V(l),o.next()}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let l=this.p;for(;o--;)l=l.B;return this.V(l),this.i}};e.HashContainer=i}),mu=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=ea(),t=xt(),h=class ta extends n.HashContainerIterator{constructor(o,l,u,d){super(o,l,d),this.container=u}get pointer(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o.u}copy(){return new ta(this.o,this.h,this.container,this.iteratorType)}},f=class extends n.HashContainer{constructor(i=[]){super();let o=this;i.forEach(function(l){o.insert(l)})}begin(){return new h(this.p,this.h,this)}end(){return new h(this.h,this.h,this)}rBegin(){return new h(this._,this.h,this,1)}rEnd(){return new h(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(i,o){return this.M(i,void 0,o)}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let o=this.p;for(;i--;)o=o.B;return o.u}find(i,o){let l=this.I(i,o);return new h(l,this.h,this)}forEach(i){let o=0,l=this.p;for(;l!==this.h;)i(l.u,o++,this),l=l.B}[Symbol.iterator](){return(function*(){let i=this.p;for(;i!==this.h;)yield i.u,i=i.B}).bind(this)()}},a=f;e.default=a}),yu=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=ea(),t=f(Zs()),h=xt();function f(l){return l&&l.t?l:{default:l}}var a=class ra extends n.HashContainerIterator{constructor(u,d,g,m){super(u,d,m),this.container=g}get pointer(){this.o===this.h&&(0,h.throwIteratorAccessError)();let u=this;return new Proxy([],{get(d,g){if(g==="0")return u.o.u;if(g==="1")return u.o.l},set(d,g,m){if(g!=="1")throw new TypeError("props must be 1");return u.o.l=m,!0}})}copy(){return new ra(this.o,this.h,this.container,this.iteratorType)}},i=class extends n.HashContainer{constructor(l=[]){super();let u=this;l.forEach(function(d){u.setElement(d[0],d[1])})}begin(){return new a(this.p,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this._,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(l,u,d){return this.M(l,u,d)}getElementByKey(l,u){if(u===void 0&&(u=(0,t.default)(l)),u){let g=l[this.HASH_TAG];return g!==void 0?this.H[g].l:void 0}let d=this.g[l];return d?d.l:void 0}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let u=this.p;for(;l--;)u=u.B;return[u.u,u.l]}find(l,u){let d=this.I(l,u);return new a(d,this.h,this)}forEach(l){let u=0,d=this.p;for(;d!==this.h;)l([d.u,d.l],u++,this),d=d.B}[Symbol.iterator](){return(function*(){let l=this.p;for(;l!==this.h;)yield[l.u,l.l],l=l.B}).bind(this)()}},o=i;e.default=o}),bu=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"t",{value:!0}),Object.defineProperty(e,"Deque",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"HashMap",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"HashSet",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"LinkList",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"OrderedMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"OrderedSet",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"PriorityQueue",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"Queue",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Stack",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"Vector",{enumerable:!0,get:function(){return f.default}});var n=g(au()),t=g(lu()),h=g(uu()),f=g(hu()),a=g(cu()),i=g(fu()),o=g(du()),l=g(gu()),u=g(mu()),d=g(yu());function g(m){return m&&m.t?m:{default:m}}}),wu=ve((e,n)=>{ce(),pe(),fe();var t=bu().OrderedSet,h=kt()("number-allocator:trace"),f=kt()("number-allocator:error");function a(o,l){this.low=o,this.high=l}a.prototype.equals=function(o){return this.low===o.low&&this.high===o.high},a.prototype.compare=function(o){return this.low<o.low&&this.high<o.low?-1:o.low<this.low&&o.high<this.low?1:0};function i(o,l){if(!(this instanceof i))return new i(o,l);this.min=o,this.max=l,this.ss=new t([],(u,d)=>u.compare(d)),h("Create"),this.clear()}i.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},i.prototype.alloc=function(){if(this.ss.size()===0)return h("alloc():empty"),null;let o=this.ss.begin(),l=o.pointer.low,u=o.pointer.high,d=l;return d+1<=u?this.ss.updateKeyByIterator(o,new a(l+1,u)):this.ss.eraseElementByPos(0),h("alloc():"+d),d},i.prototype.use=function(o){let l=new a(o,o),u=this.ss.lowerBound(l);if(!u.equals(this.ss.end())){let d=u.pointer.low,g=u.pointer.high;return u.pointer.equals(l)?(this.ss.eraseElementByIterator(u),h("use():"+o),!0):d>o?!1:d===o?(this.ss.updateKeyByIterator(u,new a(d+1,g)),h("use():"+o),!0):g===o?(this.ss.updateKeyByIterator(u,new a(d,g-1)),h("use():"+o),!0):(this.ss.updateKeyByIterator(u,new a(o+1,g)),this.ss.insert(new a(d,o-1)),h("use():"+o),!0)}return h("use():failed"),!1},i.prototype.free=function(o){if(o<this.min||o>this.max){f("free():"+o+" is out of range");return}let l=new a(o,o),u=this.ss.upperBound(l);if(u.equals(this.ss.end())){if(u.equals(this.ss.begin())){this.ss.insert(l);return}u.pre();let d=u.pointer.high;u.pointer.high+1===o?this.ss.updateKeyByIterator(u,new a(d,o)):this.ss.insert(l)}else if(u.equals(this.ss.begin()))if(o+1===u.pointer.low){let d=u.pointer.high;this.ss.updateKeyByIterator(u,new a(o,d))}else this.ss.insert(l);else{let d=u.pointer.low,g=u.pointer.high;u.pre();let m=u.pointer.low;u.pointer.high+1===o?o+1===d?(this.ss.eraseElementByIterator(u),this.ss.updateKeyByIterator(u,new a(m,g))):this.ss.updateKeyByIterator(u,new a(m,o)):o+1===d?(this.ss.eraseElementByIterator(u.next()),this.ss.insert(new a(o,g))):this.ss.insert(l)}h("free():"+o)},i.prototype.clear=function(){h("clear()"),this.ss.clear(),this.ss.insert(new a(this.min,this.max))},i.prototype.intervalCount=function(){return this.ss.size()},i.prototype.dump=function(){console.log("length:"+this.ss.size());for(let o of this.ss)console.log(o)},n.exports=i}),na=ve((e,n)=>{ce(),pe(),fe();var t=wu();n.exports.NumberAllocator=t}),vu=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var n=su(),t=na(),h=class{constructor(f){f>0&&(this.aliasToTopic=new n.LRUCache({max:f}),this.topicToAlias={},this.numberAllocator=new t.NumberAllocator(1,f),this.max=f,this.length=0)}put(f,a){if(a===0||a>this.max)return!1;let i=this.aliasToTopic.get(a);return i&&delete this.topicToAlias[i],this.aliasToTopic.set(a,f),this.topicToAlias[f]=a,this.numberAllocator.use(a),this.length=this.aliasToTopic.size,!0}getTopicByAlias(f){return this.aliasToTopic.get(f)}getAliasByTopic(f){let a=this.topicToAlias[f];return typeof a<"u"&&this.aliasToTopic.get(a),a}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};e.default=h}),_u=ve(e=>{ce(),pe(),fe();var n=e&&e.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0});var t=Gr(),h=n(vu()),f=br(),a=(i,o)=>{i.log("_handleConnack");let{options:l}=i,u=l.protocolVersion===5?o.reasonCode:o.returnCode;if(clearTimeout(i.connackTimer),delete i.topicAliasSend,o.properties){if(o.properties.topicAliasMaximum){if(o.properties.topicAliasMaximum>65535){i.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}o.properties.topicAliasMaximum>0&&(i.topicAliasSend=new h.default(o.properties.topicAliasMaximum))}o.properties.serverKeepAlive&&l.keepalive&&(l.keepalive=o.properties.serverKeepAlive),o.properties.maximumPacketSize&&(l.properties||(l.properties={}),l.properties.maximumPacketSize=o.properties.maximumPacketSize)}if(u===0)i.reconnecting=!1,i._onConnect(o);else if(u>0){let d=new f.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[u]}`,u);i.emit("error",d)}};e.default=a}),Eu=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var n=(t,h,f)=>{t.log("handling pubrel packet");let a=typeof f<"u"?f:t.noop,{messageId:i}=h,o={cmd:"pubcomp",messageId:i};t.incomingStore.get(h,(l,u)=>{l?t._sendPacket(o,a):(t.emit("message",u.topic,u.payload,u),t.handleMessage(u,d=>{if(d)return a(d);t.incomingStore.del(u,t.noop),t._sendPacket(o,a)}))})};e.default=n}),Su=ve(e=>{ce(),pe(),fe();var n=e&&e.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0});var t=n(nu()),h=n(ou()),f=n(_u()),a=n(Gr()),i=n(Eu()),o=(l,u,d)=>{let{options:g}=l;if(g.protocolVersion===5&&g.properties&&g.properties.maximumPacketSize&&g.properties.maximumPacketSize<u.length)return l.emit("error",new Error(`exceeding packets size ${u.cmd}`)),l.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),l;switch(l.log("_handlePacket :: emitting packetreceive"),l.emit("packetreceive",u),u.cmd){case"publish":(0,t.default)(l,u,d);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":l.reschedulePing(),(0,a.default)(l,u),d();break;case"pubrel":l.reschedulePing(),(0,i.default)(l,u,d);break;case"connack":(0,f.default)(l,u),d();break;case"auth":l.reschedulePing(),(0,h.default)(l,u),d();break;case"pingresp":l.log("_handlePacket :: received pingresp"),l.reschedulePing(!0),d();break;case"disconnect":l.emit("disconnect",u),d();break;default:l.log("_handlePacket :: unknown command"),d();break}};e.default=o}),Au=ve(e=>{ce(),pe(),fe();var n=e&&e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.TypedEventEmitter=void 0;var t=n((sr(),Le(Xt))),h=br(),f=class{};e.TypedEventEmitter=f,(0,h.applyMixin)(f,t.default)}),Qr=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"__esModule",{value:!0}),e.isReactNativeBrowser=e.isWebWorker=void 0;var n=()=>{var a;return typeof window<"u"?typeof navigator<"u"&&((a=navigator.userAgent)===null||a===void 0?void 0:a.toLowerCase().indexOf(" electron/"))>-1&&Re!=null&&Re.versions?!Object.prototype.hasOwnProperty.call(Re.versions,"electron"):typeof window.document<"u":!1},t=()=>{var a,i;return!!(typeof self=="object"&&!((i=(a=self==null?void 0:self.constructor)===null||a===void 0?void 0:a.name)===null||i===void 0)&&i.includes("WorkerGlobalScope"))},h=()=>typeof navigator<"u"&&navigator.product==="ReactNative",f=n()||t()||h();e.isWebWorker=t(),e.isReactNativeBrowser=h(),e.default=f}),Iu=ve((e,n)=>{ce(),pe(),fe(),function(t,h){typeof e=="object"&&typeof n<"u"?h(e):typeof define=="function"&&define.amd?define(["exports"],h):(t=typeof globalThis<"u"?globalThis:t||self,h(t.fastUniqueNumbers={}))}(e,function(t){var h=function(b){return function(w){var _=b(w);return w.add(_),_}},f=function(b){return function(w,_){return b.set(w,_),_}},a=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,i=536870912,o=i*2,l=function(b,w){return function(_){var T=w.get(_),M=T===void 0?_.size:T<o?T+1:0;if(!_.has(M))return b(_,M);if(_.size<i){for(;_.has(M);)M=Math.floor(Math.random()*o);return b(_,M)}if(_.size>a)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;_.has(M);)M=Math.floor(Math.random()*a);return b(_,M)}},u=new WeakMap,d=f(u),g=l(d,u),m=h(g);t.addUniqueNumber=m,t.generateUniqueNumber=g})}),Tu=ve((e,n)=>{ce(),pe(),fe(),function(t,h){typeof e=="object"&&typeof n<"u"?h(e,Iu()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],h):(t=typeof globalThis<"u"?globalThis:t||self,h(t.workerTimersBroker={},t.fastUniqueNumbers))}(e,function(t,h){var f=function(o){return o.method!==void 0&&o.method==="call"},a=function(o){return o.error===null&&typeof o.id=="number"},i=function(o){var l=new Map([[0,function(){}]]),u=new Map([[0,function(){}]]),d=new Map,g=new Worker(o);g.addEventListener("message",function(T){var M=T.data;if(f(M)){var B=M.params,S=B.timerId,j=B.timerType;if(j==="interval"){var F=l.get(S);if(typeof F=="number"){var R=d.get(F);if(R===void 0||R.timerId!==S||R.timerType!==j)throw new Error("The timer is in an undefined state.")}else if(typeof F<"u")F();else throw new Error("The timer is in an undefined state.")}else if(j==="timeout"){var C=u.get(S);if(typeof C=="number"){var L=d.get(C);if(L===void 0||L.timerId!==S||L.timerType!==j)throw new Error("The timer is in an undefined state.")}else if(typeof C<"u")C(),u.delete(S);else throw new Error("The timer is in an undefined state.")}}else if(a(M)){var q=M.id,X=d.get(q);if(X===void 0)throw new Error("The timer is in an undefined state.");var ne=X.timerId,I=X.timerType;d.delete(q),I==="interval"?l.delete(ne):u.delete(ne)}else{var z=M.error.message;throw new Error(z)}});var m=function(T){var M=h.generateUniqueNumber(d);d.set(M,{timerId:T,timerType:"interval"}),l.set(T,M),g.postMessage({id:M,method:"clear",params:{timerId:T,timerType:"interval"}})},b=function(T){var M=h.generateUniqueNumber(d);d.set(M,{timerId:T,timerType:"timeout"}),u.set(T,M),g.postMessage({id:M,method:"clear",params:{timerId:T,timerType:"timeout"}})},w=function(T){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,B=h.generateUniqueNumber(l);return l.set(B,function(){T(),typeof l.get(B)=="function"&&g.postMessage({id:null,method:"set",params:{delay:M,now:performance.now(),timerId:B,timerType:"interval"}})}),g.postMessage({id:null,method:"set",params:{delay:M,now:performance.now(),timerId:B,timerType:"interval"}}),B},_=function(T){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,B=h.generateUniqueNumber(u);return u.set(B,T),g.postMessage({id:null,method:"set",params:{delay:M,now:performance.now(),timerId:B,timerType:"timeout"}}),B};return{clearInterval:m,clearTimeout:b,setInterval:w,setTimeout:_}};t.load=i})}),ku=ve((e,n)=>{ce(),pe(),fe(),function(t,h){typeof e=="object"&&typeof n<"u"?h(e,Tu()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],h):(t=typeof globalThis<"u"?globalThis:t||self,h(t.workerTimers={},t.workerTimersBroker))}(e,function(t,h){var f=function(g,m){var b=null;return function(){if(b!==null)return b;var w=new Blob([m],{type:"application/javascript; charset=utf-8"}),_=URL.createObjectURL(w);return b=g(_),setTimeout(function(){return URL.revokeObjectURL(_)}),b}},a=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,i=f(h.load,a),o=function(g){return i().clearInterval(g)},l=function(g){return i().clearTimeout(g)},u=function(){var g;return(g=i()).setInterval.apply(g,arguments)},d=function(){var g;return(g=i()).setTimeout.apply(g,arguments)};t.clearInterval=o,t.clearTimeout=l,t.setInterval=u,t.setTimeout=d})}),Bu=ve(e=>{ce(),pe(),fe();var n=e&&e.__createBinding||(Object.create?function(u,d,g,m){m===void 0&&(m=g);var b=Object.getOwnPropertyDescriptor(d,g);(!b||("get"in b?!d.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return d[g]}}),Object.defineProperty(u,m,b)}:function(u,d,g,m){m===void 0&&(m=g),u[m]=d[g]}),t=e&&e.__setModuleDefault||(Object.create?function(u,d){Object.defineProperty(u,"default",{enumerable:!0,value:d})}:function(u,d){u.default=d}),h=e&&e.__importStar||function(u){if(u&&u.__esModule)return u;var d={};if(u!=null)for(var g in u)g!=="default"&&Object.prototype.hasOwnProperty.call(u,g)&&n(d,u,g);return t(d,u),d};Object.defineProperty(e,"__esModule",{value:!0});var f=h(Qr()),a=ku(),i={set:a.setInterval,clear:a.clearInterval},o={set:(u,d)=>setInterval(u,d),clear:u=>clearInterval(u)},l=u=>{switch(u){case"native":return o;case"worker":return i;case"auto":default:return f.default&&!f.isWebWorker&&!f.isReactNativeBrowser?i:o}};e.default=l}),ia=ve(e=>{ce(),pe(),fe();var n=e&&e.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0});var t=n(Bu()),h=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(f,a){this.destroyed=!1,this.client=f,this.timer=typeof a=="object"&&"set"in a&&"clear"in a?a:(0,t.default)(a),this.setKeepalive(f.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(f){if(f*=1e3,isNaN(f)||f<=0||f>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${f}`);this._keepalive=f,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${f}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let f=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+f,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};e.default=h}),Bi=ve(e=>{ce(),pe(),fe();var n=e&&e.__createBinding||(Object.create?function(F,R,C,L){L===void 0&&(L=C);var q=Object.getOwnPropertyDescriptor(R,C);(!q||("get"in q?!R.__esModule:q.writable||q.configurable))&&(q={enumerable:!0,get:function(){return R[C]}}),Object.defineProperty(F,L,q)}:function(F,R,C,L){L===void 0&&(L=C),F[L]=R[C]}),t=e&&e.__setModuleDefault||(Object.create?function(F,R){Object.defineProperty(F,"default",{enumerable:!0,value:R})}:function(F,R){F.default=R}),h=e&&e.__importStar||function(F){if(F&&F.__esModule)return F;var R={};if(F!=null)for(var C in F)C!=="default"&&Object.prototype.hasOwnProperty.call(F,C)&&n(R,F,C);return t(R,F),R},f=e&&e.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(e,"__esModule",{value:!0});var a=f(yl()),i=f(Zl()),o=f(Ws()),l=Zt(),u=f(tu()),d=h(ru()),g=f(kt()),m=f($s()),b=f(Su()),w=br(),_=Au(),T=f(ia()),M=h(Qr()),B=globalThis.setImmediate||((...F)=>{let R=F.shift();(0,w.nextTick)(()=>{R(...F)})}),S={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},j=class Ci extends _.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(R,C){super(),this.options=C||{};for(let L in S)typeof this.options[L]>"u"?this.options[L]=S[L]:this.options[L]=C[L];this.log=this.options.log||(0,g.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",Ci.VERSION),M.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",M.default?"browser":"node"),this.log("MqttClient :: options.protocol",C.protocol),this.log("MqttClient :: options.protocolVersion",C.protocolVersion),this.log("MqttClient :: options.username",C.username),this.log("MqttClient :: options.keepalive",C.keepalive),this.log("MqttClient :: options.reconnectPeriod",C.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",C.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",C.properties?C.properties.topicAliasMaximum:void 0),this.options.clientId=typeof C.clientId=="string"?C.clientId:Ci.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=C.protocolVersion===5&&C.customHandleAcks?C.customHandleAcks:(...L)=>{L[3](null,0)},this.options.writeCache||(i.default.writeToStream.cacheNumbers=!1),this.streamBuilder=R,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new o.default:this.options.messageIdProvider,this.outgoingStore=C.outgoingStore||new m.default,this.incomingStore=C.incomingStore||new m.default,this.queueQoSZero=C.queueQoSZero===void 0?!0:C.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,C.properties&&C.properties.topicAliasMaximum>0&&(C.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new a.default(C.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:L}=this,q=()=>{let X=L.shift();this.log("deliver :: entry %o",X);let ne=null;if(!X){this._resubscribe();return}ne=X.packet,this.log("deliver :: call _sendPacket for %o",ne);let I=!0;ne.messageId&&ne.messageId!==0&&(this.messageIdProvider.register(ne.messageId)||(I=!1)),I?this._sendPacket(ne,z=>{X.cb&&X.cb(z),q()}):(this.log("messageId: %d has already used. The message is skipped and removed.",ne.messageId),q())};this.log("connect :: sending queued packets"),q()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(R,C){C()}handleMessage(R,C){C()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var R;let C=new l.Writable,L=i.default.parser(this.options),q=null,X=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new m.default,this.outgoingStore=this.options.outgoingStore||new m.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),L.on("packet",Q=>{this.log("parser :: on packet push to packets array."),X.push(Q)});let ne=()=>{this.log("work :: getting next packet in queue");let Q=X.shift();if(Q)this.log("work :: packet pulled from queue"),(0,b.default)(this,Q,I);else{this.log("work :: no packets in queue");let ye=q;q=null,this.log("work :: done flag is %s",!!ye),ye&&ye()}},I=()=>{if(X.length)(0,w.nextTick)(ne);else{let Q=q;q=null,Q()}};C._write=(Q,ye,ae)=>{q=ae,this.log("writable stream :: parsing buffer"),L.parse(Q),ne()};let z=Q=>{this.log("streamErrorHandler :: error",Q.message),Q.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",Q)):this.noop(Q)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(C),this.stream.on("error",z),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let te={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(te.will=Object.assign(Object.assign({},this.options.will),{payload:(R=this.options.will)===null||R===void 0?void 0:R.payload})),this.topicAliasRecv&&(te.properties||(te.properties={}),this.topicAliasRecv&&(te.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(te),L.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let Q=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(Q)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(R,C,L,q){this.log("publish :: message `%s` to topic `%s`",C,R);let{options:X}=this;typeof L=="function"&&(q=L,L=null),L=L||{},L=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),L);let{qos:ne,retain:I,dup:z,properties:te,cbStorePut:Q}=L;if(this._checkDisconnecting(q))return this;let ye=()=>{let ae=0;if((ne===1||ne===2)&&(ae=this._nextId(),ae===null))return this.log("No messageId left"),!1;let V={cmd:"publish",topic:R,payload:C,qos:ne,retain:I,messageId:ae,dup:z};switch(X.protocolVersion===5&&(V.properties=te),this.log("publish :: qos",ne),ne){case 1:case 2:this.outgoing[V.messageId]={volatile:!1,cb:q||this.noop},this.log("MqttClient:publish: packet cmd: %s",V.cmd),this._sendPacket(V,void 0,Q);break;default:this.log("MqttClient:publish: packet cmd: %s",V.cmd),this._sendPacket(V,q,Q);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ye())&&this._storeProcessingQueue.push({invoke:ye,cbStorePut:L.cbStorePut,callback:q}),this}publishAsync(R,C,L){return new Promise((q,X)=>{this.publish(R,C,L,(ne,I)=>{ne?X(ne):q(I)})})}subscribe(R,C,L){let q=this.options.protocolVersion;typeof C=="function"&&(L=C),L=L||this.noop;let X=!1,ne=[];typeof R=="string"?(R=[R],ne=R):Array.isArray(R)?ne=R:typeof R=="object"&&(X=R.resubscribe,delete R.resubscribe,ne=Object.keys(R));let I=d.validateTopics(ne);if(I!==null)return B(L,new Error(`Invalid topic ${I}`)),this;if(this._checkDisconnecting(L))return this.log("subscribe: discconecting true"),this;let z={qos:0};q===5&&(z.nl=!1,z.rap=!1,z.rh=0),C=Object.assign(Object.assign({},z),C);let te=C.properties,Q=[],ye=(V,we)=>{if(we=we||C,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,V)||this._resubscribeTopics[V].qos<we.qos||X){let se={topic:V,qos:we.qos};q===5&&(se.nl=we.nl,se.rap=we.rap,se.rh=we.rh,se.properties=te),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",se.topic,se.qos),Q.push(se)}};if(Array.isArray(R)?R.forEach(V=>{this.log("subscribe: array topic %s",V),ye(V)}):Object.keys(R).forEach(V=>{this.log("subscribe: object topic %s, %o",V,R[V]),ye(V,R[V])}),!Q.length)return L(null,[]),this;let ae=()=>{let V=this._nextId();if(V===null)return this.log("No messageId left"),!1;let we={cmd:"subscribe",subscriptions:Q,messageId:V};if(te&&(we.properties=te),this.options.resubscribe){this.log("subscribe :: resubscribe true");let se=[];Q.forEach(be=>{if(this.options.reconnectPeriod>0){let E={qos:be.qos};q===5&&(E.nl=be.nl||!1,E.rap=be.rap||!1,E.rh=be.rh||0,E.properties=be.properties),this._resubscribeTopics[be.topic]=E,se.push(be.topic)}}),this.messageIdToTopic[we.messageId]=se}return this.outgoing[we.messageId]={volatile:!0,cb(se,be){if(!se){let{granted:E}=be;for(let J=0;J<E.length;J+=1)Q[J].qos=E[J]}L(se,Q)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(we),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ae())&&this._storeProcessingQueue.push({invoke:ae,callback:L}),this}subscribeAsync(R,C){return new Promise((L,q)=>{this.subscribe(R,C,(X,ne)=>{X?q(X):L(ne)})})}unsubscribe(R,C,L){typeof R=="string"&&(R=[R]),typeof C=="function"&&(L=C),L=L||this.noop;let q=d.validateTopics(R);if(q!==null)return B(L,new Error(`Invalid topic ${q}`)),this;if(this._checkDisconnecting(L))return this;let X=()=>{let ne=this._nextId();if(ne===null)return this.log("No messageId left"),!1;let I={cmd:"unsubscribe",messageId:ne,unsubscriptions:[]};return typeof R=="string"?I.unsubscriptions=[R]:Array.isArray(R)&&(I.unsubscriptions=R),this.options.resubscribe&&I.unsubscriptions.forEach(z=>{delete this._resubscribeTopics[z]}),typeof C=="object"&&C.properties&&(I.properties=C.properties),this.outgoing[I.messageId]={volatile:!0,cb:L},this.log("unsubscribe: call _sendPacket"),this._sendPacket(I),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!X())&&this._storeProcessingQueue.push({invoke:X,callback:L}),this}unsubscribeAsync(R,C){return new Promise((L,q)=>{this.unsubscribe(R,C,(X,ne)=>{X?q(X):L(ne)})})}end(R,C,L){this.log("end :: (%s)",this.options.clientId),(R==null||typeof R!="boolean")&&(L=L||C,C=R,R=!1),typeof C!="object"&&(L=L||C,C=null),this.log("end :: cb? %s",!!L),(!L||typeof L!="function")&&(L=this.noop);let q=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(ne=>{this.outgoingStore.close(I=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),L){let z=ne||I;this.log("end :: closeStores: invoking callback with args"),L(z)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},X=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,R),this._cleanUp(R,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,w.nextTick)(q)},C)};return this.disconnecting?(L(),this):(this._clearReconnect(),this.disconnecting=!0,!R&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,X,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),X()),this)}endAsync(R,C){return new Promise((L,q)=>{this.end(R,C,X=>{X?q(X):L()})})}removeOutgoingMessage(R){if(this.outgoing[R]){let{cb:C}=this.outgoing[R];this._removeOutgoingAndStoreMessage(R,()=>{C(new Error("Message removed"))})}return this}reconnect(R){this.log("client reconnect");let C=()=>{R?(this.options.incomingStore=R.incomingStore,this.options.outgoingStore=R.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new m.default,this.outgoingStore=this.options.outgoingStore||new m.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=C:C(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(R=>{this.outgoing[R].volatile&&typeof this.outgoing[R].cb=="function"&&(this.outgoing[R].cb(new Error("Connection closed")),delete this.outgoing[R])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(R=>{typeof this.outgoing[R].cb=="function"&&(this.outgoing[R].cb(new Error("Connection closed")),delete this.outgoing[R])}))}_removeTopicAliasAndRecoverTopicName(R){let C;R.properties&&(C=R.properties.topicAlias);let L=R.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",C,L),L.length===0){if(typeof C>"u")return new Error("Unregistered Topic Alias");if(L=this.topicAliasSend.getTopicByAlias(C),typeof L>"u")return new Error("Unregistered Topic Alias");R.topic=L}C&&delete R.properties.topicAlias}_checkDisconnecting(R){return this.disconnecting&&(R&&R!==this.noop?R(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(R,C,L={}){if(C&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",C)),this.log("_cleanUp :: forced? %s",R),R)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let q=Object.assign({cmd:"disconnect"},L);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(q,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),B(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),C&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",C),C())}_storeAndSend(R,C,L){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",R.cmd);let q=R,X;if(q.cmd==="publish"&&(q=(0,u.default)(R),X=this._removeTopicAliasAndRecoverTopicName(q),X))return C&&C(X);this.outgoingStore.put(q,ne=>{if(ne)return C&&C(ne);L(),this._writePacket(R,C)})}_applyTopicAlias(R){if(this.options.protocolVersion===5&&R.cmd==="publish"){let C;R.properties&&(C=R.properties.topicAlias);let L=R.topic.toString();if(this.topicAliasSend)if(C){if(L.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",L,C),!this.topicAliasSend.put(L,C)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",L,C),new Error("Sending Topic Alias out of range")}else L.length!==0&&(this.options.autoAssignTopicAlias?(C=this.topicAliasSend.getAliasByTopic(L),C?(R.topic="",R.properties=Object.assign(Object.assign({},R.properties),{topicAlias:C}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",L,C)):(C=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(L,C),R.properties=Object.assign(Object.assign({},R.properties),{topicAlias:C}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",L,C))):this.options.autoUseTopicAlias&&(C=this.topicAliasSend.getAliasByTopic(L),C&&(R.topic="",R.properties=Object.assign(Object.assign({},R.properties),{topicAlias:C}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",L,C))));else if(C)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",L,C),new Error("Sending Topic Alias out of range")}}_noop(R){this.log("noop ::",R)}_writePacket(R,C){this.log("_writePacket :: packet: %O",R),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",R),this.log("_writePacket :: writing to stream");let L=i.default.writeToStream(R,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",L),!L&&C&&C!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",C)):C&&(this.log("_writePacket :: invoking cb"),C())}_sendPacket(R,C,L,q){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),L=L||this.noop,C=C||this.noop;let X=this._applyTopicAlias(R);if(X){C(X);return}if(!this.connected){if(R.cmd==="auth"){this._writePacket(R,C);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(R,C,L);return}if(q){this._writePacket(R,C);return}switch(R.cmd){case"publish":break;case"pubrel":this._storeAndSend(R,C,L);return;default:this._writePacket(R,C);return}switch(R.qos){case 2:case 1:this._storeAndSend(R,C,L);break;case 0:default:this._writePacket(R,C);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(R,C,L){this.log("_storePacket :: packet: %o",R),this.log("_storePacket :: cb? %s",!!C),L=L||this.noop;let q=R;if(q.cmd==="publish"){q=(0,u.default)(R);let ne=this._removeTopicAliasAndRecoverTopicName(q);if(ne)return C&&C(ne)}let X=q.qos||0;X===0&&this.queueQoSZero||q.cmd!=="publish"?this.queue.push({packet:q,cb:C}):X>0?(C=this.outgoing[q.messageId]?this.outgoing[q.messageId].cb:null,this.outgoingStore.put(q,ne=>{if(ne)return C&&C(ne);L()})):C&&C(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new T.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(R=!1){this.keepaliveManager&&this.options.keepalive&&(R||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let R=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&R.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let C=0;C<R.length;C++){let L={};L[R[C]]=this._resubscribeTopics[R[C]],L.resubscribe=!0,this.subscribe(L,{properties:L[R[C]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(R){if(this.disconnected){this.emit("connect",R);return}this.connackPacket=R,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let C=()=>{let L=this.outgoingStore.createStream(),q=()=>{L.destroy(),L=null,this._flushStoreProcessingQueue(),X()},X=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",q),L.on("error",I=>{X(),this._flushStoreProcessingQueue(),this.removeListener("close",q),this.emit("error",I)});let ne=()=>{if(!L)return;let I=L.read(1),z;if(!I){L.once("readable",ne);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[I.messageId]){ne();return}!this.disconnecting&&!this.reconnectTimer?(z=this.outgoing[I.messageId]?this.outgoing[I.messageId].cb:null,this.outgoing[I.messageId]={volatile:!1,cb(te,Q){z&&z(te,Q),ne()}},this._packetIdsDuringStoreProcessing[I.messageId]=!0,this.messageIdProvider.register(I.messageId)?this._sendPacket(I,void 0,void 0,!0):this.log("messageId: %d has already used.",I.messageId)):L.destroy&&L.destroy()};L.on("end",()=>{let I=!0;for(let z in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[z]){I=!1;break}this.removeListener("close",q),I?(X(),this._invokeAllStoreProcessingQueue(),this.emit("connect",R)):C()}),ne()};C()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let R=this._storeProcessingQueue[0];if(R&&R.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let R of this._storeProcessingQueue)R.cbStorePut&&R.cbStorePut(new Error("Connection closed")),R.callback&&R.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(R,C){delete this.outgoing[R],this.outgoingStore.del({messageId:R},(L,q)=>{C(L,q),this.messageIdProvider.deallocate(R),this._invokeStoreProcessingQueue()})}};j.VERSION=w.MQTTJS_VERSION,e.default=j}),Cu=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var n=na(),t=class{constructor(){this.numberAllocator=new n.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(h){return this.numberAllocator.use(h)}deallocate(h){this.numberAllocator.free(h)}clear(){this.numberAllocator.clear()}};e.default=t});function Wt(e){throw new RangeError(sa[e])}function Eo(e,n){let t=e.split("@"),h="";t.length>1&&(h=t[0]+"@",e=t[1]);let f=function(a,i){let o=[],l=a.length;for(;l--;)o[l]=i(a[l]);return o}((e=e.replace(oa,".")).split("."),n).join(".");return h+f}function So(e){let n=[],t=0,h=e.length;for(;t<h;){let f=e.charCodeAt(t++);if(f>=55296&&f<=56319&&t<h){let a=e.charCodeAt(t++);(64512&a)==56320?n.push(((1023&f)<<10)+(1023&a)+65536):(n.push(f),t--)}else n.push(f)}return n}var Ao,Io,oa,sa,lt,_r,an,ln,un,hn,Lt,xu=Ge(()=>{ce(),pe(),fe(),Ao=/^xn--/,Io=/[^\0-\x7E]/,oa=/[\x2E\u3002\uFF0E\uFF61]/g,sa={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},lt=Math.floor,_r=String.fromCharCode,an=function(e,n){return e+22+75*(e<26)-((n!=0)<<5)},ln=function(e,n,t){let h=0;for(e=t?lt(e/700):e>>1,e+=lt(e/n);e>455;h+=36)e=lt(e/35);return lt(h+36*e/(e+38))},un=function(e){let n=[],t=e.length,h=0,f=128,a=72,i=e.lastIndexOf("-");i<0&&(i=0);for(let l=0;l<i;++l)e.charCodeAt(l)>=128&&Wt("not-basic"),n.push(e.charCodeAt(l));for(let l=i>0?i+1:0;l<t;){let u=h;for(let g=1,m=36;;m+=36){l>=t&&Wt("invalid-input");let b=(o=e.charCodeAt(l++))-48<10?o-22:o-65<26?o-65:o-97<26?o-97:36;(b>=36||b>lt((2147483647-h)/g))&&Wt("overflow"),h+=b*g;let w=m<=a?1:m>=a+26?26:m-a;if(b<w)break;let _=36-w;g>lt(2147483647/_)&&Wt("overflow"),g*=_}let d=n.length+1;a=ln(h-u,d,u==0),lt(h/d)>2147483647-f&&Wt("overflow"),f+=lt(h/d),h%=d,n.splice(h++,0,f)}var o;return String.fromCodePoint(...n)},hn=function(e){let n=[],t=(e=So(e)).length,h=128,f=0,a=72;for(let l of e)l<128&&n.push(_r(l));let i=n.length,o=i;for(i&&n.push("-");o<t;){let l=2147483647;for(let d of e)d>=h&&d<l&&(l=d);let u=o+1;l-h>lt((2147483647-f)/u)&&Wt("overflow"),f+=(l-h)*u,h=l;for(let d of e)if(d<h&&++f>2147483647&&Wt("overflow"),d==h){let g=f;for(let m=36;;m+=36){let b=m<=a?1:m>=a+26?26:m-a;if(g<b)break;let w=g-b,_=36-b;n.push(_r(an(b+w%_,0))),g=lt(w/_)}n.push(_r(an(g,0))),a=ln(f,u,o==i),f=0,++o}++f,++h}return n.join("")},Lt={version:"2.1.0",ucs2:{decode:So,encode:e=>String.fromCodePoint(...e)},decode:un,encode:hn,toASCII:function(e){return Eo(e,function(n){return Io.test(n)?"xn--"+hn(n):n})},toUnicode:function(e){return Eo(e,function(n){return Ao.test(n)?un(n.slice(4).toLowerCase()):n})}},Lt.decode,Lt.encode,Lt.toASCII,Lt.toUnicode,Lt.ucs2,Lt.version});function Ru(e,n){return Object.prototype.hasOwnProperty.call(e,n)}var To,tr,ko,pt,Ou=Ge(()=>{ce(),pe(),fe(),To=function(e,n,t,h){n=n||"&",t=t||"=";var f={};if(typeof e!="string"||e.length===0)return f;var a=/\+/g;e=e.split(n);var i=1e3;h&&typeof h.maxKeys=="number"&&(i=h.maxKeys);var o=e.length;i>0&&o>i&&(o=i);for(var l=0;l<o;++l){var u,d,g,m,b=e[l].replace(a,"%20"),w=b.indexOf(t);w>=0?(u=b.substr(0,w),d=b.substr(w+1)):(u=b,d=""),g=decodeURIComponent(u),m=decodeURIComponent(d),Ru(f,g)?Array.isArray(f[g])?f[g].push(m):f[g]=[f[g],m]:f[g]=m}return f},tr=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},ko=function(e,n,t,h){return n=n||"&",t=t||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(f){var a=encodeURIComponent(tr(f))+t;return Array.isArray(e[f])?e[f].map(function(i){return a+encodeURIComponent(tr(i))}).join(n):a+encodeURIComponent(tr(e[f]))}).join(n):h?encodeURIComponent(tr(h))+t+encodeURIComponent(tr(e)):""},pt={},pt.decode=pt.parse=To,pt.encode=pt.stringify=ko,pt.decode,pt.encode,pt.parse,pt.stringify});function xi(){throw new Error("setTimeout has not been defined")}function Ri(){throw new Error("clearTimeout has not been defined")}function aa(e){if(vt===setTimeout)return setTimeout(e,0);if((vt===xi||!vt)&&setTimeout)return vt=setTimeout,setTimeout(e,0);try{return vt(e,0)}catch{try{return vt.call(null,e,0)}catch{return vt.call(this||Yt,e,0)}}}function Pu(){Gt&&zt&&(Gt=!1,zt.length?mt=zt.concat(mt):gr=-1,mt.length&&la())}function la(){if(!Gt){var e=aa(Pu);Gt=!0;for(var n=mt.length;n;){for(zt=mt,mt=[];++gr<n;)zt&&zt[gr].run();gr=-1,n=mt.length}zt=null,Gt=!1,function(t){if(_t===clearTimeout)return clearTimeout(t);if((_t===Ri||!_t)&&clearTimeout)return _t=clearTimeout,clearTimeout(t);try{_t(t)}catch{try{return _t.call(null,t)}catch{return _t.call(this||Yt,t)}}}(e)}}function Bo(e,n){(this||Yt).fun=e,(this||Yt).array=n}function yt(){}var Co,vt,_t,Yt,We,zt,mt,Gt,gr,De,Uu=Ge(()=>{ce(),pe(),fe(),Yt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,We=Co={},function(){try{vt=typeof setTimeout=="function"?setTimeout:xi}catch{vt=xi}try{_t=typeof clearTimeout=="function"?clearTimeout:Ri}catch{_t=Ri}}(),mt=[],Gt=!1,gr=-1,We.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];mt.push(new Bo(e,n)),mt.length!==1||Gt||aa(la)},Bo.prototype.run=function(){(this||Yt).fun.apply(null,(this||Yt).array)},We.title="browser",We.browser=!0,We.env={},We.argv=[],We.version="",We.versions={},We.on=yt,We.addListener=yt,We.once=yt,We.off=yt,We.removeListener=yt,We.removeAllListeners=yt,We.emit=yt,We.prependListener=yt,We.prependOnceListener=yt,We.listeners=function(e){return[]},We.binding=function(e){throw new Error("process.binding is not supported")},We.cwd=function(){return"/"},We.chdir=function(e){throw new Error("process.chdir is not supported")},We.umask=function(){return 0},De=Co,De.addListener,De.argv,De.binding,De.browser,De.chdir,De.cwd,De.emit,De.env,De.listeners,De.nextTick,De.off,De.on,De.once,De.prependListener,De.prependOnceListener,De.removeAllListeners,De.removeListener,De.title,De.umask,De.version,De.versions});function Lu(){if(Oi)return Pr;Oi=!0;var e=Pr={},n,t;function h(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=h}catch{n=h}try{typeof clearTimeout=="function"?t=clearTimeout:t=f}catch{t=f}})();function a(_){if(n===setTimeout)return setTimeout(_,0);if((n===h||!n)&&setTimeout)return n=setTimeout,setTimeout(_,0);try{return n(_,0)}catch{try{return n.call(null,_,0)}catch{return n.call(this||qt,_,0)}}}function i(_){if(t===clearTimeout)return clearTimeout(_);if((t===f||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(_);try{return t(_)}catch{try{return t.call(null,_)}catch{return t.call(this||qt,_)}}}var o=[],l=!1,u,d=-1;function g(){!l||!u||(l=!1,u.length?o=u.concat(o):d=-1,o.length&&m())}function m(){if(!l){var _=a(g);l=!0;for(var T=o.length;T;){for(u=o,o=[];++d<T;)u&&u[d].run();d=-1,T=o.length}u=null,l=!1,i(_)}}e.nextTick=function(_){var T=new Array(arguments.length-1);if(arguments.length>1)for(var M=1;M<arguments.length;M++)T[M-1]=arguments[M];o.push(new b(_,T)),o.length===1&&!l&&a(m)};function b(_,T){(this||qt).fun=_,(this||qt).array=T}b.prototype.run=function(){(this||qt).fun.apply(null,(this||qt).array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function w(){}return e.on=w,e.addListener=w,e.once=w,e.off=w,e.removeListener=w,e.removeAllListeners=w,e.emit=w,e.prependListener=w,e.prependOnceListener=w,e.listeners=function(_){return[]},e.binding=function(_){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(_){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},Pr}var Pr,Oi,qt,je,ua=Ge(()=>{ce(),pe(),fe(),Pr={},Oi=!1,qt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,je=Lu(),je.platform="browser",je.addListener,je.argv,je.binding,je.browser,je.chdir,je.cwd,je.emit,je.env,je.listeners,je.nextTick,je.off,je.on,je.once,je.prependListener,je.prependOnceListener,je.removeAllListeners,je.removeListener,je.title,je.umask,je.version,je.versions});function Mu(){if(Pi)return Ur;Pi=!0;var e=je;function n(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var o="",l=0,u=-1,d=0,g,m=0;m<=a.length;++m){if(m<a.length)g=a.charCodeAt(m);else{if(g===47)break;g=47}if(g===47){if(!(u===m-1||d===1))if(u!==m-1&&d===2){if(o.length<2||l!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var b=o.lastIndexOf("/");if(b!==o.length-1){b===-1?(o="",l=0):(o=o.slice(0,b),l=o.length-1-o.lastIndexOf("/")),u=m,d=0;continue}}else if(o.length===2||o.length===1){o="",l=0,u=m,d=0;continue}}i&&(o.length>0?o+="/..":o="..",l=2)}else o.length>0?o+="/"+a.slice(u+1,m):o=a.slice(u+1,m),l=m-u-1;u=m,d=0}else g===46&&d!==-1?++d:d=-1}return o}function h(a,i){var o=i.dir||i.root,l=i.base||(i.name||"")+(i.ext||"");return o?o===i.root?o+l:o+a+l:l}var f={resolve:function(){for(var a="",i=!1,o,l=arguments.length-1;l>=-1&&!i;l--){var u;l>=0?u=arguments[l]:(o===void 0&&(o=e.cwd()),u=o),n(u),u.length!==0&&(a=u+"/"+a,i=u.charCodeAt(0)===47)}return a=t(a,!i),i?a.length>0?"/"+a:"/":a.length>0?a:"."},normalize:function(a){if(n(a),a.length===0)return".";var i=a.charCodeAt(0)===47,o=a.charCodeAt(a.length-1)===47;return a=t(a,!i),a.length===0&&!i&&(a="."),a.length>0&&o&&(a+="/"),i?"/"+a:a},isAbsolute:function(a){return n(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,i=0;i<arguments.length;++i){var o=arguments[i];n(o),o.length>0&&(a===void 0?a=o:a+="/"+o)}return a===void 0?".":f.normalize(a)},relative:function(a,i){if(n(a),n(i),a===i||(a=f.resolve(a),i=f.resolve(i),a===i))return"";for(var o=1;o<a.length&&a.charCodeAt(o)===47;++o);for(var l=a.length,u=l-o,d=1;d<i.length&&i.charCodeAt(d)===47;++d);for(var g=i.length,m=g-d,b=u<m?u:m,w=-1,_=0;_<=b;++_){if(_===b){if(m>b){if(i.charCodeAt(d+_)===47)return i.slice(d+_+1);if(_===0)return i.slice(d+_)}else u>b&&(a.charCodeAt(o+_)===47?w=_:_===0&&(w=0));break}var T=a.charCodeAt(o+_),M=i.charCodeAt(d+_);if(T!==M)break;T===47&&(w=_)}var B="";for(_=o+w+1;_<=l;++_)(_===l||a.charCodeAt(_)===47)&&(B.length===0?B+="..":B+="/..");return B.length>0?B+i.slice(d+w):(d+=w,i.charCodeAt(d)===47&&++d,i.slice(d))},_makeLong:function(a){return a},dirname:function(a){if(n(a),a.length===0)return".";for(var i=a.charCodeAt(0),o=i===47,l=-1,u=!0,d=a.length-1;d>=1;--d)if(i=a.charCodeAt(d),i===47){if(!u){l=d;break}}else u=!1;return l===-1?o?"/":".":o&&l===1?"//":a.slice(0,l)},basename:function(a,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');n(a);var o=0,l=-1,u=!0,d;if(i!==void 0&&i.length>0&&i.length<=a.length){if(i.length===a.length&&i===a)return"";var g=i.length-1,m=-1;for(d=a.length-1;d>=0;--d){var b=a.charCodeAt(d);if(b===47){if(!u){o=d+1;break}}else m===-1&&(u=!1,m=d+1),g>=0&&(b===i.charCodeAt(g)?--g===-1&&(l=d):(g=-1,l=m))}return o===l?l=m:l===-1&&(l=a.length),a.slice(o,l)}else{for(d=a.length-1;d>=0;--d)if(a.charCodeAt(d)===47){if(!u){o=d+1;break}}else l===-1&&(u=!1,l=d+1);return l===-1?"":a.slice(o,l)}},extname:function(a){n(a);for(var i=-1,o=0,l=-1,u=!0,d=0,g=a.length-1;g>=0;--g){var m=a.charCodeAt(g);if(m===47){if(!u){o=g+1;break}continue}l===-1&&(u=!1,l=g+1),m===46?i===-1?i=g:d!==1&&(d=1):i!==-1&&(d=-1)}return i===-1||l===-1||d===0||d===1&&i===l-1&&i===o+1?"":a.slice(i,l)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return h("/",a)},parse:function(a){n(a);var i={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return i;var o=a.charCodeAt(0),l=o===47,u;l?(i.root="/",u=1):u=0;for(var d=-1,g=0,m=-1,b=!0,w=a.length-1,_=0;w>=u;--w){if(o=a.charCodeAt(w),o===47){if(!b){g=w+1;break}continue}m===-1&&(b=!1,m=w+1),o===46?d===-1?d=w:_!==1&&(_=1):d!==-1&&(_=-1)}return d===-1||m===-1||_===0||_===1&&d===m-1&&d===g+1?m!==-1&&(g===0&&l?i.base=i.name=a.slice(1,m):i.base=i.name=a.slice(g,m)):(g===0&&l?(i.name=a.slice(1,d),i.base=a.slice(1,m)):(i.name=a.slice(g,d),i.base=a.slice(g,m)),i.ext=a.slice(d,m)),g>0?i.dir=a.slice(0,g-1):l&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};return f.posix=f,Ur=f,Ur}var Ur,Pi,Ui,Nu=Ge(()=>{ce(),pe(),fe(),ua(),Ur={},Pi=!1,Ui=Mu()}),ha={};Qt(ha,{URL:()=>Ba,Url:()=>Sa,default:()=>Oe,fileURLToPath:()=>ca,format:()=>Aa,parse:()=>ka,pathToFileURL:()=>fa,resolve:()=>Ia,resolveObject:()=>Ta});function st(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function hr(e,n,t){if(e&&ht.isObject(e)&&e instanceof st)return e;var h=new st;return h.parse(e,n,t),h}function ju(){if(Li)return Lr;Li=!0;var e=De;function n(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var o="",l=0,u=-1,d=0,g,m=0;m<=a.length;++m){if(m<a.length)g=a.charCodeAt(m);else{if(g===47)break;g=47}if(g===47){if(!(u===m-1||d===1))if(u!==m-1&&d===2){if(o.length<2||l!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var b=o.lastIndexOf("/");if(b!==o.length-1){b===-1?(o="",l=0):(o=o.slice(0,b),l=o.length-1-o.lastIndexOf("/")),u=m,d=0;continue}}else if(o.length===2||o.length===1){o="",l=0,u=m,d=0;continue}}i&&(o.length>0?o+="/..":o="..",l=2)}else o.length>0?o+="/"+a.slice(u+1,m):o=a.slice(u+1,m),l=m-u-1;u=m,d=0}else g===46&&d!==-1?++d:d=-1}return o}function h(a,i){var o=i.dir||i.root,l=i.base||(i.name||"")+(i.ext||"");return o?o===i.root?o+l:o+a+l:l}var f={resolve:function(){for(var a="",i=!1,o,l=arguments.length-1;l>=-1&&!i;l--){var u;l>=0?u=arguments[l]:(o===void 0&&(o=e.cwd()),u=o),n(u),u.length!==0&&(a=u+"/"+a,i=u.charCodeAt(0)===47)}return a=t(a,!i),i?a.length>0?"/"+a:"/":a.length>0?a:"."},normalize:function(a){if(n(a),a.length===0)return".";var i=a.charCodeAt(0)===47,o=a.charCodeAt(a.length-1)===47;return a=t(a,!i),a.length===0&&!i&&(a="."),a.length>0&&o&&(a+="/"),i?"/"+a:a},isAbsolute:function(a){return n(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,i=0;i<arguments.length;++i){var o=arguments[i];n(o),o.length>0&&(a===void 0?a=o:a+="/"+o)}return a===void 0?".":f.normalize(a)},relative:function(a,i){if(n(a),n(i),a===i||(a=f.resolve(a),i=f.resolve(i),a===i))return"";for(var o=1;o<a.length&&a.charCodeAt(o)===47;++o);for(var l=a.length,u=l-o,d=1;d<i.length&&i.charCodeAt(d)===47;++d);for(var g=i.length,m=g-d,b=u<m?u:m,w=-1,_=0;_<=b;++_){if(_===b){if(m>b){if(i.charCodeAt(d+_)===47)return i.slice(d+_+1);if(_===0)return i.slice(d+_)}else u>b&&(a.charCodeAt(o+_)===47?w=_:_===0&&(w=0));break}var T=a.charCodeAt(o+_),M=i.charCodeAt(d+_);if(T!==M)break;T===47&&(w=_)}var B="";for(_=o+w+1;_<=l;++_)(_===l||a.charCodeAt(_)===47)&&(B.length===0?B+="..":B+="/..");return B.length>0?B+i.slice(d+w):(d+=w,i.charCodeAt(d)===47&&++d,i.slice(d))},_makeLong:function(a){return a},dirname:function(a){if(n(a),a.length===0)return".";for(var i=a.charCodeAt(0),o=i===47,l=-1,u=!0,d=a.length-1;d>=1;--d)if(i=a.charCodeAt(d),i===47){if(!u){l=d;break}}else u=!1;return l===-1?o?"/":".":o&&l===1?"//":a.slice(0,l)},basename:function(a,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');n(a);var o=0,l=-1,u=!0,d;if(i!==void 0&&i.length>0&&i.length<=a.length){if(i.length===a.length&&i===a)return"";var g=i.length-1,m=-1;for(d=a.length-1;d>=0;--d){var b=a.charCodeAt(d);if(b===47){if(!u){o=d+1;break}}else m===-1&&(u=!1,m=d+1),g>=0&&(b===i.charCodeAt(g)?--g===-1&&(l=d):(g=-1,l=m))}return o===l?l=m:l===-1&&(l=a.length),a.slice(o,l)}else{for(d=a.length-1;d>=0;--d)if(a.charCodeAt(d)===47){if(!u){o=d+1;break}}else l===-1&&(u=!1,l=d+1);return l===-1?"":a.slice(o,l)}},extname:function(a){n(a);for(var i=-1,o=0,l=-1,u=!0,d=0,g=a.length-1;g>=0;--g){var m=a.charCodeAt(g);if(m===47){if(!u){o=g+1;break}continue}l===-1&&(u=!1,l=g+1),m===46?i===-1?i=g:d!==1&&(d=1):i!==-1&&(d=-1)}return i===-1||l===-1||d===0||d===1&&i===l-1&&i===o+1?"":a.slice(i,l)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return h("/",a)},parse:function(a){n(a);var i={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return i;var o=a.charCodeAt(0),l=o===47,u;l?(i.root="/",u=1):u=0;for(var d=-1,g=0,m=-1,b=!0,w=a.length-1,_=0;w>=u;--w){if(o=a.charCodeAt(w),o===47){if(!b){g=w+1;break}continue}m===-1&&(b=!1,m=w+1),o===46?d===-1?d=w:_!==1&&(_=1):d!==-1&&(_=-1)}return d===-1||m===-1||_===0||_===1&&d===m-1&&d===g+1?m!==-1&&(g===0&&l?i.base=i.name=a.slice(1,m):i.base=i.name=a.slice(g,m)):(g===0&&l?(i.name=a.slice(1,d),i.base=a.slice(1,m)):(i.name=a.slice(g,d),i.base=a.slice(g,m)),i.ext=a.slice(d,m)),g>0?i.dir=a.slice(0,g-1):l&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};return f.posix=f,Lr=f,Lr}function Fu(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Fr?Du(e):Wu(e)}function Du(e){let n=e.hostname,t=e.pathname;for(let h=0;h<t.length;h++)if(t[h]==="%"){let f=t.codePointAt(h+2)||32;if(t[h+1]==="2"&&f===102||t[h+1]==="5"&&f===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(ya,"\\"),t=decodeURIComponent(t),n!=="")return`\\\\${n}${t}`;{let h=t.codePointAt(1)|32,f=t[2];if(h<ga||h>ma||f!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function Wu(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let n=e.pathname;for(let t=0;t<n.length;t++)if(n[t]==="%"){let h=n.codePointAt(t+2)||32;if(n[t+1]==="2"&&h===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(n)}function $u(e){let n=Mi.resolve(e),t=e.charCodeAt(e.length-1);(t===da||Fr&&t===pa)&&n[n.length-1]!==Mi.sep&&(n+="/");let h=new URL("file://");return n.includes("%")&&(n=n.replace(ba,"%25")),!Fr&&n.includes("\\")&&(n=n.replace(wa,"%5C")),n.includes(`
`)&&(n=n.replace(va,"%0A")),n.includes("\r")&&(n=n.replace(_a,"%0D")),n.includes("	")&&(n=n.replace(Ea,"%09")),h.pathname=n,h}function ca(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Dr?qu(e):Hu(e)}function qu(e){let n=e.hostname,t=e.pathname;for(let h=0;h<t.length;h++)if(t[h]==="%"){let f=t.codePointAt(h+2)||32;if(t[h+1]==="2"&&f===102||t[h+1]==="5"&&f===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(Pa,"\\"),t=decodeURIComponent(t),n!=="")return`\\\\${n}${t}`;{let h=t.codePointAt(1)|32,f=t[2];if(h<Ra||h>Oa||f!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function Hu(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let n=e.pathname;for(let t=0;t<n.length;t++)if(n[t]==="%"){let h=n.codePointAt(t+2)||32;if(n[t+1]==="2"&&h===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(n)}function fa(e){let n=Ui.resolve(e),t=e.charCodeAt(e.length-1);(t===xa||Dr&&t===Ca)&&n[n.length-1]!==Ui.sep&&(n+="/");let h=new URL("file://");return n.includes("%")&&(n=n.replace(Ua,"%25")),!Dr&&n.includes("\\")&&(n=n.replace(La,"%5C")),n.includes(`
`)&&(n=n.replace(Ma,"%0A")),n.includes("\r")&&(n=n.replace(Na,"%0D")),n.includes("	")&&(n=n.replace(ja,"%09")),h.pathname=n,h}var Oe,xo,ht,Ro,Oo,Po,Uo,Er,cn,fn,pn,Lo,Mo,Sr,$t,Ar,Lr,Li,Mi,No,pa,da,ga,ma,Fr,ya,ba,wa,va,_a,Ea,jo,Sa,Aa,Ia,Ta,ka,Ba,Ca,xa,Ra,Oa,Dr,Pa,Ua,La,Ma,Na,ja,Vu=Ge(()=>{ce(),pe(),fe(),xu(),Ou(),Uu(),Nu(),ua(),Oe={},xo=Lt,ht={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},Oe.parse=hr,Oe.resolve=function(e,n){return hr(e,!1,!0).resolve(n)},Oe.resolveObject=function(e,n){return e?hr(e,!1,!0).resolveObject(n):n},Oe.format=function(e){return ht.isString(e)&&(e=hr(e)),e instanceof st?e.format():st.prototype.format.call(e)},Oe.Url=st,Ro=/^([a-z0-9.+-]+:)/i,Oo=/:[0-9]*$/,Po=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Uo=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),Er=["'"].concat(Uo),cn=["%","/","?",";","#"].concat(Er),fn=["/","?","#"],pn=/^[+a-z0-9A-Z_-]{0,63}$/,Lo=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Mo={javascript:!0,"javascript:":!0},Sr={javascript:!0,"javascript:":!0},$t={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Ar=pt,st.prototype.parse=function(e,n,t){if(!ht.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var h=e.indexOf("?"),f=h!==-1&&h<e.indexOf("#")?"?":"#",a=e.split(f);a[0]=a[0].replace(/\\/g,"/");var i=e=a.join(f);if(i=i.trim(),!t&&e.split("#").length===1){var o=Po.exec(i);if(o)return this.path=i,this.href=i,this.pathname=o[1],o[2]?(this.search=o[2],this.query=n?Ar.parse(this.search.substr(1)):this.search.substr(1)):n&&(this.search="",this.query={}),this}var l=Ro.exec(i);if(l){var u=(l=l[0]).toLowerCase();this.protocol=u,i=i.substr(l.length)}if(t||l||i.match(/^\/\/[^@\/]+@[^@\/]+/)){var d=i.substr(0,2)==="//";!d||l&&Sr[l]||(i=i.substr(2),this.slashes=!0)}if(!Sr[l]&&(d||l&&!$t[l])){for(var g,m,b=-1,w=0;w<fn.length;w++)(_=i.indexOf(fn[w]))!==-1&&(b===-1||_<b)&&(b=_);for((m=b===-1?i.lastIndexOf("@"):i.lastIndexOf("@",b))!==-1&&(g=i.slice(0,m),i=i.slice(m+1),this.auth=decodeURIComponent(g)),b=-1,w=0;w<cn.length;w++){var _;(_=i.indexOf(cn[w]))!==-1&&(b===-1||_<b)&&(b=_)}b===-1&&(b=i.length),this.host=i.slice(0,b),i=i.slice(b),this.parseHost(),this.hostname=this.hostname||"";var T=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!T)for(var M=this.hostname.split(/\./),B=(w=0,M.length);w<B;w++){var S=M[w];if(S&&!S.match(pn)){for(var j="",F=0,R=S.length;F<R;F++)S.charCodeAt(F)>127?j+="x":j+=S[F];if(!j.match(pn)){var C=M.slice(0,w),L=M.slice(w+1),q=S.match(Lo);q&&(C.push(q[1]),L.unshift(q[2])),L.length&&(i="/"+L.join(".")+i),this.hostname=C.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=xo.toASCII(this.hostname));var X=this.port?":"+this.port:"",ne=this.hostname||"";this.host=ne+X,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),i[0]!=="/"&&(i="/"+i))}if(!Mo[u])for(w=0,B=Er.length;w<B;w++){var I=Er[w];if(i.indexOf(I)!==-1){var z=encodeURIComponent(I);z===I&&(z=escape(I)),i=i.split(I).join(z)}}var te=i.indexOf("#");te!==-1&&(this.hash=i.substr(te),i=i.slice(0,te));var Q=i.indexOf("?");if(Q!==-1?(this.search=i.substr(Q),this.query=i.substr(Q+1),n&&(this.query=Ar.parse(this.query)),i=i.slice(0,Q)):n&&(this.search="",this.query={}),i&&(this.pathname=i),$t[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){X=this.pathname||"";var ye=this.search||"";this.path=X+ye}return this.href=this.format(),this},st.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var n=this.protocol||"",t=this.pathname||"",h=this.hash||"",f=!1,a="";this.host?f=e+this.host:this.hostname&&(f=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(f+=":"+this.port)),this.query&&ht.isObject(this.query)&&Object.keys(this.query).length&&(a=Ar.stringify(this.query));var i=this.search||a&&"?"+a||"";return n&&n.substr(-1)!==":"&&(n+=":"),this.slashes||(!n||$t[n])&&f!==!1?(f="//"+(f||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):f||(f=""),h&&h.charAt(0)!=="#"&&(h="#"+h),i&&i.charAt(0)!=="?"&&(i="?"+i),n+f+(t=t.replace(/[?#]/g,function(o){return encodeURIComponent(o)}))+(i=i.replace("#","%23"))+h},st.prototype.resolve=function(e){return this.resolveObject(hr(e,!1,!0)).format()},st.prototype.resolveObject=function(e){if(ht.isString(e)){var n=new st;n.parse(e,!1,!0),e=n}for(var t=new st,h=Object.keys(this),f=0;f<h.length;f++){var a=h[f];t[a]=this[a]}if(t.hash=e.hash,e.href==="")return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var i=Object.keys(e),o=0;o<i.length;o++){var l=i[o];l!=="protocol"&&(t[l]=e[l])}return $t[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!$t[e.protocol]){for(var u=Object.keys(e),d=0;d<u.length;d++){var g=u[d];t[g]=e[g]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||Sr[e.protocol])t.pathname=e.pathname;else{for(var m=(e.pathname||"").split("/");m.length&&!(e.host=m.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),m[0]!==""&&m.unshift(""),m.length<2&&m.unshift(""),t.pathname=m.join("/")}if(t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,t.pathname||t.search){var b=t.pathname||"",w=t.search||"";t.path=b+w}return t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var _=t.pathname&&t.pathname.charAt(0)==="/",T=e.host||e.pathname&&e.pathname.charAt(0)==="/",M=T||_||t.host&&e.pathname,B=M,S=t.pathname&&t.pathname.split("/")||[],j=(m=e.pathname&&e.pathname.split("/")||[],t.protocol&&!$t[t.protocol]);if(j&&(t.hostname="",t.port=null,t.host&&(S[0]===""?S[0]=t.host:S.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(m[0]===""?m[0]=e.host:m.unshift(e.host)),e.host=null),M=M&&(m[0]===""||S[0]==="")),T)t.host=e.host||e.host===""?e.host:t.host,t.hostname=e.hostname||e.hostname===""?e.hostname:t.hostname,t.search=e.search,t.query=e.query,S=m;else if(m.length)S||(S=[]),S.pop(),S=S.concat(m),t.search=e.search,t.query=e.query;else if(!ht.isNullOrUndefined(e.search))return j&&(t.hostname=t.host=S.shift(),(q=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=q.shift(),t.host=t.hostname=q.shift())),t.search=e.search,t.query=e.query,ht.isNull(t.pathname)&&ht.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!S.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var F=S.slice(-1)[0],R=(t.host||e.host||S.length>1)&&(F==="."||F==="..")||F==="",C=0,L=S.length;L>=0;L--)(F=S[L])==="."?S.splice(L,1):F===".."?(S.splice(L,1),C++):C&&(S.splice(L,1),C--);if(!M&&!B)for(;C--;C)S.unshift("..");!M||S[0]===""||S[0]&&S[0].charAt(0)==="/"||S.unshift(""),R&&S.join("/").substr(-1)!=="/"&&S.push("");var q,X=S[0]===""||S[0]&&S[0].charAt(0)==="/";return j&&(t.hostname=t.host=X?"":S.length?S.shift():"",(q=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=q.shift(),t.host=t.hostname=q.shift())),(M=M||t.host&&S.length)&&!X&&S.unshift(""),S.length?t.pathname=S.join("/"):(t.pathname=null,t.path=null),ht.isNull(t.pathname)&&ht.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},st.prototype.parseHost=function(){var e=this.host,n=Oo.exec(e);n&&((n=n[0])!==":"&&(this.port=n.substr(1)),e=e.substr(0,e.length-n.length)),e&&(this.hostname=e)},Oe.Url,Oe.format,Oe.resolve,Oe.resolveObject,Lr={},Li=!1,Mi=ju(),No=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Oe.URL=typeof URL<"u"?URL:null,Oe.pathToFileURL=$u,Oe.fileURLToPath=Fu,Oe.Url,Oe.format,Oe.resolve,Oe.resolveObject,Oe.URL,pa=92,da=47,ga=97,ma=122,Fr=No==="win32",ya=/\//g,ba=/%/g,wa=/\\/g,va=/\n/g,_a=/\r/g,Ea=/\t/g,jo=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Oe.URL=typeof URL<"u"?URL:null,Oe.pathToFileURL=fa,Oe.fileURLToPath=ca,Sa=Oe.Url,Aa=Oe.format,Ia=Oe.resolve,Ta=Oe.resolveObject,ka=Oe.parse,Ba=Oe.URL,Ca=92,xa=47,Ra=97,Oa=122,Dr=jo==="win32",Pa=/\//g,Ua=/%/g,La=/\\/g,Ma=/\n/g,Na=/\r/g,ja=/\t/g}),zu=ve((e,n)=>{ce(),pe(),fe(),n.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),Gi=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferedDuplex=e.writev=void 0;var n=Zt(),t=(Je(),Le(Qe));function h(a,i){let o=new Array(a.length);for(let l=0;l<a.length;l++)typeof a[l].chunk=="string"?o[l]=t.Buffer.from(a[l].chunk,"utf8"):o[l]=a[l].chunk;this._write(t.Buffer.concat(o),"binary",i)}e.writev=h;var f=class extends n.Duplex{constructor(a,i,o){super({objectMode:!0}),this.proxy=i,this.socket=o,this.writeQueue=[],a.objectMode||(this._writev=h.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",l=>{this.push(l)})}_read(a){this.proxy.read(a)}_write(a,i,o){this.isSocketOpen?this.writeToProxy(a,i,o):this.writeQueue.push({chunk:a,encoding:i,cb:o})}_final(a){this.writeQueue=[],this.proxy.end(a)}_destroy(a,i){this.writeQueue=[],this.proxy.destroy(),i(a)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(a,i,o){this.proxy.write(a,i)===!1?this.proxy.once("drain",o):o()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:a,encoding:i,cb:o}=this.writeQueue.shift();this.writeToProxy(a,i,o)}}};e.BufferedDuplex=f}),Ir=ve(e=>{ce(),pe(),fe();var n=e&&e.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(e,"__esModule",{value:!0}),e.streamBuilder=e.browserStreamBuilder=void 0;var t=(Je(),Le(Qe)),h=n(zu()),f=n(kt()),a=Zt(),i=n(Qr()),o=Gi(),l=(0,f.default)("mqttjs:ws"),u=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function d(M,B){let S=`${M.protocol}://${M.hostname}:${M.port}${M.path}`;return typeof M.transformWsUrl=="function"&&(S=M.transformWsUrl(S,M,B)),S}function g(M){let B=M;return M.port||(M.protocol==="wss"?B.port=443:B.port=80),M.path||(B.path="/"),M.wsOptions||(B.wsOptions={}),!i.default&&!M.forceNativeWebSocket&&M.protocol==="wss"&&u.forEach(S=>{Object.prototype.hasOwnProperty.call(M,S)&&!Object.prototype.hasOwnProperty.call(M.wsOptions,S)&&(B.wsOptions[S]=M[S])}),B}function m(M){let B=g(M);if(B.hostname||(B.hostname=B.host),!B.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let S=new URL(document.URL);B.hostname=S.hostname,B.port||(B.port=Number(S.port))}return B.objectMode===void 0&&(B.objectMode=!(B.binary===!0||B.binary===void 0)),B}function b(M,B,S){l("createWebSocket"),l(`protocol: ${S.protocolId} ${S.protocolVersion}`);let j=S.protocolId==="MQIsdp"&&S.protocolVersion===3?"mqttv3.1":"mqtt";l(`creating new Websocket for url: ${B} and protocol: ${j}`);let F;return S.createWebsocket?F=S.createWebsocket(B,[j],S):F=new h.default(B,[j],S.wsOptions),F}function w(M,B){let S=B.protocolId==="MQIsdp"&&B.protocolVersion===3?"mqttv3.1":"mqtt",j=d(B,M),F;return B.createWebsocket?F=B.createWebsocket(j,[S],B):F=new WebSocket(j,[S]),F.binaryType="arraybuffer",F}var _=(M,B)=>{l("streamBuilder");let S=g(B);S.hostname=S.hostname||S.host||"localhost";let j=d(S,M),F=b(M,j,S),R=h.default.createWebSocketStream(F,S.wsOptions);return R.url=j,F.on("close",()=>{R.destroy()}),R};e.streamBuilder=_;var T=(M,B)=>{l("browserStreamBuilder");let S,j=m(B).browserBufferSize||1024*512,F=B.browserBufferTimeout||1e3,R=!B.objectMode,C=w(M,B),L=X(B,Q,ye);B.objectMode||(L._writev=o.writev.bind(L)),L.on("close",()=>{C.close()});let q=typeof C.addEventListener<"u";C.readyState===C.OPEN?(S=L,S.socket=C):(S=new o.BufferedDuplex(B,L,C),q?C.addEventListener("open",ne):C.onopen=ne),q?(C.addEventListener("close",I),C.addEventListener("error",z),C.addEventListener("message",te)):(C.onclose=I,C.onerror=z,C.onmessage=te);function X(ae,V,we){let se=new a.Transform({objectMode:ae.objectMode});return se._write=V,se._flush=we,se}function ne(){l("WebSocket onOpen"),S instanceof o.BufferedDuplex&&S.socketReady()}function I(ae){l("WebSocket onClose",ae),S.end(),S.destroy()}function z(ae){l("WebSocket onError",ae);let V=new Error("WebSocket error");V.event=ae,S.destroy(V)}function te(ae){let{data:V}=ae;V instanceof ArrayBuffer?V=t.Buffer.from(V):V=t.Buffer.from(V,"utf8"),L.push(V)}function Q(ae,V,we){if(C.bufferedAmount>j){setTimeout(Q,F,ae,V,we);return}R&&typeof ae=="string"&&(ae=t.Buffer.from(ae,"utf8"));try{C.send(ae)}catch(se){return we(se)}we()}function ye(ae){C.close(),ae()}return S};e.browserStreamBuilder=T}),Qi={};Qt(Qi,{Server:()=>Fe,Socket:()=>Fe,Stream:()=>Fe,_createServerHandle:()=>Fe,_normalizeArgs:()=>Fe,_setSimultaneousAccepts:()=>Fe,connect:()=>Fe,createConnection:()=>Fe,createServer:()=>Fe,default:()=>Fa,isIP:()=>Fe,isIPv4:()=>Fe,isIPv6:()=>Fe});function Fe(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var Fa,Da=Ge(()=>{ce(),pe(),fe(),Fa={_createServerHandle:Fe,_normalizeArgs:Fe,_setSimultaneousAccepts:Fe,connect:Fe,createConnection:Fe,createServer:Fe,isIP:Fe,isIPv4:Fe,isIPv6:Fe,Server:Fe,Socket:Fe,Stream:Fe}}),Fo=ve(e=>{ce(),pe(),fe();var n=e&&e.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0});var t=n((Da(),Le(Qi))),h=n(kt()),f=(0,h.default)("mqttjs:tcp"),a=(i,o)=>{o.port=o.port||1883,o.hostname=o.hostname||o.host||"localhost";let{port:l,path:u}=o,d=o.hostname;return f("port %d and host %s",l,d),t.default.createConnection({port:l,host:d,path:u})};e.default=a}),Wa={};Qt(Wa,{default:()=>$a});var $a,Ku=Ge(()=>{ce(),pe(),fe(),$a={}}),Do=ve(e=>{ce(),pe(),fe();var n=e&&e.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var t=n((Ku(),Le(Wa))),h=n((Da(),Le(Qi))),f=n(kt()),a=(0,f.default)("mqttjs:tls"),i=(o,l)=>{l.port=l.port||8883,l.host=l.hostname||l.host||"localhost",h.default.isIP(l.host)===0&&(l.servername=l.host),l.rejectUnauthorized=l.rejectUnauthorized!==!1,delete l.path,a("port %d host %s rejectUnauthorized %b",l.port,l.host,l.rejectUnauthorized);let u=t.default.connect(l);u.on("secureConnect",()=>{l.rejectUnauthorized&&!u.authorized?u.emit("error",new Error("TLS not authorized")):u.removeListener("error",d)});function d(g){l.rejectUnauthorized&&o.emit("error",g),u.end()}return u.on("error",d),u};e.default=i}),Wo=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var n=(Je(),Le(Qe)),t=Zt(),h=Gi(),f,a,i;function o(){let m=new t.Transform;return m._write=(b,w,_)=>{f.send({data:b.buffer,success(){_()},fail(T){_(new Error(T))}})},m._flush=b=>{f.close({success(){b()}})},m}function l(m){m.hostname||(m.hostname="localhost"),m.path||(m.path="/"),m.wsOptions||(m.wsOptions={})}function u(m,b){let w=m.protocol==="wxs"?"wss":"ws",_=`${w}://${m.hostname}${m.path}`;return m.port&&m.port!==80&&m.port!==443&&(_=`${w}://${m.hostname}:${m.port}${m.path}`),typeof m.transformWsUrl=="function"&&(_=m.transformWsUrl(_,m,b)),_}function d(){f.onOpen(()=>{i.socketReady()}),f.onMessage(m=>{let{data:b}=m;b instanceof ArrayBuffer?b=n.Buffer.from(b):b=n.Buffer.from(b,"utf8"),a.push(b)}),f.onClose(()=>{i.emit("close"),i.end(),i.destroy()}),f.onError(m=>{let b=new Error(m.errMsg);i.destroy(b)})}var g=(m,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let w=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";l(b);let _=u(b,m);f=wx.connectSocket({url:_,protocols:[w]}),a=o(),i=new h.BufferedDuplex(b,a,f),i._destroy=(M,B)=>{f.close({success(){B&&B(M)}})};let T=i.destroy;return i.destroy=(M,B)=>(i.destroy=T,setTimeout(()=>{f.close({fail(){i._destroy(M,B)}})},0),i),d(),i};e.default=g}),$o=ve(e=>{ce(),pe(),fe(),Object.defineProperty(e,"__esModule",{value:!0});var n=(Je(),Le(Qe)),t=Zt(),h=Gi(),f,a,i,o=!1;function l(){let b=new t.Transform;return b._write=(w,_,T)=>{f.sendSocketMessage({data:w.buffer,success(){T()},fail(){T(new Error)}})},b._flush=w=>{f.closeSocket({success(){w()}})},b}function u(b){b.hostname||(b.hostname="localhost"),b.path||(b.path="/"),b.wsOptions||(b.wsOptions={})}function d(b,w){let _=b.protocol==="alis"?"wss":"ws",T=`${_}://${b.hostname}${b.path}`;return b.port&&b.port!==80&&b.port!==443&&(T=`${_}://${b.hostname}:${b.port}${b.path}`),typeof b.transformWsUrl=="function"&&(T=b.transformWsUrl(T,b,w)),T}function g(){o||(o=!0,f.onSocketOpen(()=>{i.socketReady()}),f.onSocketMessage(b=>{if(typeof b.data=="string"){let w=n.Buffer.from(b.data,"base64");a.push(w)}else{let w=new FileReader;w.addEventListener("load",()=>{let _=w.result;_ instanceof ArrayBuffer?_=n.Buffer.from(_):_=n.Buffer.from(_,"utf8"),a.push(_)}),w.readAsArrayBuffer(b.data)}}),f.onSocketClose(()=>{i.end(),i.destroy()}),f.onSocketError(b=>{i.destroy(b)}))}var m=(b,w)=>{if(w.hostname=w.hostname||w.host,!w.hostname)throw new Error("Could not determine host. Specify host manually.");let _=w.protocolId==="MQIsdp"&&w.protocolVersion===3?"mqttv3.1":"mqtt";u(w);let T=d(w,b);return f=w.my,f.connectSocket({url:T,protocols:_}),a=l(),i=new h.BufferedDuplex(w,a,f),g(),i};e.default=m}),Yu=ve(e=>{ce(),pe(),fe();var n=e&&e.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0}),e.connectAsync=void 0;var t=n(kt()),h=n((Vu(),Le(ha))),f=n(Bi()),a=n(Qr());typeof(Re==null?void 0:Re.nextTick)!="function"&&(Re.nextTick=setImmediate);var i=(0,t.default)("mqttjs"),o=null;function l(g){let m;g.auth&&(m=g.auth.match(/^(.+):(.+)$/),m?(g.username=m[1],g.password=m[2]):g.username=g.auth)}function u(g,m){var b,w,_,T;if(i("connecting to an MQTT broker..."),typeof g=="object"&&!m&&(m=g,g=""),m=m||{},g&&typeof g=="string"){let S=h.default.parse(g,!0),j={};if(S.port!=null&&(j.port=Number(S.port)),j.host=S.hostname,j.query=S.query,j.auth=S.auth,j.protocol=S.protocol,j.path=S.path,j.protocol=(b=j.protocol)===null||b===void 0?void 0:b.replace(/:$/,""),m=Object.assign(Object.assign({},j),m),!m.protocol)throw new Error("Missing protocol")}if(m.unixSocket=m.unixSocket||((w=m.protocol)===null||w===void 0?void 0:w.includes("+unix")),m.unixSocket?m.protocol=m.protocol.replace("+unix",""):!(!((_=m.protocol)===null||_===void 0)&&_.startsWith("ws"))&&!(!((T=m.protocol)===null||T===void 0)&&T.startsWith("wx"))&&delete m.path,l(m),m.query&&typeof m.query.clientId=="string"&&(m.clientId=m.query.clientId),m.cert&&m.key)if(m.protocol){if(["mqtts","wss","wxs","alis"].indexOf(m.protocol)===-1)switch(m.protocol){case"mqtt":m.protocol="mqtts";break;case"ws":m.protocol="wss";break;case"wx":m.protocol="wxs";break;case"ali":m.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${m.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(o||(o={},!a.default&&!m.forceNativeWebSocket?(o.ws=Ir().streamBuilder,o.wss=Ir().streamBuilder,o.mqtt=Fo().default,o.tcp=Fo().default,o.ssl=Do().default,o.tls=o.ssl,o.mqtts=Do().default):(o.ws=Ir().browserStreamBuilder,o.wss=Ir().browserStreamBuilder,o.wx=Wo().default,o.wxs=Wo().default,o.ali=$o().default,o.alis=$o().default)),!o[m.protocol]){let S=["mqtts","wss"].indexOf(m.protocol)!==-1;m.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((j,F)=>S&&F%2===0?!1:typeof o[j]=="function")[0]}if(m.clean===!1&&!m.clientId)throw new Error("Missing clientId for unclean clients");m.protocol&&(m.defaultProtocol=m.protocol);function M(S){return m.servers&&((!S._reconnectCount||S._reconnectCount===m.servers.length)&&(S._reconnectCount=0),m.host=m.servers[S._reconnectCount].host,m.port=m.servers[S._reconnectCount].port,m.protocol=m.servers[S._reconnectCount].protocol?m.servers[S._reconnectCount].protocol:m.defaultProtocol,m.hostname=m.host,S._reconnectCount++),i("calling streambuilder for",m.protocol),o[m.protocol](S,m)}let B=new f.default(M,m);return B.on("error",()=>{}),B}function d(g,m,b=!0){return new Promise((w,_)=>{let T=u(g,m),M={connect:S=>{B(),w(T)},end:()=>{B(),w(T)},error:S=>{B(),T.end(),_(S)}};b===!1&&(M.close=()=>{M.error(new Error("Couldn't connect to server"))});function B(){Object.keys(M).forEach(S=>{T.off(S,M[S])})}Object.keys(M).forEach(S=>{T.on(S,M[S])})})}e.connectAsync=d,e.default=u}),qo=ve(e=>{ce(),pe(),fe();var n=e&&e.__createBinding||(Object.create?function(b,w,_,T){T===void 0&&(T=_);var M=Object.getOwnPropertyDescriptor(w,_);(!M||("get"in M?!w.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return w[_]}}),Object.defineProperty(b,T,M)}:function(b,w,_,T){T===void 0&&(T=_),b[T]=w[_]}),t=e&&e.__setModuleDefault||(Object.create?function(b,w){Object.defineProperty(b,"default",{enumerable:!0,value:w})}:function(b,w){b.default=w}),h=e&&e.__importStar||function(b){if(b&&b.__esModule)return b;var w={};if(b!=null)for(var _ in b)_!=="default"&&Object.prototype.hasOwnProperty.call(b,_)&&n(w,b,_);return t(w,b),w},f=e&&e.__exportStar||function(b,w){for(var _ in b)_!=="default"&&!Object.prototype.hasOwnProperty.call(w,_)&&n(w,b,_)},a=e&&e.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=e.KeepaliveManager=e.UniqueMessageIdProvider=e.DefaultMessageIdProvider=e.Store=e.MqttClient=e.connectAsync=e.connect=e.Client=void 0;var i=a(Bi());e.MqttClient=i.default;var o=a(Ws());e.DefaultMessageIdProvider=o.default;var l=a(Cu());e.UniqueMessageIdProvider=l.default;var u=a($s());e.Store=u.default;var d=h(Yu());e.connect=d.default,Object.defineProperty(e,"connectAsync",{enumerable:!0,get:function(){return d.connectAsync}});var g=a(ia());e.KeepaliveManager=g.default,e.Client=i.default,f(Bi(),e),f(br(),e);var m=Gr();Object.defineProperty(e,"ReasonCodes",{enumerable:!0,get:function(){return m.ReasonCodes}})}),Gu=ve(e=>{ce(),pe(),fe();var n=e&&e.__createBinding||(Object.create?function(i,o,l,u){u===void 0&&(u=l);var d=Object.getOwnPropertyDescriptor(o,l);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[l]}}),Object.defineProperty(i,u,d)}:function(i,o,l,u){u===void 0&&(u=l),i[u]=o[l]}),t=e&&e.__setModuleDefault||(Object.create?function(i,o){Object.defineProperty(i,"default",{enumerable:!0,value:o})}:function(i,o){i.default=o}),h=e&&e.__importStar||function(i){if(i&&i.__esModule)return i;var o={};if(i!=null)for(var l in i)l!=="default"&&Object.prototype.hasOwnProperty.call(i,l)&&n(o,i,l);return t(o,i),o},f=e&&e.__exportStar||function(i,o){for(var l in i)l!=="default"&&!Object.prototype.hasOwnProperty.call(o,l)&&n(o,i,l)};Object.defineProperty(e,"__esModule",{value:!0});var a=h(qo());e.default=a,f(qo(),e)}),Qu=Gu();/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/var Ye=[];for(var dn=0;dn<256;++dn)Ye.push((dn+256).toString(16).slice(1));function Ju(e,n=0){return(Ye[e[n+0]]+Ye[e[n+1]]+Ye[e[n+2]]+Ye[e[n+3]]+"-"+Ye[e[n+4]]+Ye[e[n+5]]+"-"+Ye[e[n+6]]+Ye[e[n+7]]+"-"+Ye[e[n+8]]+Ye[e[n+9]]+"-"+Ye[e[n+10]]+Ye[e[n+11]]+Ye[e[n+12]]+Ye[e[n+13]]+Ye[e[n+14]]+Ye[e[n+15]]).toLowerCase()}var Tr,Xu=new Uint8Array(16);function Zu(){if(!Tr&&(Tr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Tr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Tr(Xu)}var eh=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ho={randomUUID:eh};function th(e,n,t){if(Ho.randomUUID&&!n&&!e)return Ho.randomUUID();e=e||{};var h=e.random||(e.rng||Zu)();return h[6]=h[6]&15|64,h[8]=h[8]&63|128,Ju(h)}const rh=["warn","error"];function nh(e){return rh.includes(e)?Function.prototype.bind?Function.prototype.bind.call(globalThis.console[e],console):function(...n){Function.prototype.apply.call(globalThis.console[e],console,n)}:()=>null}function ih(){const e={};return Object.keys(console).forEach(n=>{typeof globalThis.console[n]=="function"&&(e[n]=nh(n))}),e}const Rt=ih();var Wr=(e=>(e[e.Function=1]="Function",e[e.Event=2]="Event",e))(Wr||{}),ot=(e=>(e[e.EnvelopeType=1]="EnvelopeType",e[e.Success=2]="Success",e[e.Result=3]="Result",e[e.MessageId=4]="MessageId",e[e.Error=5]="Error",e[e.PeerId=6]="PeerId",e[e.EventName=7]="EventName",e[e.EventData=8]="EventData",e))(ot||{});function oh(e){const n=new Set(["#","+","\0"]);if(e.length>65535||e.startsWith("/")||e.endsWith("/")||e.endsWith("/presence")||e.endsWith("/messages"))return!1;const t=e.split("/");for(const h of t){if(h==="")return!1;for(const f of h)if(n.has(f))return!1}return!0}const mr=class mr extends al{constructor(t,h){super();Ce(this,"_mqttClient");Ce(this,"brokerURL");Ce(this,"roomName");Ce(this,"peerId");Ce(this,"peers",new Set);Ce(this,"_topicMessages");Ce(this,"_topicPresence");Ce(this,"_hasClosedBeenInvoked",!1);if(this.peerId=th(),this.brokerURL=t,this.roomName=h,oh(h))this._topicMessages=`${this.roomName}/messages`,this._topicPresence=`${this.roomName}/presence`,mr.roomWorkerMap.set(this.peerId,this),this.once("close",()=>mr.roomWorkerMap.delete(this.peerId)),this._mqttClient=Qu.connect(t,{will:{topic:this._topicPresence,payload:this._makeLWTPayload(),qos:2,retain:!1},keepalive:10,username:h}),this._mqttClient.subscribe(this._topicPresence),this._mqttClient.subscribe(this._topicMessages),this._mqttClient.on("connect",()=>{this._announcePresence("join"),this.emit("connect")}),this._mqttClient.on("disconnect",f=>{this._emitLocalHostEvent("disconnect",f)}),this._mqttClient.on("message",(f,a)=>{if(f===this._topicMessages){const i=this._decodeMessagePayload(a);this._emitLocalHostEvent("message",i)}else if(f===this._topicPresence){const i=this._decodeBuffer(a),{peerId:o,status:l}=i;if(o===this.peerId)Rt.debug("Ignoring local presence");else{Rt.debug("remote_presence",i);let u=!1;["join","here","checkin"].includes(l)?(l!=="here"&&this._announcePresence("here"),this.peers.has(o)||(this.peers.add(o),l==="join"&&(Rt.debug("peer join",o),this._emitLocalHostEvent("peerjoin",o)),u=!0)):l==="leave"&&(Rt.debug("peer leave",o),this.peers.delete(o),this._emitLocalHostEvent("peerleave",o),u=!0),u&&(Rt.debug("remote peers",[...this.peers]),this._emitLocalHostEvent("peersupdate",[...this.peers]))}}}),this._mqttClient.on("close",()=>{this.close()}),this._mqttClient.on("reconnect",()=>{Rt.debug("Attempting to reconnect"),this._emitLocalHostEvent("reconnect")}),this._mqttClient.on("offline",()=>{Rt.debug("Client is offline"),this._emitLocalHostEvent("offline")}),this._mqttClient.on("end",()=>{Rt.debug("Client has disconnected"),this._emitLocalHostEvent("end")}),this._mqttClient.on("error",f=>{this.emit("error",f)});else{const f=new Error("Invalid room name");this.emit("error",f),queueMicrotask(()=>{this.close()})}}_encodeBuffer(t){let h;return nt.Buffer.isBuffer(t)?h=nt.Buffer.concat([nt.Buffer.from([0]),t]):typeof t=="string"?h=nt.Buffer.concat([nt.Buffer.from([1]),nt.Buffer.from(t)]):h=nt.Buffer.concat([nt.Buffer.from([2]),nt.Buffer.from(JSON.stringify(t))]),h}_encodeMessagePayload(t){const h=this._encodeBuffer(t.data),f=nt.Buffer.from(t.peerId,"utf-8"),a=nt.Buffer.from([f.length]);return nt.Buffer.concat([a,f,h])}_emitLocalHostEvent(t,h){self.postMessage({[ot.PeerId]:this.peerId,[ot.EnvelopeType]:Wr.Event,[ot.EventName]:t,[ot.EventData]:h})}_decodeBuffer(t){let h;if(t[0]===0)h=t.subarray(1);else if(t[0]===1)h=t.subarray(1).toString("utf-8");else if(t[0]===2)h=JSON.parse(t.subarray(1).toString());else throw new Error(`Could not determine _decodeBuffer type from code: ${t[0]}`);return h}_decodeMessagePayload(t){const h=t[0],f=t.subarray(1,1+h).toString("utf-8"),a=t.subarray(1+h),i=this._decodeBuffer(a);return{peerId:f,data:i}}_makeLWTPayload(){return this._encodeBuffer({peerId:this.peerId,status:"leave"})}async send(t,h){const f={peerId:this.peerId,data:t},a=this._encodeMessagePayload(f);return this._mqttClient.publishAsync(this._topicMessages,a,h)}_announcePresence(t){this._mqttClient.publish(this._topicPresence,this._encodeBuffer({peerId:this.peerId,status:t}),{qos:2,retain:!1})}close(){this._hasClosedBeenInvoked||(this._hasClosedBeenInvoked=!0,this._mqttClient&&(this._mqttClient.publish(this._topicPresence,this._makeLWTPayload(),{qos:2,retain:!1}),this._mqttClient.end()),this.emit("close"),this._emitLocalHostEvent("close"),this.removeAllListeners())}};Ce(mr,"roomWorkerMap",new Map);let yr=mr;const $r=[];async function sh(e,n,t,h){const f=new yr(e,n),a=o=>{f.off("connect",i),h(o)},i=()=>{f.off("error",a),t(f.peerId)};f.once("error",a),f.once("connect",i)}async function ah(){for(;$r.length>0;){const e=$r.shift();if(e){const{functionName:n,args:t,resolve:h,reject:f}=e;if(n==="connect-room"){const a=t[0],i=t[1];await sh(a,i,h,f)}else if(n==="send"){const a=t[0],i=t[1],o=t[2]||{},l=yr.roomWorkerMap.get(a);l?l.send(i,o).then(u=>h(u)).catch(u=>f(u)):f("Unhandled worker room")}else if(n==="close"){const a=t[0],i=yr.roomWorkerMap.get(a);i?h(i.close()):f("Unhandled worker room")}}}}self.onmessage=async e=>{const{functionName:n,args:t,messageId:h}=e.data;new Promise((a,i)=>{$r.push({functionName:n,args:t,resolve:a,reject:i}),$r.length===1&&ah()}).then(a=>{self.postMessage({[ot.EnvelopeType]:Wr.Function,[ot.Success]:!0,[ot.Result]:a,[ot.MessageId]:h})}).catch(a=>{self.postMessage({[ot.EnvelopeType]:Wr.Function,[ot.Success]:!1,[ot.Error]:a.message,[ot.MessageId]:h})})};
